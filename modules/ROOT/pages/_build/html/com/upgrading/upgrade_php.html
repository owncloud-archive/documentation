
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Upgrade PHP on RedHat 7 and Centos 7 &#8212; ownCloud 10.0.7 Server Administration Manual 10.0.7 documentation</title>
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/responsive.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Upgrade Marketplace Applications" href="marketplace_apps.html" />
    <link rel="prev" title="Upgrading" href="index.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript">
(function () {
  /**
   * Patch TOC list.
   *
   * Will mutate the underlying span to have a correct ul for nav.
   *
   * @param $span: Span containing nested UL's to mutate.
   * @param minLevel: Starting level for nested lists. (1: global, 2: local).
   */
  var patchToc = function ($ul, minLevel) {
    var findA;

    // Find all a "internal" tags, traversing recursively.
    findA = function ($elem, level) {
      var level = level || 0,
        $items = $elem.find("> li > a.internal, > ul, > li > ul");

      // Iterate everything in order.
      $items.each(function (index, item) {
        var $item = $(item),
          tag = item.tagName.toLowerCase(),
          pad = 15 + ((level - minLevel) * 10);

        if (tag === 'a' && level >= minLevel) {
          // Add to existing padding.
          $item.css('padding-left', pad + "px");
          console.log(level, $item, 'padding-left', pad + "px");
        } else if (tag === 'ul') {
          // Recurse.
          findA($item, level + 1);
        }
      });
    };

    console.log("HERE");
    findA($ul);
  };

  $(document).ready(function () {
    // Add styling, structure to TOC's.
    $(".dropdown-menu").each(function () {
      $(this).find("ul").each(function (index, item){
        var $item = $(item);
        $item.addClass('unstyled');
      });
      $(this).find("li").each(function () {
        $(this).parent().append(this);
      });
    });

    // Patch in level.
    patchToc($("ul.globaltoc"), 2);
    patchToc($("ul.localtoc"), 2);

    // Enable dropdown.
    $('.dropdown-toggle').dropdown();
  });
}());
</script>

<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://piwik.owncloud.com/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '4']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->

  </head><body>
  

<noscript><p><img src="https://piwik.owncloud.com/piwik.php?idsite=4&rec=1" style="border:0" alt=""></p></noscript>
<div class="header_con">
<div class="container">
<h1 id="site-title"><a href="http://doc.owncloud.com" title="ownCloud" rel="home">ownCloud</a></h1>

<form class="headersearch" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>

<div class="follow">
<p><a class="visible" href="https://owncloud.com" title="ownCloud">Back to owncloud.com</a>|<span class="visible">Follow us:</span></p>
<a class="twitter" href="https://twitter.com/owncloud" target="_blank">Twitter</a>
<a class="facebook" href="http://www.facebook.com/owncloud" target="_blank">Facebook</a>
<a class="google" href="https://plus.google.com/+OwncloudOfficial" target="_blank">Google</a>
</div>

</div>
</div>

<div id="main">
<div class="container">
  <div class="content">

    </div>
    
			<div class="row">
				<div class="span3">
					<div class="sidebar">
						<div class="box sidenavi">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>

<li><a href="../contents.html">Table of Contents</a></li>
									</ul>
                  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new_admin.html">What’s New in ownCloud 10.0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Upgrading</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Upgrade PHP on RedHat 7 and Centos 7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#upgrade-php-to-version-5-6">Upgrade PHP to version 5.6</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrade-php-to-version-7-0">Upgrade PHP to version 7.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="marketplace_apps.html">Upgrade Marketplace Applications</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/index.html">Issues and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise/index.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appliance/index.html">The ownCloud X Appliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

								</ul>
							</div>
						</div>
					</div>
				</div>
        

				<div class="span9">
					<div class="page-content">
						
  <div class="section" id="upgrade-php-on-redhat-7-and-centos-7">
<h1>Upgrade PHP on RedHat 7 and Centos 7<a class="headerlink" href="#upgrade-php-on-redhat-7-and-centos-7" title="Permalink to this headline">¶</a></h1>
<p>You should, almost, always upgrade to the latest version of PHP, if and where possible.
And if you’re on a version of PHP older than 5.6 you need to upgrade.
This guide steps you through upgrading your installation of PHP to version 5.6 or 7.0 if you’re on RedHat or Centos 7.</p>
<ul class="simple">
<li><a class="reference internal" href="#upgrade-to-version-56-label"><span class="std std-ref">Upgrade PHP to version 5.6</span></a></li>
<li><a class="reference internal" href="#upgrade-to-version-7-label"><span class="std std-ref">Upgrade PHP to version 7.0</span></a></li>
</ul>
<div class="section" id="upgrade-php-to-version-5-6">
<span id="upgrade-to-version-56-label"></span><h2>Upgrade PHP to version 5.6<a class="headerlink" href="#upgrade-php-to-version-5-6" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should really be upgrading to PHP 7, as version 5.6 is <a class="reference external" href="https://secure.php.net/supported-versions.php">no longer actively supported</a>, and security support ends on 31 Dec, 2018.</p>
</div>
<p>You will first need to subscribe to the Red Hat Software Collections channel repository to be able to download and install the PHP 5.6 package in RHEL 7.
To do that, run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">subscription-manager repos --enable rhel-server-rhscl-7-rpms</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To know more about registering and subscribing a system to the Red Hat Customer Portal using the Red Hat Subscription-Manager, please refer to <a class="reference external" href="https://access.redhat.com/solutions/253273">the official documentation</a>.</p>
</div>
<p>When that’s completed, then proceed by installing PHP 5.6, along with <cite>the other required PHP packages</cite>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">yum install rh-php56 rh-php56-php rh-php56-php-gd rh-php56-php-mbstring rh-php56-php-mysqlnd rh-php56-php-intl rh-php56-php-ldap</span>
</pre></div>
</div>
<p>Once they’re all installed, you next need to enable PHP 5.6 system-wide.
To do this, run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cp /opt/rh/rh-php56/enable /etc/profile.d/rh-php56.sh source /opt/rh/rh-php56/enable</span>
</pre></div>
</div>
<p>With PHP 5.6 enabled system-wide, you next need to disable the loading the previous version of PHP 5.4.
For this example, we’ll assume that you’re upgrading from PHP 5.4.
Here, you disable it from loading by renaming it’s Apache configuration files.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mv /etc/httpd/conf.d/php.conf /etc/httpd/conf.d/php54.off</span>
<span class="go">mv /etc/httpd/conf.modules.d/10-php.conf /etc/httpd/conf.modules.d/10-php54.off</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You could also delete the files if you prefer.</p>
</div>
<p>Next, you need to enable loading of the PHP 5.6 Apache shared-object file.
This you do by copying the shared object along with its two Apache configuration
files, as in the command below.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cp /opt/rh/httpd24/root/etc/httpd/conf.d/rh-php56-php.conf /etc/httpd/conf.d/</span>
<span class="go">cp /opt/rh/httpd24/root/etc/httpd/conf.modules.d/10-rh-php56-php.conf /etc/httpd/conf.modules.d/</span>
<span class="go">cp /opt/rh/httpd24/root/etc/httpd/modules/librh-php56-php5.so /etc/httpd/modules/</span>
</pre></div>
</div>
<p>With all that done, you lastly need to restart Apache.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">service httpd restart</span>
</pre></div>
</div>
</div>
<div class="section" id="upgrade-php-to-version-7-0">
<span id="upgrade-to-version-7-label"></span><h2>Upgrade PHP to version 7.0<a class="headerlink" href="#upgrade-php-to-version-7-0" title="Permalink to this headline">¶</a></h2>
<p>As with <a class="reference internal" href="#upgrade-to-version-56-label"><span class="std std-ref">upgrading to PHP 5.6</span></a>, to upgrade to PHP 7 you will first need to subscribe to the Red Hat Software Collections channel repository to download and install the PHP 7 package in RHEL 7 (if you’ve not done this already).
This uses the same command as you will find there.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section assumes that you’re upgrading from PHP 5.6.</p>
</div>
<p>Then, proceed by installing the required PHP 7 modules.
You can use the command below to save you time.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">yum install rh-php70 rh-php70-php rh-php70-php-gd rh-php70-php-mbstring rh-php70-php-mysqlnd rh-php70-php-intl rh-php70-php-ldap</span>
</pre></div>
</div>
<p>Next, you need to enable PHP 7 and disable PHP 5.6 system-wide.
To enable PHP 7 system-wide, run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cp /opt/rh/rh-php70/enable /etc/profile.d/rh-php70.sh source /opt/rh/rh-php70/enable</span>
</pre></div>
</div>
<p>Then, you need to disable loading of the PHP 5.6 Apache modules.
You can do this either by changing their names, as in the example below, or deleting the files.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mv /etc/httpd/conf.d/php.conf /etc/httpd/conf.d/php56.off</span>
<span class="go">mv /etc/httpd/conf.modules.d/10-php.conf /etc/httpd/conf.modules.d/10-php56.off</span>
</pre></div>
</div>
<p>With that done, you next need to copy the PHP 7 Apache modules into place; that being the two Apache configuration files and the shared object file.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cp /opt/rh/httpd24/root/etc/httpd/conf.d/rh-php70-php.conf /etc/httpd/conf.d/</span>
<span class="go">cp /opt/rh/httpd24/root/etc/httpd/conf.modules.d/15-rh-php70-php.conf /etc/httpd/conf.modules.d/</span>
<span class="go">cp /opt/rh/httpd24/root/etc/httpd/modules/librh-php70-php7.so /etc/httpd/modules/</span>
</pre></div>
</div>
<p>Finally, you need to restart Apache to make the changes permanent, as in the command below.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">service httpd restart</span>
</pre></div>
</div>
</div>
</div>


					</div>
				</div>
			</div>

  </div>
</div>
</div>
<footer class="footer">
  <div class="container">
  <div class="footer_navi">

  <div class="menu-footer-navigation-container">
  	<ul id="menu-footer-navigation" class="menu">
  		<li><a href="https://owncloud.com">Home</a></li>
  		<li><a href="https://owncloud.com/about">About ownCloud</a></li>
  		<li><a href="https://owncloud.com/resources">Resources</a></li>
  		<li><a href="https://owncloud.com/become-partner">Become a Partner</a></li>
  		<li><a href="https://owncloud.org">Community</a></li>
  		<li><a href="https://owncloud.com/blog">Blog</a></li>
  		<li><a href="https://owncloud.com/jobs">Jobs</a></li>
  		<li><a href="https://owncloud.com/contact">Contact</a></li>
  	</ul>
  </div>

  <div class="follow_f">
  	<ul>
  		<li><a class="twitter" href="https://twitter.com/ownloud" target="_blank">Twitter</a></li>
  		<li><a class="facebook" href="http://www.facebook.com/owncloud" target="_blank">Facebook</a></li>
  		<li><a class="google" href="https://plus.google.com/+OwncloudOfficial" target="_blank">Google</a></li>
  	</ul>
  </div>

  <p class="copyright">© ownCloud 2011-2015</p>

  </div>
  </div>
</footer>
  </body>
</html>