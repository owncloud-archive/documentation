
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Using the occ Command &#8212; ownCloud 10.0.7 Server Administration Manual 10.0.7 documentation</title>
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/responsive.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Configuring the Activity App" href="activity_configuration.html" />
    <link rel="prev" title="Importing System-wide and Personal SSL Certificates" href="import_ssl_cert.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript">
(function () {
  /**
   * Patch TOC list.
   *
   * Will mutate the underlying span to have a correct ul for nav.
   *
   * @param $span: Span containing nested UL's to mutate.
   * @param minLevel: Starting level for nested lists. (1: global, 2: local).
   */
  var patchToc = function ($ul, minLevel) {
    var findA;

    // Find all a "internal" tags, traversing recursively.
    findA = function ($elem, level) {
      var level = level || 0,
        $items = $elem.find("> li > a.internal, > ul, > li > ul");

      // Iterate everything in order.
      $items.each(function (index, item) {
        var $item = $(item),
          tag = item.tagName.toLowerCase(),
          pad = 15 + ((level - minLevel) * 10);

        if (tag === 'a' && level >= minLevel) {
          // Add to existing padding.
          $item.css('padding-left', pad + "px");
          console.log(level, $item, 'padding-left', pad + "px");
        } else if (tag === 'ul') {
          // Recurse.
          findA($item, level + 1);
        }
      });
    };

    console.log("HERE");
    findA($ul);
  };

  $(document).ready(function () {
    // Add styling, structure to TOC's.
    $(".dropdown-menu").each(function () {
      $(this).find("ul").each(function (index, item){
        var $item = $(item);
        $item.addClass('unstyled');
      });
      $(this).find("li").each(function () {
        $(this).parent().append(this);
      });
    });

    // Patch in level.
    patchToc($("ul.globaltoc"), 2);
    patchToc($("ul.localtoc"), 2);

    // Enable dropdown.
    $('.dropdown-toggle').dropdown();
  });
}());
</script>

<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://piwik.owncloud.com/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '4']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->

  </head><body>
  

<noscript><p><img src="https://piwik.owncloud.com/piwik.php?idsite=4&rec=1" style="border:0" alt=""></p></noscript>
<div class="header_con">
<div class="container">
<h1 id="site-title"><a href="http://doc.owncloud.com" title="ownCloud" rel="home">ownCloud</a></h1>

<form class="headersearch" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>

<div class="follow">
<p><a class="visible" href="https://owncloud.com" title="ownCloud">Back to owncloud.com</a>|<span class="visible">Follow us:</span></p>
<a class="twitter" href="https://twitter.com/owncloud" target="_blank">Twitter</a>
<a class="facebook" href="http://www.facebook.com/owncloud" target="_blank">Facebook</a>
<a class="google" href="https://plus.google.com/+OwncloudOfficial" target="_blank">Google</a>
</div>

</div>
</div>

<div id="main">
<div class="container">
  <div class="content">

    </div>
    
			<div class="row">
				<div class="span3">
					<div class="sidebar">
						<div class="box sidenavi">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>

<li><a href="../../contents.html">Table of Contents</a></li>
									</ul>
                  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whats_new_admin.html">What’s New in ownCloud 10.0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrading/index.html">Upgrading</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../database/index.html">Database Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/index.html">File Sharing and Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ldap/ldap_proxy_cache_server_setup.html">How To Install and Configure an LDAP Proxy-Cache Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mimetypes/index.html">Mimetypes Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Server Configuration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="security_setup_warnings.html">Warnings on Admin Page</a></li>
<li class="toctree-l3"><a class="reference internal" href="import_ssl_cert.html">Importing System-wide and Personal SSL Certificates</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Using the occ Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="activity_configuration.html">Configuring the Activity App</a></li>
<li class="toctree-l3"><a class="reference internal" href="antivirus_configuration.html">Virus Scanner Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="caching_configuration.html">Memory Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="background_jobs_configuration.html">Background Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="config_sample_php_parameters.html">Config.php Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="email_configuration.html">Email Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="excluded_blacklisted_files.html">Excluding Directories and Blacklisting Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="external_sites.html">Linking External Sites</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_client_repos.html">Custom Client Download Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="knowledgebase_configuration.html">Knowledge Base Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="language_configuration.html">Language Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging_configuration.html">Logging Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="harden_server.html">Hardening and Security Guidance</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/password-policy.html">Password Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="reverse_proxy_configuration.html">Reverse Proxy Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="thirdparty_php_configuration.html">Using Third Party PHP Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="automatic_configuration.html">Automatic Configuration Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="oc_server_tuning.html">ownCloud Server Tuning</a></li>
<li class="toctree-l3"><a class="reference internal" href="index_php_less_urls.html">Enable index.php-less URLs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/index.html">User Management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../maintenance/index.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../issues/index.html">Issues and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../enterprise/index.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appliance/index.html">The ownCloud X Appliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

								</ul>
							</div>
						</div>
					</div>
				</div>
        

				<div class="span9">
					<div class="page-content">
						
  <div class="section" id="using-the-occ-command">
<h1>Using the occ Command<a class="headerlink" href="#using-the-occ-command" title="Permalink to this headline">¶</a></h1>
<p>ownCloud’s <code class="docutils literal notranslate"><span class="pre">occ</span></code> command (ownCloud console) is ownCloud’s command-line interface.
You can perform many common server operations with <code class="docutils literal notranslate"><span class="pre">occ</span></code>, such as installing and upgrading ownCloud, managing users and groups, encryption, passwords, LDAP setting, and more.</p>
<p><code class="docutils literal notranslate"><span class="pre">occ</span></code> is in the <code class="file docutils literal notranslate"><span class="pre">owncloud/</span></code> directory; for example <code class="file docutils literal notranslate"><span class="pre">/var/www/owncloud</span></code> on Ubuntu Linux. <code class="docutils literal notranslate"><span class="pre">occ</span></code> is a PHP script.
<strong>You must run it as your HTTP user</strong> to ensure that the correct permissions are maintained on your ownCloud files and directories.</p>
<div class="section" id="occ-command-directory">
<h2>occ Command Directory<a class="headerlink" href="#occ-command-directory" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#http-user-label"><span class="std std-ref">Run occ As Your HTTP User</span></a></li>
<li><a class="reference internal" href="#apps-commands-label"><span class="std std-ref">Apps Commands</span></a></li>
<li><a class="reference internal" href="#background-jobs-selector-label"><span class="std std-ref">Background Jobs Selector</span></a></li>
<li><a class="reference internal" href="#config-commands-label"><span class="std std-ref">Config Commands</span></a></li>
<li><a class="reference internal" href="#dav-label"><span class="std std-ref">Dav Commands</span></a></li>
<li><a class="reference internal" href="#database-conversion-label"><span class="std std-ref">Database Conversion</span></a></li>
<li><a class="reference internal" href="#encryption-label"><span class="std std-ref">Encryption</span></a></li>
<li><a class="reference internal" href="#federation-sync-label"><span class="std std-ref">Federation Sync</span></a></li>
<li><a class="reference internal" href="#file-operations-label"><span class="std std-ref">File Operations</span></a></li>
<li><a class="reference internal" href="#files-external-label"><span class="std std-ref">Files External</span></a></li>
<li><a class="reference internal" href="#group-commands-label"><span class="std std-ref">Group Commands</span></a></li>
<li><a class="reference internal" href="#integrity-check-label"><span class="std std-ref">Integrity Check</span></a></li>
<li><a class="reference internal" href="#create-javascript-translation-files-label"><span class="std std-ref">l10n, Create Javascript Translation Files for Apps</span></a></li>
<li><a class="reference internal" href="#ldap-commands-label"><span class="std std-ref">LDAP Commands</span></a></li>
<li><a class="reference internal" href="#logging-commands-label"><span class="std std-ref">Logging Commands</span></a></li>
<li><a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">Maintenance Commands</span></a></li>
<li><a class="reference internal" href="#market-commands-label"><span class="std std-ref">Market</span></a></li>
<li><a class="reference internal" href="#reports-commands-label"><span class="std std-ref">Reports</span></a></li>
<li><a class="reference internal" href="#security-commands-label"><span class="std std-ref">Security</span></a></li>
<li><a class="reference internal" href="#ransomware-commands-label"><span class="std std-ref">Ransomware Protection</span></a></li>
<li><a class="reference internal" href="#shibboleth-label"><span class="std std-ref">Shibboleth Modes (Enterprise Edition only)</span></a></li>
<li><a class="reference internal" href="#trashbin-label"><span class="std std-ref">Trashbin</span></a></li>
<li><a class="reference internal" href="#user-commands-label"><span class="std std-ref">User Commands</span></a></li>
<li><a class="reference internal" href="#versions-label"><span class="std std-ref">Versions</span></a></li>
<li><a class="reference internal" href="#command-line-installation-label"><span class="std std-ref">Command Line Installation</span></a></li>
<li><a class="reference internal" href="#command-line-upgrade-label"><span class="std std-ref">Command Line Upgrade</span></a></li>
<li><a class="reference internal" href="#two-factor-auth-label"><span class="std std-ref">Two-factor Authentication</span></a></li>
<li><a class="reference internal" href="#disable-user-label"><span class="std std-ref">Disable Users</span></a></li>
</ul>
</div>
<div class="section" id="run-occ-as-your-http-user">
<span id="http-user-label"></span><h2>Run occ As Your HTTP User<a class="headerlink" href="#run-occ-as-your-http-user" title="Permalink to this headline">¶</a></h2>
<p>The HTTP user is different on the various Linux distributions.
See <a class="reference internal" href="../../installation/source_installation.html#strong-perms-label"><span class="std std-ref">Set Strong Directory Permissions</span></a> to learn how to find your HTTP user.</p>
<ul class="simple">
<li>The HTTP user and group in Debian/Ubuntu is www-data.</li>
<li>The HTTP user and group in Fedora/CentOS is apache.</li>
<li>The HTTP user and group in Arch Linux is http.</li>
<li>The HTTP user in openSUSE is wwwrun, and the HTTP group is www.</li>
</ul>
<p>If your HTTP server is configured to use a different PHP version than the default (/usr/bin/php), <code class="docutils literal notranslate"><span class="pre">occ</span></code> should be run with the same version.
For example, in CentOS 6.5 with SCL-PHP54 installed, the command looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">apache</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">rh</span><span class="o">/</span><span class="n">php54</span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">php</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">html</span><span class="o">/</span><span class="n">owncloud</span><span class="o">/</span><span class="n">occ</span>
</pre></div>
</div>
<p>Running <code class="docutils literal notranslate"><span class="pre">occ</span></code> with no options lists all commands and options, like this example on Ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span>
<span class="n">ownCloud</span> <span class="n">version</span> <span class="mf">9.0</span><span class="o">.</span><span class="mi">0</span>

<span class="n">Usage</span><span class="p">:</span>
 <span class="n">command</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="n">arguments</span><span class="p">]</span>

<span class="n">Options</span><span class="p">:</span>
 <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">Display</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span>
 <span class="o">-</span><span class="n">q</span><span class="p">,</span> <span class="o">--</span><span class="n">quiet</span>           <span class="n">Do</span> <span class="ow">not</span> <span class="n">output</span> <span class="nb">any</span> <span class="n">message</span>
 <span class="o">-</span><span class="n">V</span><span class="p">,</span> <span class="o">--</span><span class="n">version</span>         <span class="n">Display</span> <span class="n">this</span> <span class="n">application</span> <span class="n">version</span>
     <span class="o">--</span><span class="n">ansi</span>            <span class="n">Force</span> <span class="n">ANSI</span> <span class="n">output</span>
     <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">ansi</span>         <span class="n">Disable</span> <span class="n">ANSI</span> <span class="n">output</span>
 <span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">interaction</span>  <span class="n">Do</span> <span class="ow">not</span> <span class="n">ask</span> <span class="nb">any</span> <span class="n">interactive</span> <span class="n">question</span>
     <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">warnings</span>     <span class="n">Skip</span> <span class="k">global</span> <span class="n">warnings</span><span class="p">,</span> <span class="n">show</span> <span class="n">command</span> <span class="n">output</span> <span class="n">only</span>
 <span class="o">-</span><span class="n">v</span><span class="o">|</span><span class="n">vv</span><span class="o">|</span><span class="n">vvv</span><span class="p">,</span> <span class="o">--</span><span class="n">verbose</span>  <span class="n">Increase</span> <span class="n">the</span> <span class="n">verbosity</span> <span class="n">of</span> <span class="n">messages</span><span class="p">:</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">normal</span> <span class="n">output</span><span class="p">,</span>
                       <span class="mi">2</span> <span class="k">for</span> <span class="n">more</span> <span class="n">verbose</span> <span class="n">output</span> <span class="ow">and</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">debug</span>

<span class="n">Available</span> <span class="n">commands</span><span class="p">:</span>
 <span class="n">check</span>                 <span class="n">check</span> <span class="n">dependencies</span> <span class="n">of</span> <span class="n">the</span> <span class="n">server</span>
                       <span class="n">environment</span>
 <span class="n">help</span>                  <span class="n">Displays</span> <span class="n">help</span> <span class="k">for</span> <span class="n">a</span> <span class="n">command</span>
 <span class="nb">list</span>                  <span class="n">Lists</span> <span class="n">commands</span>
 <span class="n">status</span>                <span class="n">show</span> <span class="n">some</span> <span class="n">status</span> <span class="n">information</span>
 <span class="n">upgrade</span>               <span class="n">run</span> <span class="n">upgrade</span> <span class="n">routines</span> <span class="n">after</span> <span class="n">installation</span> <span class="n">of</span>
                       <span class="n">a</span> <span class="n">new</span> <span class="n">release</span><span class="o">.</span> <span class="n">The</span> <span class="n">release</span> <span class="n">has</span> <span class="n">to</span> <span class="n">be</span>
                       <span class="n">installed</span> <span class="n">before</span><span class="o">.</span>
</pre></div>
</div>
<p>This is the same as <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">www-data</span> <span class="pre">php</span> <span class="pre">occ</span> <span class="pre">list</span></code>.
Run it with the <code class="docutils literal notranslate"><span class="pre">-h</span></code> option for syntax help:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="o">-</span><span class="n">h</span>
</pre></div>
</div>
<p>Display your ownCloud version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="o">-</span><span class="n">V</span>
  <span class="n">ownCloud</span> <span class="n">version</span> <span class="mf">9.0</span><span class="o">.</span><span class="mi">0</span>
</pre></div>
</div>
<p>Query your ownCloud server status:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">status</span>
  <span class="o">-</span> <span class="n">installed</span><span class="p">:</span> <span class="n">true</span>
  <span class="o">-</span> <span class="n">version</span><span class="p">:</span> <span class="mf">9.0</span><span class="o">.</span><span class="mf">0.19</span>
  <span class="o">-</span> <span class="n">versionstring</span><span class="p">:</span> <span class="mf">9.0</span><span class="o">.</span><span class="mi">0</span>
  <span class="o">-</span> <span class="n">edition</span><span class="p">:</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">occ</span></code> has <em>options</em>, <em>commands</em>, and <em>arguments</em>.
Commands are required.
Options are optional.
Arguments can be required <em>or</em> optional.
The, generic, syntax is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">occ</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="n">command</span> <span class="p">[</span><span class="n">arguments</span><span class="p">]</span>
</pre></div>
</div>
<p>Get detailed information on individual commands with the <code class="docutils literal notranslate"><span class="pre">help</span></code> command, like this example for the <code class="docutils literal notranslate"><span class="pre">maintenance:mode</span></code> command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">help</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">mode</span>
<span class="n">Usage</span><span class="p">:</span>
 <span class="n">maintenance</span><span class="p">:</span><span class="n">mode</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span>

<span class="n">Options</span><span class="p">:</span>
     <span class="o">--</span><span class="n">on</span>              <span class="n">enable</span> <span class="n">maintenance</span> <span class="n">mode</span>
     <span class="o">--</span><span class="n">off</span>             <span class="n">disable</span> <span class="n">maintenance</span> <span class="n">mode</span>
 <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">Display</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span>
 <span class="o">-</span><span class="n">q</span><span class="p">,</span> <span class="o">--</span><span class="n">quiet</span>           <span class="n">Do</span> <span class="ow">not</span> <span class="n">output</span> <span class="nb">any</span> <span class="n">message</span>
 <span class="o">-</span><span class="n">V</span><span class="p">,</span> <span class="o">--</span><span class="n">version</span>         <span class="n">Display</span> <span class="n">this</span> <span class="n">application</span> <span class="n">version</span>
     <span class="o">--</span><span class="n">ansi</span>            <span class="n">Force</span> <span class="n">ANSI</span> <span class="n">output</span>
     <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">ansi</span>         <span class="n">Disable</span> <span class="n">ANSI</span> <span class="n">output</span>
 <span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">interaction</span>  <span class="n">Do</span> <span class="ow">not</span> <span class="n">ask</span> <span class="nb">any</span> <span class="n">interactive</span> <span class="n">question</span>
     <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">warnings</span>     <span class="n">Skip</span> <span class="k">global</span> <span class="n">warnings</span><span class="p">,</span> <span class="n">show</span> <span class="n">command</span> <span class="n">output</span> <span class="n">only</span>
 <span class="o">-</span><span class="n">v</span><span class="o">|</span><span class="n">vv</span><span class="o">|</span><span class="n">vvv</span><span class="p">,</span> <span class="o">--</span><span class="n">verbose</span>  <span class="n">Increase</span> <span class="n">the</span> <span class="n">verbosity</span> <span class="n">of</span> <span class="n">messages</span><span class="p">:</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">normal</span> <span class="n">output</span><span class="p">,</span>
                       <span class="mi">2</span> <span class="k">for</span> <span class="n">more</span> <span class="n">verbose</span> <span class="n">output</span> <span class="ow">and</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">debug</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">status</span></code> command from above has an option to define the output format.
The default is plain text, but it can also be <code class="docutils literal notranslate"><span class="pre">json</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">status</span> <span class="o">--</span><span class="n">output</span><span class="o">=</span><span class="n">json</span>
<span class="p">{</span><span class="s2">&quot;installed&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span><span class="s2">&quot;version&quot;</span><span class="p">:</span><span class="s2">&quot;9.0.0.19&quot;</span><span class="p">,</span><span class="s2">&quot;versionstring&quot;</span><span class="p">:</span><span class="s2">&quot;9.0.0&quot;</span><span class="p">,</span><span class="s2">&quot;edition&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>or <code class="docutils literal notranslate"><span class="pre">json_pretty</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">status</span> <span class="o">--</span><span class="n">output</span><span class="o">=</span><span class="n">json_pretty</span>
<span class="p">{</span>
   <span class="s2">&quot;installed&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
   <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;9.0.0.19&quot;</span><span class="p">,</span>
   <span class="s2">&quot;versionstring&quot;</span><span class="p">:</span> <span class="s2">&quot;9.0.0&quot;</span><span class="p">,</span>
   <span class="s2">&quot;edition&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This output option is available on all list and list-like commands, which include <code class="docutils literal notranslate"><span class="pre">status</span></code>, <code class="docutils literal notranslate"><span class="pre">check</span></code>, <code class="docutils literal notranslate"><span class="pre">app:list</span></code>, <code class="docutils literal notranslate"><span class="pre">config:list</span></code>, <code class="docutils literal notranslate"><span class="pre">encryption:status</span></code> and <code class="docutils literal notranslate"><span class="pre">encryption:list-modules</span></code>.</p>
</div>
<div class="section" id="apps-commands">
<span id="apps-commands-label"></span><h2>Apps Commands<a class="headerlink" href="#apps-commands" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">app</span></code> commands list, enable, and disable apps</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">app</span>
 <span class="n">app</span><span class="p">:</span><span class="n">check</span><span class="o">-</span><span class="n">code</span>   <span class="n">check</span> <span class="n">code</span> <span class="n">to</span> <span class="n">be</span> <span class="n">compliant</span>
 <span class="n">app</span><span class="p">:</span><span class="n">disable</span>      <span class="n">disable</span> <span class="n">an</span> <span class="n">app</span>
 <span class="n">app</span><span class="p">:</span><span class="n">enable</span>       <span class="n">enable</span> <span class="n">an</span> <span class="n">app</span>
 <span class="n">app</span><span class="p">:</span><span class="n">getpath</span>      <span class="n">Get</span> <span class="n">an</span> <span class="n">absolute</span> <span class="n">path</span> <span class="n">to</span> <span class="n">the</span> <span class="n">app</span> <span class="n">directory</span>
 <span class="n">app</span><span class="p">:</span><span class="nb">list</span>         <span class="n">List</span> <span class="nb">all</span> <span class="n">available</span> <span class="n">apps</span>
</pre></div>
</div>
<p>List all of your installed apps or optionally provide a search pattern to restrict the list of apps to those whose name matches the given regular expression.
The output shows whether they are enabled or disabled</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">app</span><span class="p">:</span><span class="nb">list</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">search</span><span class="o">-</span><span class="n">pattern</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>Enable an app, for example the Market app</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">app</span><span class="p">:</span><span class="n">enable</span> <span class="n">market</span>
<span class="n">market</span> <span class="n">enabled</span>
</pre></div>
</div>
<p>Disable an app</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">app</span><span class="p">:</span><span class="n">disable</span> <span class="n">market</span>
<span class="n">market</span> <span class="n">disabled</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">app:check-code</span></code> has multiple checks: it checks if an app uses ownCloud’s public API (<code class="docutils literal notranslate"><span class="pre">OCP</span></code>) or private API (<code class="docutils literal notranslate"><span class="pre">OC_</span></code>), and it also checks for deprecated methods and the validity of the <code class="docutils literal notranslate"><span class="pre">info.xml</span></code> file.
By default all checks are enabled.
The Activity app is an example of a correctly-formatted app</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo -u www-data php occ app:check-code notifications
App is compliant - awesome job!
</pre></div>
</div>
<p>If your app has issues, you’ll see output like this</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">app</span><span class="p">:</span><span class="n">check</span><span class="o">-</span><span class="n">code</span> <span class="n">foo_app</span>
<span class="n">Analysing</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">owncloud</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">foo_app</span><span class="o">.</span><span class="n">php</span>
<span class="mi">4</span> <span class="n">errors</span>
   <span class="n">line</span>   <span class="mi">45</span><span class="p">:</span> <span class="n">OCP</span>\<span class="n">Response</span> <span class="o">-</span> <span class="n">Static</span> <span class="n">method</span> <span class="n">of</span> <span class="n">deprecated</span> <span class="k">class</span> <span class="nc">must</span> <span class="ow">not</span> <span class="n">be</span>
   <span class="n">called</span>
   <span class="n">line</span>   <span class="mi">46</span><span class="p">:</span> <span class="n">OCP</span>\<span class="n">Response</span> <span class="o">-</span> <span class="n">Static</span> <span class="n">method</span> <span class="n">of</span> <span class="n">deprecated</span> <span class="k">class</span> <span class="nc">must</span> <span class="ow">not</span> <span class="n">be</span>
   <span class="n">called</span>
   <span class="n">line</span>   <span class="mi">47</span><span class="p">:</span> <span class="n">OCP</span>\<span class="n">Response</span> <span class="o">-</span> <span class="n">Static</span> <span class="n">method</span> <span class="n">of</span> <span class="n">deprecated</span> <span class="k">class</span> <span class="nc">must</span> <span class="ow">not</span> <span class="n">be</span>
   <span class="n">called</span>
   <span class="n">line</span>   <span class="mi">49</span><span class="p">:</span> <span class="n">OC_Util</span> <span class="o">-</span> <span class="n">Static</span> <span class="n">method</span> <span class="n">of</span> <span class="n">private</span> <span class="k">class</span> <span class="nc">must</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">called</span>
</pre></div>
</div>
<p>You can get the full file path to an app</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">app</span><span class="p">:</span><span class="n">getpath</span> <span class="n">notifications</span>
<span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">owncloud</span><span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">notifications</span>
</pre></div>
</div>
</div>
<div class="section" id="background-jobs-selector">
<span id="background-jobs-selector-label"></span><h2>Background Jobs Selector<a class="headerlink" href="#background-jobs-selector" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">background</span></code> command to select which scheduler you want to use for controlling <em>background jobs</em>, <em>Ajax</em>, <em>Webcron</em>, or <em>Cron</em>.
This is the same as using the <strong>Cron</strong> section on your ownCloud Admin page.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">background</span>
 <span class="n">background</span><span class="p">:</span><span class="n">ajax</span>       <span class="n">Use</span> <span class="n">ajax</span> <span class="n">to</span> <span class="n">run</span> <span class="n">background</span> <span class="n">jobs</span>
 <span class="n">background</span><span class="p">:</span><span class="n">cron</span>       <span class="n">Use</span> <span class="n">cron</span> <span class="n">to</span> <span class="n">run</span> <span class="n">background</span> <span class="n">jobs</span>
 <span class="n">background</span><span class="p">:</span><span class="n">webcron</span>    <span class="n">Use</span> <span class="n">webcron</span> <span class="n">to</span> <span class="n">run</span> <span class="n">background</span> <span class="n">jobs</span>
</pre></div>
</div>
<p>This example selects Ajax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">background</span><span class="p">:</span><span class="n">ajax</span>
  <span class="n">Set</span> <span class="n">mode</span> <span class="k">for</span> <span class="n">background</span> <span class="n">jobs</span> <span class="n">to</span> <span class="s1">&#39;ajax&#39;</span>
</pre></div>
</div>
<p>The other two commands are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">background:cron</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">background:webcron</span></code></li>
</ul>
<p>See <a class="reference internal" href="background_jobs_configuration.html"><span class="doc">Background Jobs</span></a> to learn more.</p>
</div>
<div class="section" id="config-commands">
<span id="config-commands-label"></span><h2>Config Commands<a class="headerlink" href="#config-commands" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">config</span></code> commands are used to configure the ownCloud server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">config</span>
 <span class="n">config</span><span class="p">:</span><span class="n">app</span><span class="p">:</span><span class="n">delete</span>      <span class="n">Delete</span> <span class="n">an</span> <span class="n">app</span> <span class="n">config</span> <span class="n">value</span>
 <span class="n">config</span><span class="p">:</span><span class="n">app</span><span class="p">:</span><span class="n">get</span>         <span class="n">Get</span> <span class="n">an</span> <span class="n">app</span> <span class="n">config</span> <span class="n">value</span>
 <span class="n">config</span><span class="p">:</span><span class="n">app</span><span class="p">:</span><span class="nb">set</span>         <span class="n">Set</span> <span class="n">an</span> <span class="n">app</span> <span class="n">config</span> <span class="n">value</span>
 <span class="n">config</span><span class="p">:</span><span class="kn">import</span>          <span class="nn">Import</span> <span class="n">a</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">configuration</span> <span class="n">settings</span>
 <span class="n">config</span><span class="p">:</span><span class="nb">list</span>            <span class="n">List</span> <span class="nb">all</span> <span class="n">configuration</span> <span class="n">settings</span>
 <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="n">delete</span>   <span class="n">Delete</span> <span class="n">a</span> <span class="n">system</span> <span class="n">config</span> <span class="n">value</span>
 <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="n">get</span>      <span class="n">Get</span> <span class="n">a</span> <span class="n">system</span> <span class="n">config</span> <span class="n">value</span>
 <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="nb">set</span>      <span class="n">Set</span> <span class="n">a</span> <span class="n">system</span> <span class="n">config</span> <span class="n">value</span>
</pre></div>
</div>
<p>You can list all configuration values with one command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="nb">list</span>
</pre></div>
</div>
<p>By default, passwords and other sensitive data are omitted from the report, so the output can be posted publicly (e.g., as part of a bug report).
In order to generate a full backport of all configuration values the <code class="docutils literal notranslate"><span class="pre">--private</span></code> flag needs to be set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="nb">list</span> <span class="o">--</span><span class="n">private</span>
</pre></div>
</div>
<p>The exported content can also be imported again to allow the fast setup of similar instances.
The import command will only add or update values.
Values that exist in the current configuration, but not in the one that is being imported are left untouched.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="kn">import</span> <span class="nn">filename.json</span>
</pre></div>
</div>
<p>It is also possible to import remote files, by piping the input:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="kn">import</span> <span class="o">&lt;</span> <span class="n">local</span><span class="o">-</span><span class="n">backup</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While it is possible to update/set/delete the versions and installation
statuses of apps and ownCloud itself, it is <strong>not</strong> recommended to do this
directly. Use the <code class="docutils literal notranslate"><span class="pre">occ</span> <span class="pre">app:enable</span></code>, <code class="docutils literal notranslate"><span class="pre">occ</span> <span class="pre">app:disable</span></code> and <code class="docutils literal notranslate"><span class="pre">occ</span> <span class="pre">update</span></code>
commands instead.</p>
</div>
<div class="section" id="getting-a-single-configuration-value">
<h3>Getting a Single Configuration Value<a class="headerlink" href="#getting-a-single-configuration-value" title="Permalink to this headline">¶</a></h3>
<p>These commands get the value of a single app or system configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="n">get</span> <span class="n">version</span>
<span class="mf">9.0</span><span class="o">.</span><span class="mf">0.19</span>

<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">app</span><span class="p">:</span><span class="n">get</span> <span class="n">activity</span> <span class="n">installed_version</span>
<span class="mf">2.2</span><span class="o">.</span><span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-a-single-configuration-value">
<h3>Setting a Single Configuration Value<a class="headerlink" href="#setting-a-single-configuration-value" title="Permalink to this headline">¶</a></h3>
<p>These commands set the value of a single app or system configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="nb">set</span> <span class="n">logtimezone</span>
<span class="o">--</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;Europe/Berlin&quot;</span>
<span class="n">System</span> <span class="n">config</span> <span class="n">value</span> <span class="n">logtimezone</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">Europe</span><span class="o">/</span><span class="n">Berlin</span>

<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">app</span><span class="p">:</span><span class="nb">set</span> <span class="n">files_sharing</span>
<span class="n">incoming_server2server_share_enabled</span> <span class="o">--</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span> <span class="o">--</span><span class="nb">type</span><span class="o">=</span><span class="n">boolean</span>
<span class="n">Config</span> <span class="n">value</span> <span class="n">incoming_server2server_share_enabled</span> <span class="k">for</span> <span class="n">app</span> <span class="n">files_sharing</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">yes</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">config:system:set</span></code> command creates the value, if it does not already exist.
To update an existing value,  set <code class="docutils literal notranslate"><span class="pre">--update-only</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="nb">set</span> <span class="n">doesnotexist</span> <span class="o">--</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
<span class="o">--</span><span class="nb">type</span><span class="o">=</span><span class="n">boolean</span> <span class="o">--</span><span class="n">update</span><span class="o">-</span><span class="n">only</span>
<span class="n">Value</span> <span class="ow">not</span> <span class="n">updated</span><span class="p">,</span> <span class="k">as</span> <span class="n">it</span> <span class="n">has</span> <span class="ow">not</span> <span class="n">been</span> <span class="nb">set</span> <span class="n">before</span><span class="o">.</span>
</pre></div>
</div>
<p>Note that in order to write a Boolean, float, or integer value to the configuration file, you need to specify the type on your command.
This applies only to the <code class="docutils literal notranslate"><span class="pre">config:system:set</span></code> command. The following values are known:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">boolean</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">integer</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">float</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">string</span></code> (default)</li>
</ul>
<p>When you want to e.g., disable the maintenance mode run the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="nb">set</span> <span class="n">maintenance</span> <span class="o">--</span><span class="n">value</span><span class="o">=</span><span class="n">false</span>
<span class="o">--</span><span class="nb">type</span><span class="o">=</span><span class="n">boolean</span>
<span class="n">ownCloud</span> <span class="ow">is</span> <span class="ow">in</span> <span class="n">maintenance</span> <span class="n">mode</span> <span class="o">-</span> <span class="n">no</span> <span class="n">app</span> <span class="n">have</span> <span class="n">been</span> <span class="n">loaded</span>
<span class="n">System</span> <span class="n">config</span> <span class="n">value</span> <span class="n">maintenance</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">boolean</span> <span class="n">false</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-an-array-of-configuration-values">
<h3>Setting an Array of Configuration Values<a class="headerlink" href="#setting-an-array-of-configuration-values" title="Permalink to this headline">¶</a></h3>
<p>Some configurations (e.g., the trusted domain setting) are an array of data.
In order to set (and also get) the value of one key, you can specify multiple <code class="docutils literal notranslate"><span class="pre">config</span></code> names separated by spaces:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="n">get</span> <span class="n">trusted_domains</span>
<span class="n">localhost</span>
<span class="n">owncloud</span><span class="o">.</span><span class="n">local</span>
<span class="n">sample</span><span class="o">.</span><span class="n">tld</span>
</pre></div>
</div>
<p>To replace <code class="docutils literal notranslate"><span class="pre">sample.tld</span></code> with <code class="docutils literal notranslate"><span class="pre">example.com</span></code> trusted_domains =&gt; 2 needs to be set:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="nb">set</span> <span class="n">trusted_domains</span> <span class="mi">2</span>
<span class="o">--</span><span class="n">value</span><span class="o">=</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">System</span> <span class="n">config</span> <span class="n">value</span> <span class="n">trusted_domains</span> <span class="o">=&gt;</span> <span class="mi">2</span> <span class="nb">set</span> <span class="n">to</span> <span class="n">string</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>

<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="n">get</span> <span class="n">trusted_domains</span>
<span class="n">localhost</span>
<span class="n">owncloud</span><span class="o">.</span><span class="n">local</span>
<span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
</div>
<div class="section" id="deleting-a-single-configuration-value">
<h3>Deleting a Single Configuration Value<a class="headerlink" href="#deleting-a-single-configuration-value" title="Permalink to this headline">¶</a></h3>
<p>These commands delete the configuration of an app or system configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="n">delete</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">mode</span>
<span class="n">System</span> <span class="n">config</span> <span class="n">value</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">mode</span> <span class="n">deleted</span>

<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">app</span><span class="p">:</span><span class="n">delete</span> <span class="n">appname</span> <span class="n">provisioning_api</span>
<span class="n">Config</span> <span class="n">value</span> <span class="n">provisioning_api</span> <span class="n">of</span> <span class="n">app</span> <span class="n">appname</span> <span class="n">deleted</span>
</pre></div>
</div>
<p>The delete command will by default not complain if the configuration was not set before.
If you want to be notified in that case, set the <code class="docutils literal notranslate"><span class="pre">--error-if-not-exists</span></code> flag.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">system</span><span class="p">:</span><span class="n">delete</span> <span class="n">doesnotexist</span>
<span class="o">--</span><span class="n">error</span><span class="o">-</span><span class="k">if</span><span class="o">-</span><span class="ow">not</span><span class="o">-</span><span class="n">exists</span>
<span class="n">Config</span> <span class="n">provisioning_api</span> <span class="n">of</span> <span class="n">app</span> <span class="n">appname</span> <span class="n">could</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">deleted</span> <span class="n">because</span> <span class="n">it</span> <span class="n">did</span> <span class="ow">not</span>
<span class="n">exist</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="dav-commands">
<span id="dav-label"></span><h2>Dav Commands<a class="headerlink" href="#dav-commands" title="Permalink to this headline">¶</a></h2>
<p>A set of commands to create address books, calendars, and to migrate address books:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dav</span>
 <span class="n">dav</span><span class="p">:</span><span class="n">cleanup</span><span class="o">-</span><span class="n">chunks</span>            <span class="n">Cleanup</span> <span class="n">outdated</span> <span class="n">chunks</span>
 <span class="n">dav</span><span class="p">:</span><span class="n">create</span><span class="o">-</span><span class="n">addressbook</span>        <span class="n">Create</span> <span class="n">a</span> <span class="n">dav</span> <span class="n">address</span> <span class="n">book</span>
 <span class="n">dav</span><span class="p">:</span><span class="n">create</span><span class="o">-</span><span class="n">calendar</span>           <span class="n">Create</span> <span class="n">a</span> <span class="n">dav</span> <span class="n">calendar</span>
 <span class="n">dav</span><span class="p">:</span><span class="n">sync</span><span class="o">-</span><span class="n">birthday</span><span class="o">-</span><span class="n">calendar</span>    <span class="n">Synchronizes</span> <span class="n">the</span> <span class="n">birthday</span> <span class="n">calendar</span>
 <span class="n">dav</span><span class="p">:</span><span class="n">sync</span><span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">addressbook</span>   <span class="n">Synchronizes</span> <span class="n">users</span> <span class="n">to</span> <span class="n">the</span> <span class="n">system</span>
                               <span class="n">address</span> <span class="n">book</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands are not available in <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user (maintenance) mode</span></a>.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">dav:cleanup-chunks</span></code> cleans up outdated chunks (uploaded files) more than a certain number of days old.
By default, the command cleans up chunks more than 2 days old.
However, by supplying the number of days to the command, the range can be increased.
For example, in the example below, chunks older than 10 days will be removed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">dav</span><span class="p">:</span><span class="n">cleanup</span><span class="o">-</span><span class="n">chunks</span> <span class="mi">10</span>

<span class="c1"># example output</span>
<span class="n">Cleaning</span> <span class="n">chunks</span> <span class="n">older</span> <span class="n">than</span> <span class="mi">10</span> <span class="n">days</span><span class="p">(</span><span class="mi">2017</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">08</span><span class="n">T13</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span><span class="mi">45</span><span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">)</span>
<span class="n">Cleaning</span> <span class="n">chunks</span> <span class="k">for</span> <span class="n">admin</span>
   <span class="mi">0</span> <span class="p">[</span><span class="o">&gt;---------------------------</span><span class="p">]</span>
</pre></div>
</div>
<p>The syntax for <code class="docutils literal notranslate"><span class="pre">dav:create-addressbook</span></code> and  <code class="docutils literal notranslate"><span class="pre">dav:create-calendar</span></code> is
<code class="docutils literal notranslate"><span class="pre">dav:create-addressbook</span> <span class="pre">[user]</span> <span class="pre">[name]</span></code>. This example creates the addressbook
<code class="docutils literal notranslate"><span class="pre">mollybook</span></code> for the user molly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">dav</span><span class="p">:</span><span class="n">create</span><span class="o">-</span><span class="n">addressbook</span> <span class="n">molly</span> <span class="n">mollybook</span>
</pre></div>
</div>
<p>This example creates a new calendar for molly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">dav</span><span class="p">:</span><span class="n">create</span><span class="o">-</span><span class="n">calendar</span> <span class="n">molly</span> <span class="n">mollycal</span>
</pre></div>
</div>
<p>Molly will immediately see these on her Calendar and Contacts pages.
Your existing calendars and contacts should migrate automatically when you upgrade.
If something goes wrong you can try a manual migration.
First delete any partially-migrated calendars or address books.
Then run this command to migrate user’s contacts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">dav</span><span class="p">:</span><span class="n">migrate</span><span class="o">-</span><span class="n">addressbooks</span> <span class="p">[</span><span class="n">user</span><span class="p">]</span>
</pre></div>
</div>
<p>Run this command to migrate calendars:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">dav</span><span class="p">:</span><span class="n">migrate</span><span class="o">-</span><span class="n">calendars</span> <span class="p">[</span><span class="n">user</span><span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">dav:sync-birthday-calendar</span></code> adds all birthdays to your calendar from address books shared with you.
This example syncs to your calendar from user <code class="docutils literal notranslate"><span class="pre">bernie</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">dav</span><span class="p">:</span><span class="n">sync</span><span class="o">-</span><span class="n">birthday</span><span class="o">-</span><span class="n">calendar</span> <span class="n">bernie</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">dav:sync-system-addressbook</span></code> synchronizes all users to the system addressbook.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">dav</span><span class="p">:</span><span class="n">sync</span><span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">addressbook</span>
</pre></div>
</div>
</div>
<div class="section" id="database-conversion">
<span id="database-conversion-label"></span><h2>Database Conversion<a class="headerlink" href="#database-conversion" title="Permalink to this headline">¶</a></h2>
<p>The SQLite database is good for testing, and for ownCloud servers with small single-user workloads that do not use sync clients, but production servers with multiple users should use MariaDB, MySQL, or PostgreSQL.
You can use <code class="docutils literal notranslate"><span class="pre">occ</span></code> to convert from SQLite to one of these other databases.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">db</span>
 <span class="n">db</span><span class="p">:</span><span class="n">convert</span><span class="o">-</span><span class="nb">type</span>           <span class="n">Convert</span> <span class="n">the</span> <span class="n">ownCloud</span> <span class="n">database</span> <span class="n">to</span> <span class="n">the</span> <span class="n">newly</span>
                           <span class="n">configured</span> <span class="n">one</span>
 <span class="n">db</span><span class="p">:</span><span class="n">generate</span><span class="o">-</span><span class="n">change</span><span class="o">-</span><span class="n">script</span> <span class="n">generates</span> <span class="n">the</span> <span class="n">change</span> <span class="n">script</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">current</span>
                           <span class="n">connected</span> <span class="n">db</span> <span class="n">to</span> <span class="n">db_structure</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
<p>You need:</p>
<ul class="simple">
<li>Your desired database and its PHP connector installed.</li>
<li>The login and password of a database admin user.</li>
<li>The database port number, if it is a non-standard port.</li>
</ul>
<p>This is example converts SQLite to MySQL/MariaDB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">db</span><span class="p">:</span><span class="n">convert</span><span class="o">-</span><span class="nb">type</span> <span class="n">mysql</span> <span class="n">oc_dbuser</span> <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span>
<span class="n">oc_database</span>
</pre></div>
</div>
<p>For a more detailed explanation see <a class="reference internal" href="../database/db_conversion.html"><span class="doc">Converting Database Type</span></a>.</p>
</div>
<div class="section" id="encryption">
<span id="encryption-label"></span><h2>Encryption<a class="headerlink" href="#encryption" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">occ</span></code> includes a complete set of commands for managing encryption.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">encryption</span>
 <span class="n">encryption</span><span class="p">:</span><span class="n">change</span><span class="o">-</span><span class="n">key</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">root</span>  <span class="n">Change</span> <span class="n">key</span> <span class="n">storage</span> <span class="n">root</span>
 <span class="n">encryption</span><span class="p">:</span><span class="n">decrypt</span><span class="o">-</span><span class="nb">all</span>              <span class="n">Disable</span> <span class="n">server</span><span class="o">-</span><span class="n">side</span> <span class="n">encryption</span> <span class="ow">and</span> <span class="n">decrypt</span> <span class="nb">all</span> <span class="n">files</span>
 <span class="n">encryption</span><span class="p">:</span><span class="n">disable</span>                  <span class="n">Disable</span> <span class="n">encryption</span>
 <span class="n">encryption</span><span class="p">:</span><span class="n">enable</span>                   <span class="n">Enable</span> <span class="n">encryption</span>
 <span class="n">encryption</span><span class="p">:</span><span class="n">encrypt</span><span class="o">-</span><span class="nb">all</span>              <span class="n">Encrypt</span> <span class="nb">all</span> <span class="n">files</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">users</span>
 <span class="n">encryption</span><span class="p">:</span><span class="nb">list</span><span class="o">-</span><span class="n">modules</span>             <span class="n">List</span> <span class="nb">all</span> <span class="n">available</span> <span class="n">encryption</span> <span class="n">modules</span>
 <span class="n">encryption</span><span class="p">:</span><span class="n">migrate</span>                  <span class="n">initial</span> <span class="n">migration</span> <span class="n">to</span> <span class="n">encryption</span> <span class="mf">2.0</span>
 <span class="n">encryption</span><span class="p">:</span><span class="n">recreate</span><span class="o">-</span><span class="n">master</span><span class="o">-</span><span class="n">key</span>      <span class="n">Replace</span> <span class="n">existing</span> <span class="n">master</span> <span class="n">key</span> <span class="k">with</span> <span class="n">new</span> <span class="n">one</span><span class="o">.</span> <span class="n">Encrypt</span> <span class="n">the</span> <span class="n">file</span> <span class="n">system</span> <span class="k">with</span>
                                     <span class="n">newly</span> <span class="n">created</span> <span class="n">master</span> <span class="n">key</span>
 <span class="n">encryption</span><span class="p">:</span><span class="n">select</span><span class="o">-</span><span class="n">encryption</span><span class="o">-</span><span class="nb">type</span>   <span class="n">Select</span> <span class="n">the</span> <span class="n">encryption</span> <span class="nb">type</span><span class="o">.</span> <span class="n">The</span> <span class="n">encryption</span> <span class="n">types</span> <span class="n">available</span> <span class="n">are</span><span class="p">:</span> <span class="n">masterkey</span> <span class="ow">and</span>
                                     <span class="n">user</span><span class="o">-</span><span class="n">keys</span><span class="o">.</span> <span class="n">There</span> <span class="ow">is</span> <span class="n">also</span> <span class="n">no</span> <span class="n">way</span> <span class="n">to</span> <span class="n">disable</span> <span class="n">it</span> <span class="n">again</span><span class="o">.</span>
 <span class="n">encryption</span><span class="p">:</span><span class="nb">set</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">module</span>       <span class="n">Set</span> <span class="n">the</span> <span class="n">encryption</span> <span class="n">default</span> <span class="n">module</span>
 <span class="n">encryption</span><span class="p">:</span><span class="n">show</span><span class="o">-</span><span class="n">key</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">root</span>    <span class="n">Show</span> <span class="n">current</span> <span class="n">key</span> <span class="n">storage</span> <span class="n">root</span>
 <span class="n">encryption</span><span class="p">:</span><span class="n">status</span>                   <span class="n">Lists</span> <span class="n">the</span> <span class="n">current</span> <span class="n">status</span> <span class="n">of</span> <span class="n">encryption</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">encryption:status</span></code> shows whether you have active encryption, and your default encryption module.
To enable encryption you must first enable the Encryption app, and then run <code class="docutils literal notranslate"><span class="pre">encryption:enable</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">app</span><span class="p">:</span><span class="n">enable</span> <span class="n">encryption</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">encryption</span><span class="p">:</span><span class="n">enable</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">encryption</span><span class="p">:</span><span class="n">status</span>
 <span class="o">-</span> <span class="n">enabled</span><span class="p">:</span> <span class="n">true</span>
 <span class="o">-</span> <span class="n">defaultModule</span><span class="p">:</span> <span class="n">OC_DEFAULT_MODULE</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">encryption:change-key-storage-root</span></code> is for moving your encryption keys to a different folder.
It takes one argument, <code class="docutils literal notranslate"><span class="pre">newRoot</span></code>, which defines your new root folder.
The folder must exist, and the path is relative to your root ownCloud directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">encryption</span><span class="p">:</span><span class="n">change</span><span class="o">-</span><span class="n">key</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">root</span> <span class="o">../../</span><span class="n">etc</span><span class="o">/</span><span class="n">oc</span><span class="o">-</span><span class="n">keys</span>
</pre></div>
</div>
<p>You can see the current location of your keys folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">encryption</span><span class="p">:</span><span class="n">show</span><span class="o">-</span><span class="n">key</span><span class="o">-</span><span class="n">storage</span><span class="o">-</span><span class="n">root</span>
<span class="n">Current</span> <span class="n">key</span> <span class="n">storage</span> <span class="n">root</span><span class="p">:</span>  <span class="n">default</span> <span class="n">storage</span> <span class="n">location</span> <span class="p">(</span><span class="n">data</span><span class="o">/</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">encryption:list-modules</span></code> displays your available encryption modules.
You will see a list of modules only if you have enabled the Encryption app.
Use <code class="docutils literal notranslate"><span class="pre">encryption:set-default-module</span> <span class="pre">[module</span> <span class="pre">name]</span></code> to set your desired module.</p>
<p><code class="docutils literal notranslate"><span class="pre">encryption:encrypt-all</span></code> encrypts all data files for all users.
You must first put your ownCloud server into <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user mode</span></a> to prevent any user activity until encryption is completed.</p>
<p><code class="docutils literal notranslate"><span class="pre">encryption:decrypt-all</span></code> decrypts all user data files, or optionally a single user:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">encryption</span><span class="p">:</span><span class="n">decrypt</span> <span class="n">freda</span>
</pre></div>
</div>
<p>Users must have enabled recovery keys on their Personal pages.
You must first put your ownCloud server into <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user mode</span></a> to prevent any user activity until decryption is completed.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">encryption:disable</span></code> to disable your encryption module.
You must first put your ownCloud server into <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user mode</span></a> to prevent any user activity.</p>
<p><code class="docutils literal notranslate"><span class="pre">encryption:migrate</span></code> migrates encryption keys after a major ownCloud version upgrade.
You may optionally specify individual users in a space-delimited list.
See <a class="reference internal" href="../files/encryption_configuration.html"><span class="doc">Encryption Configuration</span></a> to learn more.</p>
<p><code class="docutils literal notranslate"><span class="pre">encryption:recreate-master-key</span></code> decrypts the ownCloud file system, replaces the existing master key with a new one, and encrypts the entire ownCloud file system with the new master key. Given the size of your ownCloud filesystem, this may take some time to complete. However, if your filesystem is quite small, then it will complete quite quickly. The <code class="docutils literal notranslate"><span class="pre">-y</span></code> switch can be supplied to automate acceptance of user input.</p>
</div>
<div class="section" id="federation-sync">
<span id="federation-sync-label"></span><h2>Federation Sync<a class="headerlink" href="#federation-sync" title="Permalink to this headline">¶</a></h2>
<p>Synchronize the address books of all federated ownCloud servers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">federation</span><span class="p">:</span><span class="n">sync</span><span class="o">-</span><span class="n">addressbooks</span>  <span class="n">Synchronizes</span> <span class="n">address</span> <span class="n">books</span> <span class="n">of</span> <span class="nb">all</span>
                              <span class="n">federated</span> <span class="n">clouds</span>
</pre></div>
</div>
<p>Servers connected with federation shares can share user address books, and auto-complete usernames in share dialogs.
Use this command to synchronize federated servers:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">federation</span><span class="p">:</span><span class="n">sync</span><span class="o">-</span><span class="n">addressbooks</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command is only available when the “Federation” app (<code class="docutils literal notranslate"><span class="pre">federation</span></code>) is enabled.</p>
</div>
</div>
<div class="section" id="file-operations">
<span id="file-operations-label"></span><h2>File Operations<a class="headerlink" href="#file-operations" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">occ</span></code> has three commands for managing files in ownCloud:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">files</span>
 <span class="n">files</span><span class="p">:</span><span class="n">cleanup</span>              <span class="n">Deletes</span> <span class="n">orphaned</span> <span class="n">file</span> <span class="n">cache</span> <span class="n">entries</span><span class="o">.</span>
 <span class="n">files</span><span class="p">:</span><span class="n">scan</span>                 <span class="n">Rescans</span> <span class="n">the</span> <span class="n">filesystem</span><span class="o">.</span>
 <span class="n">files</span><span class="p">:</span><span class="n">transfer</span><span class="o">-</span><span class="n">ownership</span>   <span class="n">All</span> <span class="n">files</span> <span class="ow">and</span> <span class="n">folders</span> <span class="n">are</span> <span class="n">moved</span> <span class="n">to</span> <span class="n">another</span>
                            <span class="n">user</span> <span class="o">-</span> <span class="n">outgoing</span> <span class="n">shares</span> <span class="n">are</span> <span class="n">moved</span> <span class="k">as</span> <span class="n">well</span> <span class="p">(</span><span class="n">incoming</span> <span class="n">shares</span> <span class="n">are</span> <span class="ow">not</span> <span class="n">moved</span> <span class="k">as</span> <span class="n">the</span> <span class="n">sharing</span> <span class="n">user</span> <span class="n">holds</span> <span class="n">the</span> <span class="n">ownership</span> <span class="n">of</span> <span class="n">the</span> <span class="n">respective</span> <span class="n">files</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands are not available in <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user (maintenance) mode</span></a>.</p>
</div>
<div class="section" id="the-files-cleanup-command">
<h3>The files:cleanup command<a class="headerlink" href="#the-files-cleanup-command" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">files:cleanup</span></code> tidies up the server’s file cache by deleting all file entries that have no matching entries in the storage table.</p>
</div>
<div class="section" id="the-files-scan-command">
<h3>The files:scan command<a class="headerlink" href="#the-files-scan-command" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">files:scan</span></code> command</p>
<ul class="simple">
<li>Scans for new files.</li>
<li>Scans not fully scanned files.</li>
<li>Repairs file cache holes.</li>
<li>Updates the file cache.</li>
</ul>
<p>File scans can be performed per-user, for a space-delimited list of users, and for all users.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">files</span><span class="p">:</span><span class="n">scan</span> <span class="o">--</span><span class="n">help</span>
 <span class="n">Usage</span><span class="p">:</span>
   <span class="n">files</span><span class="p">:</span><span class="n">scan</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">user_id</span><span class="o">&gt;</span><span class="p">]</span><span class="o">...</span>

 <span class="n">Arguments</span><span class="p">:</span>
   <span class="n">user_id</span>                <span class="n">will</span> <span class="n">rescan</span> <span class="nb">all</span> <span class="n">files</span> <span class="n">of</span> <span class="n">the</span> <span class="n">given</span> <span class="n">user</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

 <span class="n">Options</span><span class="p">:</span>
       <span class="o">--</span><span class="n">output</span><span class="p">[</span><span class="o">=</span><span class="n">OUTPUT</span><span class="p">]</span>  <span class="n">Output</span> <span class="nb">format</span> <span class="p">(</span><span class="n">plain</span><span class="p">,</span> <span class="n">json</span> <span class="ow">or</span> <span class="n">json_pretty</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">plain</span><span class="p">)</span> <span class="p">[</span><span class="n">default</span><span class="p">:</span> <span class="s2">&quot;plain&quot;</span><span class="p">]</span>
   <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="o">--</span><span class="n">path</span><span class="o">=</span><span class="n">PATH</span>        <span class="n">limit</span> <span class="n">rescan</span> <span class="n">to</span> <span class="n">this</span> <span class="n">path</span><span class="p">,</span> <span class="n">eg</span><span class="o">.</span> <span class="o">--</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/alice/files/Music&quot;</span><span class="p">,</span> <span class="n">the</span> <span class="n">user_id</span> <span class="ow">is</span> <span class="n">determined</span> <span class="n">by</span> <span class="n">the</span> <span class="n">path</span> <span class="ow">and</span> <span class="n">the</span> <span class="n">user_id</span> <span class="n">parameter</span> <span class="ow">and</span> <span class="o">--</span><span class="nb">all</span> <span class="n">are</span> <span class="n">ignored</span>
   <span class="o">-</span><span class="n">q</span><span class="p">,</span> <span class="o">--</span><span class="n">quiet</span>            <span class="n">Do</span> <span class="ow">not</span> <span class="n">output</span> <span class="nb">any</span> <span class="n">message</span>
       <span class="o">--</span><span class="nb">all</span>              <span class="n">will</span> <span class="n">rescan</span> <span class="nb">all</span> <span class="n">files</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">known</span> <span class="n">users</span>
       <span class="o">--</span><span class="n">repair</span>           <span class="n">will</span> <span class="n">repair</span> <span class="n">detached</span> <span class="n">filecache</span> <span class="n">entries</span> <span class="p">(</span><span class="n">slow</span><span class="p">)</span>
       <span class="o">--</span><span class="n">unscanned</span>        <span class="n">only</span> <span class="n">scan</span> <span class="n">files</span> <span class="n">which</span> <span class="n">are</span> <span class="n">marked</span> <span class="k">as</span> <span class="ow">not</span> <span class="n">fully</span> <span class="n">scanned</span>
   <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>             <span class="n">Display</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span>
   <span class="o">-</span><span class="n">V</span><span class="p">,</span> <span class="o">--</span><span class="n">version</span>          <span class="n">Display</span> <span class="n">this</span> <span class="n">application</span> <span class="n">version</span>
       <span class="o">--</span><span class="n">ansi</span>             <span class="n">Force</span> <span class="n">ANSI</span> <span class="n">output</span>
       <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">ansi</span>          <span class="n">Disable</span> <span class="n">ANSI</span> <span class="n">output</span>
   <span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">interaction</span>   <span class="n">Do</span> <span class="ow">not</span> <span class="n">ask</span> <span class="nb">any</span> <span class="n">interactive</span> <span class="n">question</span>
       <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">warnings</span>      <span class="n">Skip</span> <span class="k">global</span> <span class="n">warnings</span><span class="p">,</span> <span class="n">show</span> <span class="n">command</span> <span class="n">output</span> <span class="n">only</span>
   <span class="o">-</span><span class="n">v</span><span class="o">|</span><span class="n">vv</span><span class="o">|</span><span class="n">vvv</span><span class="p">,</span> <span class="o">--</span><span class="n">verbose</span>   <span class="n">Increase</span> <span class="n">the</span> <span class="n">verbosity</span> <span class="n">of</span> <span class="n">messages</span><span class="p">:</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">normal</span> <span class="n">output</span><span class="p">,</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">more</span> <span class="n">verbose</span> <span class="n">output</span> <span class="ow">and</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">debug</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If not using <code class="docutils literal notranslate"><span class="pre">--quiet</span></code>, statistics will be shown at the end of the scan.</p>
</div>
<div class="section" id="the-path-option">
<h4>The <code class="docutils literal notranslate"><span class="pre">--path</span></code> Option<a class="headerlink" href="#the-path-option" title="Permalink to this headline">¶</a></h4>
<p>When using the <code class="docutils literal notranslate"><span class="pre">--path</span></code> option, the path must be in one of the following formats:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;user_id/files/path&quot;</span>
<span class="s2">&quot;user_id/files/mount_name&quot;</span>
<span class="s2">&quot;user_id/files/mount_name/path&quot;</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;/alice/files/Music&quot;</span>
</pre></div>
</div>
<p>In the example above, the user_id <code class="docutils literal notranslate"><span class="pre">alice</span></code> is determined implicitly from the path component given.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Mounts are only scannable at the point of origin. Scanning of shares including federated shares
is not necessary on the receiver side and therefore not possible.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">--path</span></code>, <code class="docutils literal notranslate"><span class="pre">--all</span></code> and <code class="docutils literal notranslate"><span class="pre">[user_id]</span></code> parameters are exclusive - only one must be specified.</p>
</div>
<div class="section" id="the-repair-option">
<h4>The <code class="docutils literal notranslate"><span class="pre">--repair</span></code> Option<a class="headerlink" href="#the-repair-option" title="Permalink to this headline">¶</a></h4>
<p>As noted above, repairs can be performed for individual users, groups of users, and for all users in an ownCloud installation.
What’s more, repair scans can be run even if no files are known to need repairing and if one or more files are known to be in need of repair.
Two examples of when files need repairing are:</p>
<ul class="simple">
<li>If folders have the same entry twice in the web UI (known as a “<em>ghost folder</em>”), this can also lead to strange error messages in the desktop client.</li>
<li>If entering a folder doesn’t seem to lead into that folder.</li>
</ul>
<p>The repair command needs to be run in single user mode.
The following commands show how to enable single user mode, run a repair file scan, and then disable single user mode.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">singleuser</span> <span class="o">--</span><span class="n">on</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">files</span><span class="p">:</span><span class="n">scan</span> <span class="o">--</span><span class="nb">all</span> <span class="o">--</span><span class="n">repair</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">singleuser</span> <span class="o">--</span><span class="n">off</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We strongly suggest that you backup the database before running this command.</p>
</div>
</div>
</div>
<div class="section" id="the-files-transfer-ownership-command">
<h3>The files:transfer-ownership command<a class="headerlink" href="#the-files-transfer-ownership-command" title="Permalink to this headline">¶</a></h3>
<p>You may transfer all files and shares from one user to another.
This is useful before removing a user.
For example, to move all files from <code class="docutils literal notranslate"><span class="pre">&lt;source-user&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;destination-user&gt;</span></code>, use the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">files</span><span class="p">:</span><span class="n">transfer</span><span class="o">-</span><span class="n">ownership</span> <span class="o">&lt;</span><span class="n">source</span><span class="o">-</span><span class="n">user</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">destination</span><span class="o">-</span><span class="n">user</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>You can also move a limited set of files from <code class="docutils literal notranslate"><span class="pre">&lt;source-user&gt;</span></code> to <code class="docutils literal notranslate"><span class="pre">&lt;destination-user&gt;</span></code> by making use of the <code class="docutils literal notranslate"><span class="pre">--path</span></code> switch, as in the example below.
In it, <code class="docutils literal notranslate"><span class="pre">folder/to/move</span></code>, and any file and folder inside it will be moved to <code class="docutils literal notranslate"><span class="pre">&lt;destination-user&gt;</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">files</span><span class="p">:</span><span class="n">transfer</span><span class="o">-</span><span class="n">ownership</span> <span class="o">--</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;folder/to/move&quot;</span> <span class="o">&lt;</span><span class="n">source</span><span class="o">-</span><span class="n">user</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">destination</span><span class="o">-</span><span class="n">user</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>When using this command, please keep in mind:</p>
<ol class="arabic simple">
<li>The directory provided to the <code class="docutils literal notranslate"><span class="pre">--path</span></code> switch <strong>must</strong> exist inside <code class="docutils literal notranslate"><span class="pre">data/&lt;source-user&gt;/files</span></code>.</li>
<li>The directory (and its contents) won’t be moved as is between the users. It’ll be moved inside the destination user’s <code class="docutils literal notranslate"><span class="pre">files</span></code> directory, and placed in a directory which follows the format: <code class="docutils literal notranslate"><span class="pre">transferred</span> <span class="pre">from</span> <span class="pre">&lt;source-user&gt;</span> <span class="pre">on</span> <span class="pre">&lt;timestamp&gt;</span></code>. Using the example above, it will be stored under: <code class="docutils literal notranslate"><span class="pre">data/&lt;destination-user&gt;/files/transferred</span> <span class="pre">from</span> <span class="pre">&lt;source-user&gt;</span> <span class="pre">on</span> <span class="pre">20170426_124510/</span></code></li>
<li>Currently file versions can’t be transferred. Only the latest version of moved files will appear in the destination user’s account.</li>
</ol>
</div>
</div>
<div class="section" id="files-external">
<span id="files-external-label"></span><h2>Files External<a class="headerlink" href="#files-external" title="Permalink to this headline">¶</a></h2>
<p>These commands replace the <code class="docutils literal notranslate"><span class="pre">data/mount.json</span></code> configuration file used in
ownCloud releases before 9.0.</p>
<p>Commands for managing external storage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">files_external</span>
 <span class="n">files_external</span><span class="p">:</span><span class="n">applicable</span>  <span class="n">Manage</span> <span class="n">applicable</span> <span class="n">users</span> <span class="ow">and</span> <span class="n">groups</span> <span class="k">for</span> <span class="n">a</span> <span class="n">mount</span>
 <span class="n">files_external</span><span class="p">:</span><span class="n">backends</span>    <span class="n">Show</span> <span class="n">available</span> <span class="n">authentication</span> <span class="ow">and</span> <span class="n">storage</span> <span class="n">backends</span>
 <span class="n">files_external</span><span class="p">:</span><span class="n">config</span>      <span class="n">Manage</span> <span class="n">backend</span> <span class="n">configuration</span> <span class="k">for</span> <span class="n">a</span> <span class="n">mount</span>
 <span class="n">files_external</span><span class="p">:</span><span class="n">create</span>      <span class="n">Create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">mount</span> <span class="n">configuration</span>
 <span class="n">files_external</span><span class="p">:</span><span class="n">delete</span>      <span class="n">Delete</span> <span class="n">an</span> <span class="n">external</span> <span class="n">mount</span>
 <span class="n">files_external</span><span class="p">:</span><span class="n">export</span>      <span class="n">Export</span> <span class="n">mount</span> <span class="n">configurations</span>
 <span class="n">files_external</span><span class="p">:</span><span class="kn">import</span>      <span class="nn">Import</span> <span class="n">mount</span> <span class="n">configurations</span>
 <span class="n">files_external</span><span class="p">:</span><span class="nb">list</span>        <span class="n">List</span> <span class="n">configured</span> <span class="n">mounts</span>
 <span class="n">files_external</span><span class="p">:</span><span class="n">option</span>      <span class="n">Manage</span> <span class="n">mount</span> <span class="n">options</span> <span class="k">for</span> <span class="n">a</span> <span class="n">mount</span>
 <span class="n">files_external</span><span class="p">:</span><span class="n">verify</span>      <span class="n">Verify</span> <span class="n">mount</span> <span class="n">configuration</span>
</pre></div>
</div>
<p>These commands replicate the functionality in the ownCloud Web GUI, plus two new features:  <code class="docutils literal notranslate"><span class="pre">files_external:export</span></code> and <code class="docutils literal notranslate"><span class="pre">files_external:import</span></code>.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">files_external:export</span></code> to export all admin mounts to stdout, and <code class="docutils literal notranslate"><span class="pre">files_external:export</span> <span class="pre">[user_id]</span></code> to export the mounts of the specified ownCloud user.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands are only available when the “External storage support” app
(<code class="docutils literal notranslate"><span class="pre">files_external</span></code>) is enabled.
It is not available in <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user (maintenance) mode</span></a>.</p>
</div>
</div>
<div class="section" id="group-commands">
<span id="group-commands-label"></span><h2>Group Commands<a class="headerlink" href="#group-commands" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">group</span></code> commands provide a range of functionality for managing ownCloud groups.
This includes creating and removing groups and managing group membership.
Group names are case-sensitive, so “Finance” and “finance” are two different groups.</p>
<p>The full list of commands is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">group</span>
 <span class="n">group</span><span class="p">:</span><span class="n">add</span>                           <span class="n">adds</span> <span class="n">a</span> <span class="n">group</span>
 <span class="n">group</span><span class="p">:</span><span class="n">add</span><span class="o">-</span><span class="n">member</span>                    <span class="n">add</span> <span class="n">members</span> <span class="n">to</span> <span class="n">a</span> <span class="n">group</span>
 <span class="n">group</span><span class="p">:</span><span class="n">delete</span>                        <span class="n">deletes</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">group</span>
 <span class="n">group</span><span class="p">:</span><span class="nb">list</span>                          <span class="nb">list</span> <span class="n">groups</span>
 <span class="n">group</span><span class="p">:</span><span class="nb">list</span><span class="o">-</span><span class="n">members</span>                  <span class="nb">list</span> <span class="n">group</span> <span class="n">members</span>
 <span class="n">group</span><span class="p">:</span><span class="n">remove</span><span class="o">-</span><span class="n">member</span>                 <span class="n">remove</span> <span class="n">member</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">a</span> <span class="n">group</span>
</pre></div>
</div>
<div class="section" id="creating-groups">
<h3>Creating Groups<a class="headerlink" href="#creating-groups" title="Permalink to this headline">¶</a></h3>
<p>You can create a new group with the <code class="docutils literal notranslate"><span class="pre">group:add</span></code> command.
The syntax is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">group</span><span class="p">:</span><span class="n">add</span> <span class="n">groupname</span>
</pre></div>
</div>
<p>This example adds a new group, called “Finance”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">group</span><span class="p">:</span><span class="n">add</span> <span class="n">Finance</span>
  <span class="n">Created</span> <span class="n">group</span> <span class="s2">&quot;Finance&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="listing-groups">
<h3>Listing Groups<a class="headerlink" href="#listing-groups" title="Permalink to this headline">¶</a></h3>
<p>You can list the names of existing groups with the <code class="docutils literal notranslate"><span class="pre">group:list</span></code> command.
The syntax is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">group</span><span class="p">:</span><span class="nb">list</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">search</span><span class="o">-</span><span class="n">pattern</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>Groups containing the <code class="docutils literal notranslate"><span class="pre">search-pattern</span></code> string are listed. Matching is
not case-sensitive. If you do not provide a search-pattern then all groups
are listed.</p>
<p>This example lists groups containing the string finance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">group</span><span class="p">:</span><span class="nb">list</span> <span class="n">finance</span>
 <span class="o">-</span> <span class="n">All</span><span class="o">-</span><span class="n">Finance</span><span class="o">-</span><span class="n">Staff</span>
 <span class="o">-</span> <span class="n">Finance</span>
 <span class="o">-</span> <span class="n">Finance</span><span class="o">-</span><span class="n">Managers</span>
</pre></div>
</div>
<p>The output can be formatted in JSON with the output option <code class="docutils literal notranslate"><span class="pre">json</span></code> or <code class="docutils literal notranslate"><span class="pre">json_pretty</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="o">--</span><span class="n">output</span><span class="o">=</span><span class="n">json_pretty</span> <span class="n">group</span><span class="p">:</span><span class="nb">list</span> <span class="n">finance</span>
 <span class="p">[</span>
   <span class="s2">&quot;All-Finance-Staff&quot;</span><span class="p">,</span>
   <span class="s2">&quot;Finance&quot;</span><span class="p">,</span>
   <span class="s2">&quot;Finance-Managers&quot;</span>
 <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="listing-group-members">
<h3>Listing Group Members<a class="headerlink" href="#listing-group-members" title="Permalink to this headline">¶</a></h3>
<p>You can list the user IDs of group members with the <code class="docutils literal notranslate"><span class="pre">group:list-members</span></code> command.
The syntax is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">group</span><span class="p">:</span><span class="nb">list</span><span class="o">-</span><span class="n">members</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">group</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This example lists members of the Finance group:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">group</span><span class="p">:</span><span class="nb">list</span><span class="o">-</span><span class="n">members</span> <span class="n">Finance</span>
 <span class="o">-</span> <span class="n">aaron</span><span class="p">:</span> <span class="n">Aaron</span> <span class="n">Smith</span>
 <span class="o">-</span> <span class="n">julie</span><span class="p">:</span> <span class="n">Julie</span> <span class="n">Jones</span>
</pre></div>
</div>
<p>The output can be formatted in JSON with the output option <code class="docutils literal notranslate"><span class="pre">json</span></code> or <code class="docutils literal notranslate"><span class="pre">json_pretty</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="o">--</span><span class="n">output</span><span class="o">=</span><span class="n">json_pretty</span> <span class="n">group</span><span class="p">:</span><span class="nb">list</span><span class="o">-</span><span class="n">members</span> <span class="n">Finance</span>
 <span class="p">{</span>
   <span class="s2">&quot;aaron&quot;</span><span class="p">:</span> <span class="s2">&quot;Aaron Smith&quot;</span><span class="p">,</span>
   <span class="s2">&quot;julie&quot;</span><span class="p">:</span> <span class="s2">&quot;Julie Jones&quot;</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-members-to-groups">
<h3>Adding Members to Groups<a class="headerlink" href="#adding-members-to-groups" title="Permalink to this headline">¶</a></h3>
<p>You can add members to an existing group with the <code class="docutils literal notranslate"><span class="pre">group:add-member</span></code> command.
Members must be existing users.
The syntax is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">group</span><span class="p">:</span><span class="n">add</span><span class="o">-</span><span class="n">member</span> <span class="p">[</span><span class="o">-</span><span class="n">m</span><span class="o">|--</span><span class="n">member</span> <span class="p">[</span><span class="n">MEMBER</span><span class="p">]]</span> <span class="o">&lt;</span><span class="n">group</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This example adds members “aaron” and “julie” to group “Finance”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">group</span><span class="p">:</span><span class="n">add</span><span class="o">-</span><span class="n">member</span> <span class="o">--</span><span class="n">member</span> <span class="n">aaron</span> <span class="o">--</span><span class="n">member</span> <span class="n">julie</span> <span class="n">Finance</span>
  <span class="n">User</span> <span class="s2">&quot;aaron&quot;</span> <span class="n">added</span> <span class="n">to</span> <span class="n">group</span> <span class="s2">&quot;Finance&quot;</span>
  <span class="n">User</span> <span class="s2">&quot;julie&quot;</span> <span class="n">added</span> <span class="n">to</span> <span class="n">group</span> <span class="s2">&quot;Finance&quot;</span>
</pre></div>
</div>
<p>You may attempt to add members that are already in the group, without error.
This allows you to add members in a scripted way without needing to know if the user is already a member of the group.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">group</span><span class="p">:</span><span class="n">add</span><span class="o">-</span><span class="n">member</span> <span class="o">--</span><span class="n">member</span> <span class="n">aaron</span> <span class="o">--</span><span class="n">member</span> <span class="n">julie</span> <span class="o">--</span><span class="n">member</span> <span class="n">fred</span> <span class="n">Finance</span>
  <span class="n">User</span> <span class="s2">&quot;aaron&quot;</span> <span class="ow">is</span> <span class="n">already</span> <span class="n">a</span> <span class="n">member</span> <span class="n">of</span> <span class="n">group</span> <span class="s2">&quot;Finance&quot;</span>
  <span class="n">User</span> <span class="s2">&quot;julie&quot;</span> <span class="ow">is</span> <span class="n">already</span> <span class="n">a</span> <span class="n">member</span> <span class="n">of</span> <span class="n">group</span> <span class="s2">&quot;Finance&quot;</span>
  <span class="n">User</span> <span class="n">fred</span><span class="s2">&quot; added to group &quot;</span><span class="n">Finance</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="removing-members-from-groups">
<h3>Removing Members from Groups<a class="headerlink" href="#removing-members-from-groups" title="Permalink to this headline">¶</a></h3>
<p>You can remove members from a group with the <code class="docutils literal notranslate"><span class="pre">group:remove-member</span></code> command.
The syntax is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">group</span><span class="p">:</span><span class="n">remove</span><span class="o">-</span><span class="n">member</span> <span class="p">[</span><span class="o">-</span><span class="n">m</span><span class="o">|--</span><span class="n">member</span> <span class="p">[</span><span class="n">MEMBER</span><span class="p">]]</span> <span class="o">&lt;</span><span class="n">group</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This example removes members “aaron” and “julie” from group “Finance”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">group</span><span class="p">:</span><span class="n">remove</span><span class="o">-</span><span class="n">member</span> <span class="o">--</span><span class="n">member</span> <span class="n">aaron</span> <span class="o">--</span><span class="n">member</span> <span class="n">julie</span> <span class="n">Finance</span>
  <span class="n">Member</span> <span class="s2">&quot;aaron&quot;</span> <span class="n">removed</span> <span class="kn">from</span> <span class="nn">group</span> <span class="s2">&quot;Finance&quot;</span>
  <span class="n">Member</span> <span class="s2">&quot;julie&quot;</span> <span class="n">removed</span> <span class="kn">from</span> <span class="nn">group</span> <span class="s2">&quot;Finance&quot;</span>
</pre></div>
</div>
<p>You may attempt to remove members that have already been removed from the group, without error.
This allows you to remove members in a scripted way without needing to know if the user is still a member of the group.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">group</span><span class="p">:</span><span class="n">remove</span><span class="o">-</span><span class="n">member</span> <span class="o">--</span><span class="n">member</span> <span class="n">aaron</span> <span class="o">--</span><span class="n">member</span> <span class="n">fred</span> <span class="n">Finance</span>
  <span class="n">Member</span> <span class="s2">&quot;aaron&quot;</span> <span class="n">could</span> <span class="ow">not</span> <span class="n">be</span> <span class="n">found</span> <span class="ow">in</span> <span class="n">group</span> <span class="s2">&quot;Finance&quot;</span>
  <span class="n">Member</span> <span class="s2">&quot;fred&quot;</span> <span class="n">removed</span> <span class="kn">from</span> <span class="nn">group</span> <span class="s2">&quot;Finance&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="deleting-a-group">
<h3>Deleting a Group<a class="headerlink" href="#deleting-a-group" title="Permalink to this headline">¶</a></h3>
<p>To delete a group, you use the <code class="docutils literal notranslate"><span class="pre">group:delete</span></code> command, as in the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">group</span><span class="p">:</span><span class="n">delete</span> <span class="n">Finance</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="integrity-check">
<span id="integrity-check-label"></span><h2>Integrity Check<a class="headerlink" href="#integrity-check" title="Permalink to this headline">¶</a></h2>
<p>Apps which have an official tag MUST be code signed.
Unsigned official apps won’t be installable anymore.
Code signing is optional for all third-party applications.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">integrity</span>
 <span class="n">integrity</span><span class="p">:</span><span class="n">check</span><span class="o">-</span><span class="n">app</span>                 <span class="n">Check</span> <span class="n">app</span> <span class="n">integrity</span> <span class="n">using</span> <span class="n">a</span> <span class="n">signature</span><span class="o">.</span>
 <span class="n">integrity</span><span class="p">:</span><span class="n">check</span><span class="o">-</span><span class="n">core</span>                <span class="n">Check</span> <span class="n">core</span> <span class="n">integrity</span> <span class="n">using</span> <span class="n">a</span> <span class="n">signature</span><span class="o">.</span>
 <span class="n">integrity</span><span class="p">:</span><span class="n">sign</span><span class="o">-</span><span class="n">app</span>                  <span class="n">Signs</span> <span class="n">an</span> <span class="n">app</span> <span class="n">using</span> <span class="n">a</span> <span class="n">private</span> <span class="n">key</span><span class="o">.</span>
 <span class="n">integrity</span><span class="p">:</span><span class="n">sign</span><span class="o">-</span><span class="n">core</span>                 <span class="n">Sign</span> <span class="n">core</span> <span class="n">using</span> <span class="n">a</span> <span class="n">private</span> <span class="n">key</span>
</pre></div>
</div>
<p>After creating your signing key, sign your app like this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">integrity</span><span class="p">:</span><span class="n">sign</span><span class="o">-</span><span class="n">app</span> <span class="o">--</span><span class="n">privateKey</span><span class="o">=/</span><span class="n">Users</span><span class="o">/</span><span class="n">lukasreschke</span><span class="o">/</span><span class="n">contacts</span><span class="o">.</span><span class="n">key</span> <span class="o">--</span><span class="n">certificate</span><span class="o">=/</span><span class="n">Users</span><span class="o">/</span><span class="n">lukasreschke</span><span class="o">/</span><span class="n">CA</span><span class="o">/</span><span class="n">contacts</span><span class="o">.</span><span class="n">crt</span> <span class="o">--</span><span class="n">path</span><span class="o">=/</span><span class="n">Users</span><span class="o">/</span><span class="n">lukasreschke</span><span class="o">/</span><span class="n">Programming</span><span class="o">/</span><span class="n">contacts</span>
</pre></div>
</div>
<p>Verify your app:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">integrity</span><span class="p">:</span><span class="n">check</span><span class="o">-</span><span class="n">app</span> <span class="o">--</span><span class="n">path</span><span class="o">=/</span><span class="n">pathto</span><span class="o">/</span><span class="n">app</span> <span class="n">appname</span>
</pre></div>
</div>
<p>When it returns nothing, your app is signed correctly.
When it returns a message then there is an error.
See <a class="reference external" href="https://doc.owncloud.org/server/latest/developer_manual/app/code_signing.html#how-to-get-your-app-signed">Code Signing</a> in the Developer manual for more detailed information.</p>
<p><code class="docutils literal notranslate"><span class="pre">integrity:sign-core</span></code> is for ownCloud core developers only.</p>
<p>See <a class="reference internal" href="../../issues/code_signing.html"><span class="doc">Code Signing</span></a> to learn more.</p>
</div>
<div class="section" id="l10n-create-javascript-translation-files-for-apps">
<span id="create-javascript-translation-files-label"></span><h2>l10n, Create Javascript Translation Files for Apps<a class="headerlink" href="#l10n-create-javascript-translation-files-for-apps" title="Permalink to this headline">¶</a></h2>
<p>This command creates JavaScript and JSON translation files for ownCloud applications.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The command does not update existing translations if the source translation
file has been updated. It only creates translation files when none are
present for a given language.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">l10n</span>
  <span class="n">l10n</span><span class="p">:</span><span class="n">createjs</span>                <span class="n">Create</span> <span class="n">Javascript</span> <span class="n">translation</span> <span class="n">files</span> <span class="k">for</span> <span class="n">a</span> <span class="n">given</span> <span class="n">app</span>
</pre></div>
</div>
<p>The command takes two parameters; these are:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">app</span></code>: the name of the application.</li>
<li><code class="docutils literal notranslate"><span class="pre">lang</span></code>: the output language of the translation files; more than one can be supplied.</li>
</ul>
<p>To create the two translation files, the command reads translation data from a source PHP translation file.</p>
<div class="section" id="a-working-example">
<h3>A Working Example<a class="headerlink" href="#a-working-example" title="Permalink to this headline">¶</a></h3>
<p>In this example, we’ll create Austrian German translations for the Gallery app.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This example assumes that the ownCloud directory is <cite>/var/www/owncloud`</cite> and that it uses ownCloud’s standard apps directory, <code class="docutils literal notranslate"><span class="pre">app</span></code>.</p>
</div>
<p>First, create a source translation file in <code class="docutils literal notranslate"><span class="pre">/var/www/owncloud/apps/gallery/l10n</span></code>, called <code class="docutils literal notranslate"><span class="pre">de_AT.php</span></code>.
In it, add the required translation strings, as in the following example.
Refer to the developer documentation on <a class="reference external" href="https://doc.owncloud.org/server/latest/developer_manual/app/advanced/l10n.html#creating-translatable-files-label">creating translation files</a>, if you’re not familiar with creating them.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>
<span class="c1">// The source string is the key, the translated string is the value.</span>
<span class="nv">$TRANSLATIONS</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s2">&quot;Share&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;Freigeben&quot;</span>
<span class="p">];</span>
<span class="nv">$PLURAL_FORMS</span> <span class="o">=</span> <span class="s2">&quot;nplurals=2; plural=(n != 1);&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>After that, run the following command to create the translation.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">l10n</span><span class="p">:</span><span class="n">createjs</span> <span class="n">gallery</span> <span class="n">de_AT</span>
</pre></div>
</div>
<p>This will generate two translation files, <code class="docutils literal notranslate"><span class="pre">de_AT.js</span></code> and <code class="docutils literal notranslate"><span class="pre">de_AT.json</span></code>, in <code class="docutils literal notranslate"><span class="pre">/var/www/owncloud/apps/gallery/l10n</span></code>.</p>
<div class="section" id="create-translations-in-multiple-languages">
<h4>Create Translations in Multiple Languages<a class="headerlink" href="#create-translations-in-multiple-languages" title="Permalink to this headline">¶</a></h4>
<p>To create translations in multiple languages simultaneously, supply multiple languages to the command, as in the following example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">l10n</span><span class="p">:</span><span class="n">createjs</span> <span class="n">gallery</span> <span class="n">de_AT</span> <span class="n">de_DE</span> <span class="n">hu_HU</span> <span class="n">es</span> <span class="n">fr</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="ldap-commands">
<span id="ldap-commands-label"></span><h2>LDAP Commands<a class="headerlink" href="#ldap-commands" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands are only available when the “LDAP user and group backend” app
(<code class="docutils literal notranslate"><span class="pre">user_ldap</span></code>) is enabled.</p>
</div>
<p>These LDAP commands appear only when you have enabled the LDAP app.
Then you can run the following LDAP commands with <code class="docutils literal notranslate"><span class="pre">occ</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ldap</span>
 <span class="n">ldap</span><span class="p">:</span><span class="n">check</span><span class="o">-</span><span class="n">user</span>               <span class="n">checks</span> <span class="n">whether</span> <span class="n">a</span> <span class="n">user</span> <span class="n">exists</span> <span class="n">on</span> <span class="n">LDAP</span><span class="o">.</span>
 <span class="n">ldap</span><span class="p">:</span><span class="n">create</span><span class="o">-</span><span class="n">empty</span><span class="o">-</span><span class="n">config</span>      <span class="n">creates</span> <span class="n">an</span> <span class="n">empty</span> <span class="n">LDAP</span> <span class="n">configuration</span>
 <span class="n">ldap</span><span class="p">:</span><span class="n">delete</span><span class="o">-</span><span class="n">config</span>            <span class="n">deletes</span> <span class="n">an</span> <span class="n">existing</span> <span class="n">LDAP</span> <span class="n">configuration</span>
 <span class="n">ldap</span><span class="p">:</span><span class="n">search</span>                   <span class="n">executes</span> <span class="n">a</span> <span class="n">user</span> <span class="ow">or</span> <span class="n">group</span> <span class="n">search</span>
 <span class="n">ldap</span><span class="p">:</span><span class="nb">set</span><span class="o">-</span><span class="n">config</span>               <span class="n">modifies</span> <span class="n">an</span> <span class="n">LDAP</span> <span class="n">configuration</span>
 <span class="n">ldap</span><span class="p">:</span><span class="n">show</span><span class="o">-</span><span class="n">config</span>              <span class="n">shows</span> <span class="n">the</span> <span class="n">LDAP</span> <span class="n">configuration</span>
 <span class="n">ldap</span><span class="p">:</span><span class="n">test</span><span class="o">-</span><span class="n">config</span>              <span class="n">tests</span> <span class="n">an</span> <span class="n">LDAP</span> <span class="n">configuration</span>
 <span class="n">ldap</span><span class="p">:</span><span class="n">update</span><span class="o">-</span><span class="n">group</span>             <span class="n">update</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">group</span> <span class="n">membership</span>
                               <span class="n">information</span> <span class="n">stored</span> <span class="n">locally</span>
</pre></div>
</div>
<p>Search for an LDAP user, using this syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="n">search</span> <span class="p">[</span><span class="o">--</span><span class="n">group</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">offset</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]</span>
<span class="p">[</span><span class="o">--</span><span class="n">limit</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]</span> <span class="n">search</span>
</pre></div>
</div>
<p>Searches will match at the beginning of the attribute value only.
This example searches for <code class="docutils literal notranslate"><span class="pre">givenNames</span></code> that start with “rob”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="n">search</span> <span class="s2">&quot;rob&quot;</span>
</pre></div>
</div>
<p>This will find robbie, roberta, and robin. Broaden the search to find, for example, <code class="docutils literal notranslate"><span class="pre">jeroboam</span></code> with the asterisk wildcard:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="n">search</span> <span class="s2">&quot;*rob&quot;</span>
</pre></div>
</div>
<p>User search attributes are set with <code class="docutils literal notranslate"><span class="pre">ldap:set-config</span></code> (below).
For example, if your search attributes are <code class="docutils literal notranslate"><span class="pre">givenName</span></code> and <code class="docutils literal notranslate"><span class="pre">sn</span></code> you can find users by first name + last name very quickly.
For example, you’ll find Terri Hanson by searching for <code class="docutils literal notranslate"><span class="pre">te</span> <span class="pre">ha</span></code>.
Trailing whitespace is ignored.</p>
<p>Check if an LDAP user exists.
This works only if the ownCloud server is connected to an LDAP server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="n">check</span><span class="o">-</span><span class="n">user</span> <span class="n">robert</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ldap:check-user</span></code> will not run a check when it finds a disabled LDAP connection.
This prevents users that exist on disabled LDAP connections from being marked as deleted.
If you know for certain that the user you are searching for is not in one of the disabled connections, and exists on an active connection, use the <code class="docutils literal notranslate"><span class="pre">--force</span></code> option to force it to check all active LDAP connections.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="n">check</span><span class="o">-</span><span class="n">user</span> <span class="o">--</span><span class="n">force</span> <span class="n">robert</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ldap:create-empty-config</span></code> creates an empty LDAP configuration.
The first one you create has no <code class="docutils literal notranslate"><span class="pre">configID</span></code>, like this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="n">create</span><span class="o">-</span><span class="n">empty</span><span class="o">-</span><span class="n">config</span>
  <span class="n">Created</span> <span class="n">new</span> <span class="n">configuration</span> <span class="k">with</span> <span class="n">configID</span> <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
<p>This is a holdover from the early days, when there was no option to create additional configurations.
The second, and all subsequent, configurations that you create are automatically assigned IDs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="n">create</span><span class="o">-</span><span class="n">empty</span><span class="o">-</span><span class="n">config</span>
   <span class="n">Created</span> <span class="n">new</span> <span class="n">configuration</span> <span class="k">with</span> <span class="n">configID</span> <span class="s1">&#39;s01&#39;</span>
</pre></div>
</div>
<p>Then you can list and view your configurations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="n">show</span><span class="o">-</span><span class="n">config</span>
</pre></div>
</div>
<p>And view the configuration for a single <code class="docutils literal notranslate"><span class="pre">configID</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="n">show</span><span class="o">-</span><span class="n">config</span> <span class="n">s01</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ldap:delete-config</span> <span class="pre">[configID]</span></code> deletes an existing LDAP configuration.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="n">delete</span>  <span class="n">s01</span>
<span class="n">Deleted</span> <span class="n">configuration</span> <span class="k">with</span> <span class="n">configID</span> <span class="s1">&#39;s01&#39;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ldap:set-config</span></code> command is for manipulating configurations, like this example that sets search attributes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">ldap</span><span class="p">:</span><span class="nb">set</span><span class="o">-</span><span class="n">config</span> <span class="n">s01</span> <span class="n">ldapAttributesForUserSearch</span>
<span class="s2">&quot;cn;givenname;sn;displayname;mail&quot;</span>
</pre></div>
</div>
<p>The command takes the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ldap</span><span class="p">:</span><span class="nb">set</span><span class="o">-</span><span class="n">config</span> <span class="o">&lt;</span><span class="n">configID</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">configKey</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">configValue</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>All of the available keys, along with default values for <cite>configValue</cite>, are listed in the table below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Configuration</th>
<th class="head">Setting</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>hasMemberOfFilterSupport</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>hasPagedResultSupport</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>homeFolderNamingRule</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>lastJpegPhotoLookup</td>
<td>0</td>
</tr>
<tr class="row-even"><td>ldapAgentName</td>
<td><cite>cn=admin,dc=owncloudqa,dc=com</cite></td>
</tr>
<tr class="row-odd"><td>ldapAgentPassword</td>
<td><em>*</em></td>
</tr>
<tr class="row-even"><td>ldapAttributesForGroupSearch</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>ldapAttributesForUserSearch</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>ldapBackupHost</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>ldapBackupPort</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>ldapBase</td>
<td><cite>dc=owncloudqa,dc=com</cite></td>
</tr>
<tr class="row-odd"><td>ldapBaseGroups</td>
<td><cite>dc=owncloudqa,dc=com</cite></td>
</tr>
<tr class="row-even"><td>ldapBaseUsers</td>
<td><cite>dc=owncloudqa,dc=com</cite></td>
</tr>
<tr class="row-odd"><td>ldapCacheTTL</td>
<td>600</td>
</tr>
<tr class="row-even"><td>ldapConfigurationActive</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>ldapDynamicGroupMemberURL</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>ldapEmailAttribute</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>ldapExperiencedAdmin</td>
<td>0</td>
</tr>
<tr class="row-even"><td>ldapExpertUUIDGroupAttr</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>ldapExpertUUIDUserAttr</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>ldapExpertUsernameAttr</td>
<td>ldapGroupDisplayName             <cite>cn</cite></td>
</tr>
<tr class="row-odd"><td>ldapGroupFilter</td>
<td>ldapGroupFilterGroups</td>
</tr>
<tr class="row-even"><td>ldapGroupFilterMode</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>ldapGroupFilterObjectclass</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>ldapGroupMemberAssocAttr</td>
<td><cite>uniqueMember</cite></td>
</tr>
<tr class="row-odd"><td>ldapHost</td>
<td><cite>ldap://host</cite></td>
</tr>
<tr class="row-even"><td>ldapIgnoreNamingRules</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>ldapLoginFilter</td>
<td><cite>(&amp;((objectclass=inetOrgPerson))(uid=%uid))</cite></td>
</tr>
<tr class="row-even"><td>ldapLoginFilterAttributes</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>ldapLoginFilterEmail</td>
<td>0</td>
</tr>
<tr class="row-even"><td>ldapLoginFilterMode</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>ldapLoginFilterUsername</td>
<td>1</td>
</tr>
<tr class="row-even"><td>ldapNestedGroups</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>ldapOverrideMainServer</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>ldapPagingSize</td>
<td>500</td>
</tr>
<tr class="row-odd"><td>ldapPort</td>
<td>389</td>
</tr>
<tr class="row-even"><td>ldapQuotaAttribute</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>ldapQuotaDefault</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>ldapTLS</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>ldapUserDisplayName</td>
<td><cite>displayName</cite></td>
</tr>
<tr class="row-even"><td>ldapUserDisplayName2</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>ldapUserFilter</td>
<td><cite>((objectclass=inetOrgPerson))</cite></td>
</tr>
<tr class="row-even"><td>ldapUserFilterGroups</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>ldapUserFilterMode</td>
<td>0</td>
</tr>
<tr class="row-even"><td>ldapUserFilterObjectclass</td>
<td><cite>inetOrgPerson</cite></td>
</tr>
<tr class="row-odd"><td>ldapUuidGroupAttribute</td>
<td><cite>auto</cite></td>
</tr>
<tr class="row-even"><td>ldapUuidUserAttribute</td>
<td><cite>auto</cite></td>
</tr>
<tr class="row-odd"><td>turnOffCertCheck</td>
<td>0</td>
</tr>
<tr class="row-even"><td>useMemberOfToDetectMembership</td>
<td>1</td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">ldap:test-config</span></code> tests whether your configuration is correct and can bind to the server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo -u www-data php occ ldap:test-config s01
The configuration is valid and the connection could be established!
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ldap:update-group</span></code> updates the specified group membership information stored locally.</p>
<p>The command takes the following format:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ldap</span><span class="p">:</span><span class="n">update</span><span class="o">-</span><span class="n">group</span> <span class="o">&lt;</span><span class="n">groupID</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">groupID</span> <span class="o">&lt;</span><span class="n">groupID</span><span class="o">&gt;</span> <span class="o">...&gt;</span>
</pre></div>
</div>
<p>The command allows for running a manual group sync on one or more groups, instead of having to wait for group syncing to occur.
If users have been added or removed from these groups in LDAP, ownCloud will update its details.
If a group was deleted in LDAP, ownCloud will also delete the local mapping info about this group.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">New groups in LDAP won’t be synced with this command.
The LDAP TTL configuration (by default 10 minutes) still applies. This means
that recently deleted groups from LDAP might be considered as “active” and
might not be deleted in ownCloud immediately.</p>
</div>
<p><strong>Configuring the LDAP Refresh Attribute Interval</strong></p>
<p>You can configure the LDAP refresh attribute interval, but not with the <code class="docutils literal notranslate"><span class="pre">ldap</span></code> commands.
Instead, you need to use the <code class="docutils literal notranslate"><span class="pre">config:app:set</span></code> command, as in the following example, which takes a number of seconds to the <code class="docutils literal notranslate"><span class="pre">--value</span></code> switch.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">occ</span> <span class="n">config</span><span class="p">:</span><span class="n">app</span><span class="p">:</span><span class="nb">set</span> <span class="n">user_ldap</span> <span class="n">updateAttributesInterval</span> <span class="o">--</span><span class="n">value</span><span class="o">=</span><span class="mi">7200</span>
</pre></div>
</div>
<p>In the example above, the interval is being set to 7200 seconds.
Assuming the above example was used, the command would output the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Config value updateAttributesInterval for app user_ldap set to 7200</span>
</pre></div>
</div>
<p>If you want to reset (or unset) the setting, then you can use the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">occ config:app:delete user_ldap updateAttributesInterval</span>
</pre></div>
</div>
</div>
<div class="section" id="logging-commands">
<span id="logging-commands-label"></span><h2>Logging Commands<a class="headerlink" href="#logging-commands" title="Permalink to this headline">¶</a></h2>
<p>These commands view and configure your ownCloud logging preferences.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">log</span>
 <span class="n">log</span><span class="p">:</span><span class="n">manage</span>     <span class="n">manage</span> <span class="n">logging</span> <span class="n">configuration</span>
 <span class="n">log</span><span class="p">:</span><span class="n">owncloud</span>   <span class="n">manipulate</span> <span class="n">ownCloud</span> <span class="n">logging</span> <span class="n">backend</span>
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">log:owncloud</span></code> to see your current logging status:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">log</span><span class="p">:</span><span class="n">owncloud</span>
<span class="n">Log</span> <span class="n">backend</span> <span class="n">ownCloud</span><span class="p">:</span> <span class="n">enabled</span>
<span class="n">Log</span> <span class="n">file</span><span class="p">:</span> <span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">owncloud</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">owncloud</span><span class="o">.</span><span class="n">log</span>
<span class="n">Rotate</span> <span class="n">at</span><span class="p">:</span> <span class="n">disabled</span>
</pre></div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">--enable</span></code> option to turn on logging. Use <code class="docutils literal notranslate"><span class="pre">--file</span></code> to set a different log file path.
Set your rotation by log file size in bytes with <code class="docutils literal notranslate"><span class="pre">--rotate-size</span></code>; 0 disables rotation.
<code class="docutils literal notranslate"><span class="pre">log:manage</span></code> sets your logging backend, log level, and timezone.
The defaults are <code class="docutils literal notranslate"><span class="pre">owncloud</span></code>, <code class="docutils literal notranslate"><span class="pre">Warning</span></code>, and <code class="docutils literal notranslate"><span class="pre">UTC</span></code>.</p>
<p>Log level can be adjusted by entering the number or the name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">log</span><span class="p">:</span><span class="n">manage</span> <span class="o">--</span><span class="n">level</span> <span class="mi">4</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">log</span><span class="p">:</span><span class="n">manage</span> <span class="o">--</span><span class="n">level</span> <span class="n">error</span>
</pre></div>
</div>
<p>You can also choose debug, info, warning, error or fatal.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Setting the log level to debug ( 0 ) can be used for finding the cause of an error, but should not be the standard
as it increases the log file size.</p>
</div>
<p>Available options are:</p>
<ul class="simple">
<li>–backend [owncloud, syslog, errorlog]</li>
</ul>
</div>
<div class="section" id="maintenance-commands">
<span id="maintenance-commands-label"></span><h2>Maintenance Commands<a class="headerlink" href="#maintenance-commands" title="Permalink to this headline">¶</a></h2>
<p>Use these commands when you upgrade ownCloud, manage encryption, perform backups and other tasks that require locking users out until you are finished:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">maintenance</span>
 <span class="n">maintenance</span><span class="p">:</span><span class="n">data</span><span class="o">-</span><span class="n">fingerprint</span>        <span class="n">update</span> <span class="n">the</span> <span class="n">systems</span> <span class="n">data</span><span class="o">-</span><span class="n">fingerprint</span> <span class="n">after</span>
                                     <span class="n">a</span> <span class="n">backup</span> <span class="ow">is</span> <span class="n">restored</span>
 <span class="n">maintenance</span><span class="p">:</span><span class="n">mimetype</span><span class="p">:</span><span class="n">update</span><span class="o">-</span><span class="n">db</span>      <span class="n">Update</span> <span class="n">database</span> <span class="n">mimetypes</span> <span class="ow">and</span> <span class="n">update</span>
                                     <span class="n">filecache</span>
 <span class="n">maintenance</span><span class="p">:</span><span class="n">mimetype</span><span class="p">:</span><span class="n">update</span><span class="o">-</span><span class="n">js</span>      <span class="n">Update</span> <span class="n">mimetypelist</span><span class="o">.</span><span class="n">js</span>
 <span class="n">maintenance</span><span class="p">:</span><span class="n">mode</span>                    <span class="nb">set</span> <span class="n">maintenance</span> <span class="n">mode</span>
 <span class="n">maintenance</span><span class="p">:</span><span class="n">repair</span>                  <span class="n">repair</span> <span class="n">this</span> <span class="n">installation</span>
 <span class="n">maintenance</span><span class="p">:</span><span class="n">singleuser</span>              <span class="nb">set</span> <span class="n">single</span> <span class="n">user</span> <span class="n">mode</span>
 <span class="n">maintenance</span><span class="p">:</span><span class="n">update</span><span class="p">:</span><span class="n">htaccess</span>         <span class="n">Updates</span> <span class="n">the</span> <span class="o">.</span><span class="n">htaccess</span> <span class="n">file</span>
</pre></div>
</div>
<p id="maintenance-mode-label"><code class="docutils literal notranslate"><span class="pre">maintenance:mode</span></code> locks the sessions of all logged-in users, including administrators, and displays a status screen warning that the server is in maintenance mode.
Users who are not already logged in cannot log in until maintenance mode is turned off.
When you take the server out of maintenance mode logged-in users must refresh their Web browsers to continue working.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">mode</span> <span class="o">--</span><span class="n">on</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">mode</span> <span class="o">--</span><span class="n">off</span>
</pre></div>
</div>
<p>Putting your ownCloud server into single-user mode allows admins to log in and work, but not ordinary users.
This is useful for performing maintenance and troubleshooting on a running server.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">singleuser</span> <span class="o">--</span><span class="n">on</span>
<span class="n">Single</span> <span class="n">user</span> <span class="n">mode</span> <span class="n">enabled</span>
</pre></div>
</div>
<p>Turn it off when you’re finished:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">singleuser</span> <span class="o">--</span><span class="n">off</span>
<span class="n">Single</span> <span class="n">user</span> <span class="n">mode</span> <span class="n">disabled</span>
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">maintenance:data-fingerprint</span></code> to tell desktop and mobile clients that a server backup has been restored.
Users will be prompted to resolve any conflicts between newer and older file versions.</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">maintenance:data-fingerprint</span></code> to tell desktop and mobile clients that a server backup has been restored.
This command changes the ETag for all files in the communication with sync clients, informing them that one or more files were modified.
After the command completes, users will be prompted to resolve any conflicts between newer and older file versions.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">maintenance:repair</span></code> command runs automatically during upgrades to clean up the database, so while you can run it manually there usually isn’t a need to.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">repair</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">maintenance:mimetype:update-db</span></code> updates the ownCloud database and file cache with changed mimetypes found in <code class="docutils literal notranslate"><span class="pre">config/mimetypemapping.json</span></code>.
Run this command after modifying <code class="docutils literal notranslate"><span class="pre">config/mimetypemapping.json</span></code>.
If you change a mimetype, run <code class="docutils literal notranslate"><span class="pre">maintenance:mimetype:update-db</span> <span class="pre">--repair-filecache</span></code> to apply the change to existing files.</p>
</div>
<div class="section" id="market">
<span id="market-commands-label"></span><h2>Market<a class="headerlink" href="#market" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">market</span></code> commands <em>install</em>, <em>list</em>, and <em>upgrade</em> applications from <a class="reference external" href="https://marketplace.owncloud.com/">the ownCloud Marketplace</a>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">market</span>
<span class="go">  market:install    Install apps from the marketplace. If already installed and</span>
<span class="go">                    an update is available the update will be installed.</span>
<span class="go">  market:list       Lists apps as available on the marketplace.</span>
<span class="go">  market:upgrade    Installs new app versions if available on the marketplace</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The user running the update command, which will likely be your webserver user, needs write permission for the <code class="docutils literal notranslate"><span class="pre">/apps</span></code> folder.
If they don’t have write permission, the command may report that the update was successful, but it may silently fail.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands are not available in <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user (maintenance) mode</span></a>.</p>
</div>
<div class="section" id="install-an-application">
<h3>Install an Application<a class="headerlink" href="#install-an-application" title="Permalink to this headline">¶</a></h3>
<p>Applications can be installed both from <a class="reference external" href="https://marketplace.owncloud.com/">the ownCloud Marketplace</a> and from a local file archive.</p>
<div class="section" id="install-apps-from-the-marketplace">
<h4>Install Apps From The Marketplace<a class="headerlink" href="#install-apps-from-the-marketplace" title="Permalink to this headline">¶</a></h4>
<p>To install an application from the Marketplace, you need to supply the app’s id, which can be found in the app’s Marketplace URL.
For example, the URL for <em>Two factor backup codes</em> is <a class="reference external" href="https://marketplace.owncloud.com/apps/twofactor_backup_codes">https://marketplace.owncloud.com/apps/twofactor_backup_codes</a>.
So its app id is <code class="docutils literal notranslate"><span class="pre">twofactor_backup_codes</span></code>.</p>
</div>
<div class="section" id="install-apps-from-a-file-archive">
<h4>Install Apps From a File Archive<a class="headerlink" href="#install-apps-from-a-file-archive" title="Permalink to this headline">¶</a></h4>
<p>To install an application from a local file archive, you need to supply the path to the archive, and that you pass the <code class="docutils literal notranslate"><span class="pre">-l</span></code> switch.
Only <code class="docutils literal notranslate"><span class="pre">zip</span></code>, <code class="docutils literal notranslate"><span class="pre">gzip</span></code>, and <code class="docutils literal notranslate"><span class="pre">bzip2</span></code> archives are supported.</p>
</div>
<div class="section" id="usage-example">
<h4>Usage Example<a class="headerlink" href="#usage-example" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install an app from the marketplace.</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">occ</span> <span class="n">market</span><span class="p">:</span><span class="n">install</span> <span class="n">twofactor_backup_codes</span>

<span class="c1"># Install an app from a local archive.</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">occ</span> <span class="n">market</span><span class="p">:</span><span class="n">install</span> <span class="o">-</span><span class="n">l</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">richdocuments</span><span class="o">-</span><span class="mf">2.0</span><span class="o">.</span><span class="mf">0.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="reports">
<span id="reports-commands-label"></span><h2>Reports<a class="headerlink" href="#reports" title="Permalink to this headline">¶</a></h2>
<p>If you’re working with ownCloud support and need to send them a configuration summary, you can generate it using the <code class="docutils literal notranslate"><span class="pre">configreport:generate</span></code> command.
This command generates the same JSON-based report as the Admin Config Report, which you can access under <code class="docutils literal notranslate"><span class="pre">admin</span> <span class="pre">-&gt;</span> <span class="pre">Settings</span> <span class="pre">-&gt;</span> <span class="pre">Admin</span> <span class="pre">-&gt;</span> <span class="pre">Help</span> <span class="pre">&amp;</span> <span class="pre">Tips</span> <span class="pre">-&gt;</span> <span class="pre">Download</span> <span class="pre">ownCloud</span> <span class="pre">config</span> <span class="pre">report</span></code>.</p>
<p>From the command-line in the root directory of your ownCloud installation, run it as your webserver user as follows, (assuming your webserver user is <code class="docutils literal notranslate"><span class="pre">www-data</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">occ</span> <span class="n">configreport</span><span class="p">:</span><span class="n">generate</span>
</pre></div>
</div>
<p>This will generate the report and send it to <code class="docutils literal notranslate"><span class="pre">STDOUT</span></code>.
You can optionally pipe the output to a file and then attach it to an email to ownCloud support, by running the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">occ</span> <span class="n">configreport</span><span class="p">:</span><span class="n">generate</span> <span class="o">&gt;</span> <span class="n">generated</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">report</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>Alternatively, you could generate the report and email it all in one command, by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">occ</span> <span class="n">configreport</span><span class="p">:</span><span class="n">generate</span> <span class="o">|</span> <span class="n">mail</span> <span class="o">-</span><span class="n">s</span> <span class="s2">&quot;configuration report&quot;</span> \
    <span class="o">-</span><span class="n">r</span> <span class="o">&lt;</span><span class="n">the</span> <span class="n">email</span> <span class="n">address</span> <span class="n">to</span> <span class="n">send</span> <span class="n">from</span><span class="o">&gt;</span> \
    <span class="n">support</span><span class="nd">@owncloud</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands are not available in <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user (maintenance) mode</span></a>.</p>
</div>
</div>
<div class="section" id="security">
<span id="security-commands-label"></span><h2>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h2>
<p>Use these commands when you manage security related tasks</p>
<p>Routes dispays all routes of ownCloud. You can use this information to grant strict access via firewalls, proxies or loadbalancers etc.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">security</span><span class="p">:</span><span class="n">routes</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span>
</pre></div>
</div>
<p>Options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">output</span>        <span class="n">Output</span> <span class="nb">format</span> <span class="p">(</span><span class="n">plain</span><span class="p">,</span> <span class="n">json</span> <span class="ow">or</span> <span class="n">json</span><span class="o">-</span><span class="n">pretty</span><span class="p">,</span> <span class="n">default</span> <span class="ow">is</span> <span class="n">plain</span><span class="p">)</span>
<span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">details</span>  <span class="n">Adds</span> <span class="n">more</span> <span class="n">details</span> <span class="n">to</span> <span class="n">the</span> <span class="n">output</span>
</pre></div>
</div>
<p>Example 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span>  <span class="o">-</span><span class="n">uwww</span><span class="o">-</span><span class="n">data</span> <span class="o">./</span><span class="n">occ</span> <span class="n">security</span><span class="p">:</span><span class="n">routes</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+-----------------------------------------------------------+-----------------+</span>
<span class="o">|</span> <span class="n">Path</span>                                                      <span class="o">|</span> <span class="n">Methods</span>         <span class="o">|</span>
<span class="o">+-----------------------------------------------------------+-----------------+</span>
<span class="o">|</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">federation</span><span class="o">/</span><span class="n">auto</span><span class="o">-</span><span class="n">add</span><span class="o">-</span><span class="n">servers</span>                         <span class="o">|</span> <span class="n">POST</span>            <span class="o">|</span>
<span class="o">|</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">federation</span><span class="o">/</span><span class="n">trusted</span><span class="o">-</span><span class="n">servers</span>                          <span class="o">|</span> <span class="n">POST</span>            <span class="o">|</span>
<span class="o">|</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">federation</span><span class="o">/</span><span class="n">trusted</span><span class="o">-</span><span class="n">servers</span><span class="o">/</span><span class="p">{</span><span class="nb">id</span><span class="p">}</span>                     <span class="o">|</span> <span class="n">DELETE</span>          <span class="o">|</span>
<span class="o">|</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">files</span><span class="o">/</span>                                              <span class="o">|</span> <span class="n">GET</span>             <span class="o">|</span>
<span class="o">|</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">ajax</span><span class="o">/</span><span class="n">download</span><span class="o">.</span><span class="n">php</span>                             <span class="o">|</span>                 <span class="o">|</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Example 2:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span>  <span class="o">-</span><span class="n">uwww</span><span class="o">-</span><span class="n">data</span> <span class="o">./</span><span class="n">occ</span> <span class="n">security</span><span class="p">:</span><span class="n">routes</span> <span class="o">--</span><span class="n">output</span><span class="o">=</span><span class="n">json</span><span class="o">-</span><span class="n">pretty</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
      <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;\/apps\/federation\/auto-add-servers&quot;</span><span class="p">,</span>
      <span class="s2">&quot;methods&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;POST&quot;</span>
      <span class="p">]</span>
  <span class="p">},</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Example 3:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span>  <span class="o">-</span><span class="n">uwww</span><span class="o">-</span><span class="n">data</span> <span class="o">./</span><span class="n">occ</span> <span class="n">security</span><span class="p">:</span><span class="n">routes</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">details</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+---------------------------------------------+---------+-------------------------------------------------------+--------------------------------+</span>
<span class="o">|</span> <span class="n">Path</span>                                        <span class="o">|</span> <span class="n">Methods</span> <span class="o">|</span> <span class="n">Controller</span>                                            <span class="o">|</span> <span class="n">Annotations</span>                    <span class="o">|</span>
<span class="o">+---------------------------------------------+---------+-------------------------------------------------------+--------------------------------+</span>
<span class="o">|</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">sorting</span>                  <span class="o">|</span> <span class="n">POST</span>    <span class="o">|</span> <span class="n">OCA</span>\<span class="n">Files</span>\<span class="n">Controller</span>\<span class="n">ApiController</span><span class="p">::</span><span class="n">updateFileSorting</span> <span class="o">|</span> <span class="n">NoAdminRequired</span>                <span class="o">|</span>
<span class="o">|</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">thumbnail</span><span class="o">/</span><span class="p">{</span><span class="n">x</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">y</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">file</span><span class="p">}</span> <span class="o">|</span> <span class="n">GET</span>     <span class="o">|</span> <span class="n">OCA</span>\<span class="n">Files</span>\<span class="n">Controller</span>\<span class="n">ApiController</span><span class="p">::</span><span class="n">getThumbnail</span>      <span class="o">|</span> <span class="n">NoAdminRequired</span><span class="p">,</span><span class="n">NoCSRFRequired</span> <span class="o">|</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The following commands manage server-wide SSL certificates.
These are useful when you create federation shares with other ownCloud servers that use self-signed certificates.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">security</span><span class="p">:</span><span class="n">certificates</span>         <span class="nb">list</span> <span class="n">trusted</span> <span class="n">certificates</span>
<span class="n">security</span><span class="p">:</span><span class="n">certificates</span><span class="p">:</span><span class="kn">import</span>  <span class="nn">import</span> <span class="n">trusted</span> <span class="n">certificate</span>
<span class="n">security</span><span class="p">:</span><span class="n">certificates</span><span class="p">:</span><span class="n">remove</span>  <span class="n">remove</span> <span class="n">trusted</span> <span class="n">certificate</span>
</pre></div>
</div>
<p>This example lists your installed certificates:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">security</span><span class="p">:</span><span class="n">certificates</span>
</pre></div>
</div>
<p>Import a new certificate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">security</span><span class="p">:</span><span class="n">certificates</span><span class="p">:</span><span class="kn">import</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">certificate</span>
</pre></div>
</div>
<p>Remove a certificate:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">security</span><span class="p">:</span><span class="n">certificates</span><span class="p">:</span><span class="n">remove</span> <span class="p">[</span><span class="n">certificate</span> <span class="n">name</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="ransomware-protection">
<span id="ransomware-commands-label"></span><h2>Ransomware Protection<a class="headerlink" href="#ransomware-protection" title="Permalink to this headline">¶</a></h2>
<p>Use these commands to help users recover from a Ransomware attack.
You can find more information about the application <a class="reference internal" href="../../enterprise/ransomware-protection/index.html"><span class="doc">in the documentation</span></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ransomware Protection (which is an Enterprise app) needs to be installed and enabled to be able to use these commands.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">occ</span> <span class="n">ransomguard</span><span class="p">:</span><span class="n">scan</span> <span class="o">&lt;</span><span class="n">timestamp</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span>    <span class="n">Report</span> <span class="nb">all</span> <span class="n">changes</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">user</span><span class="s1">&#39;s account, starting from</span>
                                           <span class="n">timestamp</span><span class="o">.</span>
<span class="n">occ</span> <span class="n">ransomguard</span><span class="p">:</span><span class="n">restore</span> <span class="o">&lt;</span><span class="n">timestamp</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span> <span class="n">Revert</span> <span class="nb">all</span> <span class="n">operations</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">user</span> <span class="n">account</span> <span class="n">after</span> <span class="n">a</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">time</span><span class="o">.</span>
<span class="n">occ</span> <span class="n">ransomguard</span><span class="p">:</span><span class="n">lock</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span>                <span class="n">Set</span> <span class="n">a</span> <span class="n">user</span> <span class="n">account</span> <span class="k">as</span> <span class="n">read</span><span class="o">-</span><span class="n">only</span> <span class="k">for</span> <span class="n">ownCloud</span> <span class="ow">and</span> <span class="n">other</span> <span class="n">WebDAV</span>
                                           <span class="n">clients</span> <span class="n">when</span> <span class="n">malicious</span> <span class="n">activity</span> <span class="ow">is</span> <span class="n">suspected</span><span class="o">.</span>
<span class="n">occ</span> <span class="n">ransomguard</span><span class="p">:</span><span class="n">unlock</span> <span class="o">&lt;</span><span class="n">user</span><span class="o">&gt;</span>              <span class="n">Unlock</span> <span class="n">a</span> <span class="n">user</span> <span class="n">account</span> <span class="n">after</span> <span class="n">ransomware</span> <span class="n">issues</span> <span class="n">have</span> <span class="n">been</span>
                                           <span class="n">resolved</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="sharing">
<span id="sharing-commands-label"></span><h2>Sharing<a class="headerlink" href="#sharing" title="Permalink to this headline">¶</a></h2>
<p>This is an occ command to cleanup orphaned remote storages.
To explain why this is necessary, a little background is required.
While shares are able to be deleted as a normal matter of course, remote storages with “shared::” are not included in this process.</p>
<p>This might not, normally, be a problem.
However, if a user has re-shared a remote share which has been deleted it will.
This is because when the original share is deleted, the remote re-share reference is not.
Internally, the fileid will remain in the file cache and storage for that file will not be deleted.</p>
<p>As a result, any user(s) who the share was re-shared with will now get an error when trying to access that file or folder.
That’s why the command is available.</p>
<p>So, to cleanup all orphaned remote storages, run it as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">sharing</span><span class="p">:</span><span class="n">cleanup</span><span class="o">-</span><span class="n">remote</span><span class="o">-</span><span class="n">storages</span>
</pre></div>
</div>
<p>You can also set it up to run as <a class="reference internal" href="background_jobs_configuration.html#background-jobs-header"><span class="std std-ref">a background job</span></a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands are not available in <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user (maintenance) mode</span></a>.</p>
</div>
</div>
<div class="section" id="shibboleth-modes-enterprise-edition-only">
<span id="shibboleth-label"></span><h2>Shibboleth Modes (Enterprise Edition only)<a class="headerlink" href="#shibboleth-modes-enterprise-edition-only" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">shibboleth:mode</span></code> sets your Shibboleth mode to <code class="docutils literal notranslate"><span class="pre">notactive</span></code>,
<code class="docutils literal notranslate"><span class="pre">autoprovision</span></code>, or <code class="docutils literal notranslate"><span class="pre">ssoonly</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">shibboleth</span><span class="p">:</span><span class="n">mode</span> <span class="p">[</span><span class="n">mode</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands are only available when the “Shibboleth user backend” app
(<code class="docutils literal notranslate"><span class="pre">user_shibboleth</span></code>) is enabled.</p>
</div>
</div>
<div class="section" id="trashbin">
<span id="trashbin-label"></span><h2>Trashbin<a class="headerlink" href="#trashbin" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands are only available when the “Deleted files” app
(<code class="docutils literal notranslate"><span class="pre">files_trashbin</span></code>) is enabled.
These commands are not available in <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user (maintenance) mode</span></a>.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">trashbin</span>
 <span class="n">trashbin</span><span class="p">:</span><span class="n">cleanup</span>   <span class="n">Remove</span> <span class="n">deleted</span> <span class="n">files</span>
 <span class="n">trashbin</span><span class="p">:</span><span class="n">expire</span>    <span class="n">Expires</span> <span class="n">the</span> <span class="n">users</span> <span class="n">trash</span> <span class="nb">bin</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">trashbin:cleanup</span></code> command removes the deleted files of the specified users in a space-delimited list, or all users if none are specified.
This example removes all the deleted files of all users:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">trashbin</span><span class="p">:</span><span class="n">cleanup</span>
<span class="n">Remove</span> <span class="nb">all</span> <span class="n">deleted</span> <span class="n">files</span>
<span class="n">Remove</span> <span class="n">deleted</span> <span class="n">files</span> <span class="k">for</span> <span class="n">users</span> <span class="n">on</span> <span class="n">backend</span> <span class="n">Database</span>
 <span class="n">freda</span>
 <span class="n">molly</span>
 <span class="n">stash</span>
 <span class="n">rosa</span>
 <span class="n">edward</span>
</pre></div>
</div>
<p>This example removes the deleted files of users “”molly”” and “”freda”“:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">trashbin</span><span class="p">:</span><span class="n">cleanup</span> <span class="n">molly</span> <span class="n">freda</span>
<span class="n">Remove</span> <span class="n">deleted</span> <span class="n">files</span> <span class="n">of</span>   <span class="n">molly</span>
<span class="n">Remove</span> <span class="n">deleted</span> <span class="n">files</span> <span class="n">of</span>   <span class="n">freda</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">trashbin:expire</span></code> deletes only expired files according to the <code class="docutils literal notranslate"><span class="pre">trashbin_retention_obligation</span></code> setting in <code class="docutils literal notranslate"><span class="pre">config.php</span></code> (see the Deleted Files section in <a class="reference internal" href="config_sample_php_parameters.html"><span class="doc">Config.php Parameters</span></a>).
The default is to delete expired files for all users, or you may list users in a space-delimited list.</p>
</div>
<div class="section" id="user-commands">
<span id="user-commands-label"></span><h2>User Commands<a class="headerlink" href="#user-commands" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">user</span></code> commands provide a range of functionality for managing ownCloud users.
This includes: creating and removing users, resetting user passwords, displaying a report which shows how many users you have, and when a user was last logged in.</p>
<p>The full list, of commands is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span>
 <span class="n">user</span><span class="p">:</span><span class="n">add</span>                            <span class="n">Adds</span> <span class="n">a</span> <span class="n">user</span>
 <span class="n">user</span><span class="p">:</span><span class="n">delete</span>                         <span class="n">Deletes</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">user</span>
 <span class="n">user</span><span class="p">:</span><span class="n">disable</span>                        <span class="n">Disables</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">user</span>
 <span class="n">user</span><span class="p">:</span><span class="n">enable</span>                         <span class="n">Enables</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">user</span>
 <span class="n">user</span><span class="p">:</span><span class="n">inactive</span>                       <span class="n">Reports</span> <span class="n">users</span> <span class="n">who</span> <span class="n">are</span> <span class="n">known</span> <span class="n">to</span> <span class="n">owncloud</span><span class="p">,</span>
                                     <span class="n">but</span> <span class="n">have</span> <span class="ow">not</span> <span class="n">logged</span> <span class="ow">in</span> <span class="k">for</span> <span class="n">a</span> <span class="n">certain</span> <span class="n">number</span> <span class="n">of</span> <span class="n">days</span>
 <span class="n">user</span><span class="p">:</span><span class="n">lastseen</span>                       <span class="n">Shows</span> <span class="n">when</span> <span class="n">the</span> <span class="n">user</span> <span class="n">was</span> <span class="n">logged</span> <span class="ow">in</span> <span class="n">last</span> <span class="n">time</span>
 <span class="n">user</span><span class="p">:</span><span class="nb">list</span>                           <span class="n">List</span> <span class="n">users</span>
 <span class="n">user</span><span class="p">:</span><span class="nb">list</span><span class="o">-</span><span class="n">groups</span>                    <span class="n">List</span> <span class="n">groups</span> <span class="k">for</span> <span class="n">a</span> <span class="n">user</span>
 <span class="n">user</span><span class="p">:</span><span class="n">modify</span>                         <span class="n">Modify</span> <span class="n">user</span> <span class="n">details</span>
 <span class="n">user</span><span class="p">:</span><span class="n">report</span>                         <span class="n">Shows</span> <span class="n">how</span> <span class="n">many</span> <span class="n">users</span> <span class="n">have</span> <span class="n">access</span>
 <span class="n">user</span><span class="p">:</span><span class="n">resetpassword</span>                  <span class="n">Resets</span> <span class="n">the</span> <span class="n">password</span> <span class="n">of</span> <span class="n">the</span> <span class="n">named</span> <span class="n">user</span>
 <span class="n">user</span><span class="p">:</span><span class="n">setting</span>                        <span class="n">Read</span> <span class="ow">and</span> <span class="n">modify</span> <span class="n">user</span> <span class="n">application</span> <span class="n">settings</span>
 <span class="n">user</span><span class="p">:</span><span class="n">sync</span>                           <span class="n">Sync</span> <span class="n">local</span> <span class="n">users</span> <span class="k">with</span> <span class="n">an</span> <span class="n">external</span> <span class="n">backend</span> <span class="n">service</span>
</pre></div>
</div>
<div class="section" id="creating-users">
<h3>Creating Users<a class="headerlink" href="#creating-users" title="Permalink to this headline">¶</a></h3>
<p>You can create a new user with the <code class="docutils literal notranslate"><span class="pre">user:add</span></code> command.
This command lets you set the following attributes:</p>
<ul class="simple">
<li><strong>uid:</strong> The <code class="docutils literal notranslate"><span class="pre">uid</span></code> is the user’s username and their login name</li>
<li><strong>display name:</strong> This corresponds to the <strong>Full Name</strong> on the Users page in your ownCloud Web UI</li>
<li><strong>email address</strong></li>
<li><strong>group</strong></li>
<li><strong>login name</strong></li>
<li><strong>password</strong></li>
</ul>
<p>The command’s syntax is:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">user:add [--password-from-env] [--display-name [DISPLAY-NAME]] [--email [EMAIL]] [-g|--group [GROUP]] [--] &lt;uid&gt;</span>
</pre></div>
</div>
<p>This example adds new user Layla Smith, and adds her to the <strong>users</strong> and <strong>db-admins</strong> groups.
Any groups that do not exist are created.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">add</span> <span class="o">--</span><span class="n">display</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Layla Smith&quot;</span> \
  <span class="o">--</span><span class="n">group</span><span class="o">=</span><span class="s2">&quot;users&quot;</span> <span class="o">--</span><span class="n">group</span><span class="o">=</span><span class="s2">&quot;db-admins&quot;</span> <span class="o">--</span><span class="n">email</span><span class="o">=</span><span class="n">layla</span><span class="o">.</span><span class="n">smith</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span> <span class="n">layla</span>
  <span class="n">Enter</span> <span class="n">password</span><span class="p">:</span>
  <span class="n">Confirm</span> <span class="n">password</span><span class="p">:</span>
  <span class="n">The</span> <span class="n">user</span> <span class="s2">&quot;layla&quot;</span> <span class="n">was</span> <span class="n">created</span> <span class="n">successfully</span>
  <span class="n">Display</span> <span class="n">name</span> <span class="nb">set</span> <span class="n">to</span> <span class="s2">&quot;Layla Smith&quot;</span>
  <span class="n">Email</span> <span class="n">address</span> <span class="nb">set</span> <span class="n">to</span> <span class="s2">&quot;layla.smith@example.com&quot;</span>
  <span class="n">User</span> <span class="s2">&quot;layla&quot;</span> <span class="n">added</span> <span class="n">to</span> <span class="n">group</span> <span class="s2">&quot;users&quot;</span>
  <span class="n">User</span> <span class="s2">&quot;layla&quot;</span> <span class="n">added</span> <span class="n">to</span> <span class="n">group</span> <span class="s2">&quot;db-admins&quot;</span>
</pre></div>
</div>
<p>After the command completes, go to your Users page, and you will see your new user.</p>
</div>
<div class="section" id="setting-a-user-s-password">
<h3>Setting a User’s Password<a class="headerlink" href="#setting-a-user-s-password" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">password-from-env</span></code> allows you to set the user’s password from an environment variable.
This prevents the password from being exposed to all users via the process list, and will only be visible in the history of the user (root) running the command.
This also permits creating scripts for adding multiple new users.</p>
<p>To use <code class="docutils literal notranslate"><span class="pre">password-from-env</span></code> you must run as “real” root, rather than <code class="docutils literal notranslate"><span class="pre">sudo</span></code>, because <code class="docutils literal notranslate"><span class="pre">sudo</span></code> strips environment variables.
This example adds new user Fred Jones:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">OC_PASS</span><span class="o">=</span><span class="n">newpassword</span>
<span class="n">su</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">sh</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;php occ user:add --password-from-env</span>
  <span class="o">--</span><span class="n">display</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Fred Jones&quot;</span> <span class="o">--</span><span class="n">group</span><span class="o">=</span><span class="s2">&quot;users&quot;</span> <span class="n">fred</span><span class="s1">&#39;</span>
<span class="n">The</span> <span class="n">user</span> <span class="s2">&quot;fred&quot;</span> <span class="n">was</span> <span class="n">created</span> <span class="n">successfully</span>
<span class="n">Display</span> <span class="n">name</span> <span class="nb">set</span> <span class="n">to</span> <span class="s2">&quot;Fred Jones&quot;</span>
<span class="n">User</span> <span class="s2">&quot;fred&quot;</span> <span class="n">added</span> <span class="n">to</span> <span class="n">group</span> <span class="s2">&quot;users&quot;</span>
</pre></div>
</div>
<p>You can reset any user’s password, including administrators (see <a class="reference internal" href="../user/reset_admin_password.html"><span class="doc">Resetting a Lost Admin Password</span></a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">resetpassword</span> <span class="n">layla</span>
  <span class="n">Enter</span> <span class="n">a</span> <span class="n">new</span> <span class="n">password</span><span class="p">:</span>
  <span class="n">Confirm</span> <span class="n">the</span> <span class="n">new</span> <span class="n">password</span><span class="p">:</span>
  <span class="n">Successfully</span> <span class="n">reset</span> <span class="n">password</span> <span class="k">for</span> <span class="n">layla</span>
</pre></div>
</div>
<p>You may also use <code class="docutils literal notranslate"><span class="pre">password-from-env</span></code> to reset passwords:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">OC_PASS</span><span class="o">=</span><span class="n">newpassword</span>
<span class="n">su</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">sh</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;php occ user:resetpassword --password-from-env</span>
  <span class="n">layla</span><span class="s1">&#39;</span>
  <span class="n">Successfully</span> <span class="n">reset</span> <span class="n">password</span> <span class="k">for</span> <span class="n">layla</span>
</pre></div>
</div>
</div>
<div class="section" id="deleting-a-user">
<h3>Deleting A User<a class="headerlink" href="#deleting-a-user" title="Permalink to this headline">¶</a></h3>
<p>To delete a user, you use the <code class="docutils literal notranslate"><span class="pre">user:delete</span></code> command, as in the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">delete</span> <span class="n">fred</span>
</pre></div>
</div>
</div>
<div class="section" id="listing-users">
<h3>Listing Users<a class="headerlink" href="#listing-users" title="Permalink to this headline">¶</a></h3>
<p>You can list existing users with the <code class="docutils literal notranslate"><span class="pre">user:list</span></code> command.
The syntax is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span><span class="p">:</span><span class="nb">list</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">search</span><span class="o">-</span><span class="n">pattern</span><span class="o">&gt;</span><span class="p">]</span>
</pre></div>
</div>
<p>User IDs containing the <code class="docutils literal notranslate"><span class="pre">search-pattern</span></code> string are listed. Matching is
not case-sensitive. If you do not provide a search-pattern then all users
are listed.</p>
<p>This example lists user IDs containing the string ron:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="nb">list</span> <span class="n">ron</span>
 <span class="o">-</span> <span class="n">aaron</span><span class="p">:</span> <span class="n">Aaron</span> <span class="n">Smith</span>
</pre></div>
</div>
<p>The output can be formatted in JSON with the output option <code class="docutils literal notranslate"><span class="pre">json</span></code> or <code class="docutils literal notranslate"><span class="pre">json_pretty</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="o">--</span><span class="n">output</span><span class="o">=</span><span class="n">json_pretty</span> <span class="n">user</span><span class="p">:</span><span class="nb">list</span>
 <span class="p">{</span>
   <span class="s2">&quot;aaron&quot;</span><span class="p">:</span> <span class="s2">&quot;Aaron Smith&quot;</span><span class="p">,</span>
   <span class="s2">&quot;herbert&quot;</span><span class="p">:</span> <span class="s2">&quot;Herbert Smith&quot;</span><span class="p">,</span>
   <span class="s2">&quot;julie&quot;</span><span class="p">:</span> <span class="s2">&quot;Julie Jones&quot;</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="listing-group-membership-of-a-user">
<h3>Listing Group Membership of a User<a class="headerlink" href="#listing-group-membership-of-a-user" title="Permalink to this headline">¶</a></h3>
<p>You can list the group membership of a user with the <code class="docutils literal notranslate"><span class="pre">user:list-groups</span></code> command.
The syntax is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span><span class="p">:</span><span class="nb">list</span><span class="o">-</span><span class="n">groups</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">uid</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>This example lists group membership of user julie:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="nb">list</span><span class="o">-</span><span class="n">groups</span> <span class="n">julie</span>
 <span class="o">-</span> <span class="n">Executive</span>
 <span class="o">-</span> <span class="n">Finance</span>
</pre></div>
</div>
<p>The output can be formatted in JSON with the output option <code class="docutils literal notranslate"><span class="pre">json</span></code> or <code class="docutils literal notranslate"><span class="pre">json_pretty</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="o">--</span><span class="n">output</span><span class="o">=</span><span class="n">json_pretty</span> <span class="n">user</span><span class="p">:</span><span class="nb">list</span><span class="o">-</span><span class="n">groups</span> <span class="n">julie</span>
 <span class="p">[</span>
   <span class="s2">&quot;Executive&quot;</span><span class="p">,</span>
   <span class="s2">&quot;Finance&quot;</span>
 <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="finding-the-user-s-last-login">
<h3>Finding The User’s Last Login<a class="headerlink" href="#finding-the-user-s-last-login" title="Permalink to this headline">¶</a></h3>
<p>To view a user’s most recent login, use the <code class="docutils literal notranslate"><span class="pre">user:lastseen</span></code> command, as in the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">lastseen</span> <span class="n">layla</span>
  <span class="n">layla</span><span class="s1">&#39;s last login: 09.01.2015 18:46</span>
</pre></div>
</div>
</div>
<div class="section" id="user-application-settings">
<h3>User Application Settings<a class="headerlink" href="#user-application-settings" title="Permalink to this headline">¶</a></h3>
<p>To manage application settings for a user, use the <code class="docutils literal notranslate"><span class="pre">user:setting</span></code> command.
This command provides the ability to:</p>
<ul class="simple">
<li>Retrieve all settings for an application</li>
<li>Retrieve a single setting</li>
<li>Set a setting value</li>
<li>Delete a setting</li>
</ul>
<p>If you run the command and pass the help switch (<code class="docutils literal notranslate"><span class="pre">--help</span></code>), you will see the following output, in your terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./occ user:setting --help
Usage:
  user:setting [options] [--] &lt;uid&gt; [&lt;app&gt;] [&lt;key&gt;]

Arguments:
  uid                                User ID used to login
  app                                Restrict the settings to a given app [default: &quot;&quot;]
  key                                Setting key to set, get or delete [default: &quot;&quot;]
</pre></div>
</div>
<p>If you’re new to the <code class="docutils literal notranslate"><span class="pre">user:setting</span></code> command, the descriptions for the <code class="docutils literal notranslate"><span class="pre">app</span></code> and <code class="docutils literal notranslate"><span class="pre">key</span></code> arguments may not be completely transparent.
So, here’s a lengthier description of both.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>app</td>
<td>When an value is supplied, <code class="docutils literal notranslate"><span class="pre">user:setting</span></code> limits the settings
displayed, to those for that, specific, application — assuming that
the application is installed, and that there are settings available
for it. Some example applications are “core”, “files_trashbin”, and
“user_ldap”. A complete list, unfortunately, cannot be supplied, as it
is impossible to know the entire list of applications which a user
could, potentially, install.</td>
</tr>
<tr class="row-odd"><td>key</td>
<td>This value specifies the setting key to be manipulated (set,
retrieved, or deleted) by the <code class="docutils literal notranslate"><span class="pre">user:setting</span></code> command.</td>
</tr>
</tbody>
</table>
<div class="section" id="retrieving-user-settings">
<h4>Retrieving User Settings<a class="headerlink" href="#retrieving-user-settings" title="Permalink to this headline">¶</a></h4>
<p>To retrieve all settings for a user, you need to call the <code class="docutils literal notranslate"><span class="pre">user:setting</span></code> command and supply the user’s username, as in the example below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">setting</span> <span class="n">layla</span>
  <span class="o">-</span> <span class="n">core</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">lang</span><span class="p">:</span> <span class="n">en</span>
  <span class="o">-</span> <span class="n">login</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">lastLogin</span><span class="p">:</span> <span class="mi">1465910968</span>
  <span class="o">-</span> <span class="n">settings</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">email</span><span class="p">:</span> <span class="n">layla</span><span class="nd">@example</span><span class="o">.</span><span class="n">tld</span>
</pre></div>
</div>
<p>Here, we see that the user has settings for the application <code class="docutils literal notranslate"><span class="pre">core</span></code>, when they last logged in, and what their email address is.</p>
<p>To retrieve the user’s settings for a specific application, you have to supply the username and the application’s name, which you want to retrieve the settings for; such as in the example below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">setting</span> <span class="n">layla</span> <span class="n">core</span>
 <span class="o">-</span> <span class="n">core</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">lang</span><span class="p">:</span> <span class="n">en</span>
</pre></div>
</div>
<p>In the output, you can see that one setting is in effect, <code class="docutils literal notranslate"><span class="pre">lang</span></code>, which is set to <code class="docutils literal notranslate"><span class="pre">en</span></code>.
To retrieve the value of a single application for a user, use the <code class="docutils literal notranslate"><span class="pre">user:setting</span></code> command, as in the example below.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">setting</span> <span class="n">layla</span> <span class="n">core</span> <span class="n">lang</span>
</pre></div>
</div>
<p>This will display the value for that setting, such as <code class="docutils literal notranslate"><span class="pre">en</span></code>.</p>
</div>
<div class="section" id="setting-a-setting">
<h4>Setting a Setting<a class="headerlink" href="#setting-a-setting" title="Permalink to this headline">¶</a></h4>
<p>To set a setting, you need to supply four things; these are:</p>
<ul class="simple">
<li>the username</li>
<li>the application (or setting category)</li>
<li>the <code class="docutils literal notranslate"><span class="pre">--value</span></code> switch</li>
<li>the, quoted, value for that setting</li>
</ul>
<p>Here’s an example of how you would set the email address of the user <code class="docutils literal notranslate"><span class="pre">layla</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">setting</span> <span class="n">layla</span> <span class="n">settings</span> <span class="n">email</span> <span class="o">--</span><span class="n">value</span> <span class="s2">&quot;new-layla@example.tld&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="deleting-a-setting">
<h4>Deleting a Setting<a class="headerlink" href="#deleting-a-setting" title="Permalink to this headline">¶</a></h4>
<p>Deleting a setting is quite similar to setting a setting.
In this case, you supply the username, application (or setting category) and key as above.
Then, in addition, you supply the <code class="docutils literal notranslate"><span class="pre">--delete</span></code> flag.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">setting</span> <span class="n">layla</span> <span class="n">settings</span> <span class="n">email</span> <span class="o">--</span><span class="n">delete</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="modify-user-details">
<h3>Modify user details<a class="headerlink" href="#modify-user-details" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 10.0.8.</span></p>
</div>
<p>This command modifies either the users username or email address.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span><span class="p">:</span><span class="n">modify</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">uid</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span>

<span class="n">Arguments</span><span class="p">:</span>
  <span class="n">uid</span>                    <span class="n">User</span> <span class="n">ID</span> <span class="n">used</span> <span class="n">to</span> <span class="n">login</span>
  <span class="n">key</span>                    <span class="n">Key</span> <span class="n">to</span> <span class="n">be</span> <span class="n">changed</span><span class="o">.</span> <span class="n">Valid</span> <span class="n">keys</span> <span class="n">are</span><span class="p">:</span> <span class="n">displayname</span><span class="p">,</span> <span class="n">email</span>
  <span class="n">value</span>                  <span class="n">The</span> <span class="n">new</span> <span class="n">value</span> <span class="n">of</span> <span class="n">the</span> <span class="n">key</span>
</pre></div>
</div>
<p>All three arguments are mandatory and can not be empty.</p>
<p>Example to set the email address:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">modify</span> <span class="n">carla</span> <span class="n">email</span> <span class="n">foobar</span><span class="nd">@foo</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>The email address of <code class="docutils literal notranslate"><span class="pre">carla</span></code> is updated to <code class="docutils literal notranslate"><span class="pre">foobar&#64;foo.com</span></code></p>
</div>
<div class="section" id="generating-a-user-count-report">
<h3>Generating a User Count Report<a class="headerlink" href="#generating-a-user-count-report" title="Permalink to this headline">¶</a></h3>
<p>Generate a simple report that counts all users, including users on external user authentication servers such as LDAP.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">report</span>
<span class="o">+------------------+----+</span>
<span class="o">|</span> <span class="n">User</span> <span class="n">Report</span>      <span class="o">|</span>    <span class="o">|</span>
<span class="o">+------------------+----+</span>
<span class="o">|</span> <span class="n">Database</span>         <span class="o">|</span> <span class="mi">12</span> <span class="o">|</span>
<span class="o">|</span> <span class="n">LDAP</span>             <span class="o">|</span> <span class="mi">86</span> <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">total</span> <span class="n">users</span>      <span class="o">|</span> <span class="mi">98</span> <span class="o">|</span>
<span class="o">|</span>                  <span class="o">|</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">user</span> <span class="n">directories</span> <span class="o">|</span> <span class="mi">2</span>  <span class="o">|</span>
<span class="o">+------------------+----+</span>
</pre></div>
</div>
</div>
<div class="section" id="syncing-user-accounts">
<span id="syncing-user-accounts-label"></span><h3>Syncing User Accounts<a class="headerlink" href="#syncing-user-accounts" title="Permalink to this headline">¶</a></h3>
<p>This command syncs users stored in external backend services, such as <em>LDAP</em>, <em>Shibboleth</em>, and <em>Samba</em>, with ownCloud’s, internal, user database.
However, it’s not essential to run it regularly, unless you have a large number of users whose account properties have changed in a backend outside of ownCloud.
When run, it will pick up changes from alternative user backends, such as LDAP where properties like <code class="docutils literal notranslate"><span class="pre">cn</span></code> or <code class="docutils literal notranslate"><span class="pre">display</span> <span class="pre">name</span></code> have changed, and sync them with ownCloud’s user database.
If accounts are found that no longer exist in the external backend, you are given the choice of either removing or disabling the accounts.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It’s also <a class="reference internal" href="background_jobs_configuration.html#available-background-jobs-label"><span class="std std-ref">one of the commands</span></a> that you should run on a regular basis to ensure that your ownCloud installation is running optimally.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This command replaces the old <code class="docutils literal notranslate"><span class="pre">show-remnants</span></code> functionality, and brings the LDAP feature more in line with the rest of ownCloud’s functionality.</p>
</div>
<p>Below are examples of how to use the command with an <em>LDAP</em>, <em>Samba</em>, and <em>Shibboleth</em> backend.</p>
<div class="section" id="ldap">
<h4>LDAP<a class="headerlink" href="#ldap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="o">./</span><span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">sync</span> <span class="s2">&quot;OCA\User_LDAP\User_Proxy&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="samba">
<h4>Samba<a class="headerlink" href="#samba" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="o">./</span><span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">sync</span> <span class="s2">&quot;OCA\User\SMB&quot;</span> <span class="o">-</span><span class="n">vvv</span>
</pre></div>
</div>
</div>
<div class="section" id="shibboleth">
<h4>Shibboleth<a class="headerlink" href="#shibboleth" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="o">./</span><span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">sync</span> <span class="s2">&quot;OCA\User_Shibboleth\UserBackend&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="syncing-via-cron-job">
<h4>Syncing via cron job<a class="headerlink" href="#syncing-via-cron-job" title="Permalink to this headline">¶</a></h4>
<p>Here is an example for syncing with LDAP four times a day on Ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">crontab</span> <span class="o">-</span><span class="n">e</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span>

<span class="o">*</span> <span class="o">*/</span><span class="mi">6</span> <span class="o">*</span> <span class="o">*</span> <span class="o">*</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">php</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">owncloud</span><span class="o">/</span><span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">sync</span> <span class="o">-</span><span class="n">vvv</span> <span class="o">--</span><span class="n">missing</span><span class="o">-</span><span class="n">account</span><span class="o">-</span><span class="n">action</span><span class="o">=</span><span class="s2">&quot;disable&quot;</span> <span class="o">-</span><span class="n">n</span> <span class="s2">&quot;OCA\User_LDAP\User_Proxy&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="versions">
<span id="versions-label"></span><h2>Versions<a class="headerlink" href="#versions" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">versions</span>
 <span class="n">versions</span><span class="p">:</span><span class="n">cleanup</span>   <span class="n">Delete</span> <span class="n">versions</span>
 <span class="n">versions</span><span class="p">:</span><span class="n">expire</span>    <span class="n">Expires</span> <span class="n">the</span> <span class="n">users</span> <span class="n">file</span> <span class="n">versions</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">versions:cleanup</span></code> can delete all versioned files, as well as the <code class="docutils literal notranslate"><span class="pre">files_versions</span></code> folder, for either specific users, or for all users.
The example below deletes all versioned files for all users:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">versions</span><span class="p">:</span><span class="n">cleanup</span>
<span class="n">Delete</span> <span class="nb">all</span> <span class="n">versions</span>
<span class="n">Delete</span> <span class="n">versions</span> <span class="k">for</span> <span class="n">users</span> <span class="n">on</span> <span class="n">backend</span> <span class="n">Database</span>
  <span class="n">freda</span>
  <span class="n">molly</span>
  <span class="n">stash</span>
  <span class="n">rosa</span>
  <span class="n">edward</span>
</pre></div>
</div>
<p>You can delete versions for specific users in a space-delimited list:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">versions</span><span class="p">:</span><span class="n">cleanup</span> <span class="n">freda</span> <span class="n">molly</span>
<span class="n">Delete</span> <span class="n">versions</span> <span class="n">of</span>   <span class="n">freda</span>
<span class="n">Delete</span> <span class="n">versions</span> <span class="n">of</span>   <span class="n">molly</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">versions:expire</span></code> deletes only expired files according to the <code class="docutils literal notranslate"><span class="pre">versions_retention_obligation</span></code> setting in <code class="docutils literal notranslate"><span class="pre">config.php</span></code> (see the File versions section in <a class="reference internal" href="config_sample_php_parameters.html"><span class="doc">Config.php Parameters</span></a>).
The default is to delete expired files for all users, or you may list users in a space-delimited list.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These commands are only available when the “Versions” app (<code class="docutils literal notranslate"><span class="pre">files_versions</span></code>) is
enabled.
These commands are not available in <a class="reference internal" href="#maintenance-commands-label"><span class="std std-ref">single-user (maintenance) mode</span></a>.</p>
</div>
</div>
<div class="section" id="command-line-installation">
<span id="command-line-installation-label"></span><h2>Command Line Installation<a class="headerlink" href="#command-line-installation" title="Permalink to this headline">¶</a></h2>
<p>ownCloud can be installed entirely from the command line.
After downloading the tarball and copying ownCloud into the appropriate directories, or after installing ownCloud packages (See <a class="reference internal" href="../../installation/linux_installation.html"><span class="doc">Linux Package Manager Installation</span></a> and <a class="reference internal" href="../../installation/source_installation.html"><span class="doc">Manual Installation on Linux</span></a>) you can use <code class="docutils literal notranslate"><span class="pre">occ</span></code> commands in place of running the graphical Installation Wizard.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These instructions assume that you have a fully working and configured webserver. If not, please refer to the documentation on <a class="reference internal" href="../../installation/source_installation.html#apache-configuration-label"><span class="std std-ref">configuring the Apache web server</span></a> for detailed instructions.</p>
</div>
<p>Apply correct permissions to your ownCloud directories; see <a class="reference internal" href="../../installation/source_installation.html#strong-perms-label"><span class="std std-ref">Set Strong Directory Permissions</span></a>.
Then choose your <code class="docutils literal notranslate"><span class="pre">occ</span></code> options.
This lists your available options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">owncloud</span><span class="o">/</span><span class="n">occ</span>
<span class="n">ownCloud</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">installed</span> <span class="o">-</span> <span class="n">only</span> <span class="n">a</span> <span class="n">limited</span> <span class="n">number</span> <span class="n">of</span> <span class="n">commands</span> <span class="n">are</span> <span class="n">available</span>
<span class="n">ownCloud</span> <span class="n">version</span> <span class="mf">9.0</span><span class="o">.</span><span class="mi">0</span>

<span class="n">Usage</span><span class="p">:</span>
 <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="n">command</span> <span class="p">[</span><span class="n">arguments</span><span class="p">]</span>

<span class="n">Options</span><span class="p">:</span>
 <span class="o">--</span><span class="n">help</span> <span class="p">(</span><span class="o">-</span><span class="n">h</span><span class="p">)</span>           <span class="n">Display</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span>
 <span class="o">--</span><span class="n">quiet</span> <span class="p">(</span><span class="o">-</span><span class="n">q</span><span class="p">)</span>          <span class="n">Do</span> <span class="ow">not</span> <span class="n">output</span> <span class="nb">any</span> <span class="n">message</span>
 <span class="o">--</span><span class="n">verbose</span> <span class="p">(</span><span class="o">-</span><span class="n">v</span><span class="o">|</span><span class="n">vv</span><span class="o">|</span><span class="n">vvv</span><span class="p">)</span> <span class="n">Increase</span> <span class="n">the</span> <span class="n">verbosity</span> <span class="n">of</span> <span class="n">messages</span><span class="p">:</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">normal</span>
 <span class="n">output</span><span class="p">,</span>  <span class="mi">2</span> <span class="k">for</span> <span class="n">more</span> <span class="n">verbose</span> <span class="n">output</span> <span class="ow">and</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">debug</span>
 <span class="o">--</span><span class="n">version</span> <span class="p">(</span><span class="o">-</span><span class="n">V</span><span class="p">)</span>        <span class="n">Display</span> <span class="n">this</span> <span class="n">application</span> <span class="n">version</span>
 <span class="o">--</span><span class="n">ansi</span>                <span class="n">Force</span> <span class="n">ANSI</span> <span class="n">output</span>
 <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">ansi</span>             <span class="n">Disable</span> <span class="n">ANSI</span> <span class="n">output</span>
 <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">interaction</span> <span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="p">)</span> <span class="n">Do</span> <span class="ow">not</span> <span class="n">ask</span> <span class="nb">any</span> <span class="n">interactive</span> <span class="n">question</span>

<span class="n">Available</span> <span class="n">commands</span><span class="p">:</span>
 <span class="n">check</span>                 <span class="n">check</span> <span class="n">dependencies</span> <span class="n">of</span> <span class="n">the</span> <span class="n">server</span> <span class="n">environment</span>
 <span class="n">help</span>                  <span class="n">Displays</span> <span class="n">help</span> <span class="k">for</span> <span class="n">a</span> <span class="n">command</span>
 <span class="nb">list</span>                  <span class="n">Lists</span> <span class="n">commands</span>
 <span class="n">status</span>                <span class="n">show</span> <span class="n">some</span> <span class="n">status</span> <span class="n">information</span>
 <span class="n">app</span>
 <span class="n">app</span><span class="p">:</span><span class="n">check</span><span class="o">-</span><span class="n">code</span>        <span class="n">check</span> <span class="n">code</span> <span class="n">to</span> <span class="n">be</span> <span class="n">compliant</span>
 <span class="n">l10n</span>
 <span class="n">l10n</span><span class="p">:</span><span class="n">createjs</span>         <span class="n">Create</span> <span class="n">javascript</span> <span class="n">translation</span> <span class="n">files</span> <span class="k">for</span> <span class="n">a</span> <span class="n">given</span> <span class="n">app</span>
 <span class="n">maintenance</span>
 <span class="n">maintenance</span><span class="p">:</span><span class="n">install</span>   <span class="n">install</span> <span class="n">ownCloud</span>
</pre></div>
</div>
<p>Display your <code class="docutils literal notranslate"><span class="pre">maintenance:install</span></code> options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">help</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">install</span>
<span class="n">ownCloud</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">installed</span> <span class="o">-</span> <span class="n">only</span> <span class="n">a</span> <span class="n">limited</span> <span class="n">number</span> <span class="n">of</span> <span class="n">commands</span> <span class="n">are</span> <span class="n">available</span>
<span class="n">Usage</span><span class="p">:</span>
 <span class="n">maintenance</span><span class="p">:</span><span class="n">install</span> <span class="p">[</span><span class="o">--</span><span class="n">database</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]</span>
<span class="p">[</span><span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="n">host</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="k">pass</span><span class="p">[</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]]</span>
<span class="p">[</span><span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="n">table</span><span class="o">-</span><span class="n">prefix</span><span class="p">[</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]]</span> <span class="p">[</span><span class="o">--</span><span class="n">admin</span><span class="o">-</span><span class="n">user</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">admin</span><span class="o">-</span><span class="k">pass</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]</span>
<span class="p">[</span><span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="nb">dir</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">]</span>

<span class="n">Options</span><span class="p">:</span>
 <span class="o">--</span><span class="n">database</span>               <span class="n">Supported</span> <span class="n">database</span> <span class="nb">type</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="s2">&quot;sqlite&quot;</span><span class="p">)</span>
 <span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="n">name</span>          <span class="n">Name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">database</span>
 <span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="n">host</span>          <span class="n">Hostname</span> <span class="n">of</span> <span class="n">the</span> <span class="n">database</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">)</span>
 <span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="n">user</span>          <span class="n">User</span> <span class="n">name</span> <span class="n">to</span> <span class="n">connect</span> <span class="n">to</span> <span class="n">the</span> <span class="n">database</span>
 <span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="k">pass</span>          <span class="n">Password</span> <span class="n">of</span> <span class="n">the</span> <span class="n">database</span> <span class="n">user</span>
 <span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="n">table</span><span class="o">-</span><span class="n">prefix</span>  <span class="n">Prefix</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">tables</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="n">oc_</span><span class="p">)</span>
 <span class="o">--</span><span class="n">admin</span><span class="o">-</span><span class="n">user</span>             <span class="n">User</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">admin</span> <span class="n">account</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">)</span>
 <span class="o">--</span><span class="n">admin</span><span class="o">-</span><span class="k">pass</span>             <span class="n">Password</span> <span class="n">of</span> <span class="n">the</span> <span class="n">admin</span> <span class="n">account</span>
 <span class="o">--</span><span class="n">data</span><span class="o">-</span><span class="nb">dir</span>               <span class="n">Path</span> <span class="n">to</span> <span class="n">data</span> <span class="n">directory</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span>
                          <span class="s2">&quot;/var/www/owncloud/data&quot;</span><span class="p">)</span>
 <span class="o">--</span><span class="n">help</span> <span class="p">(</span><span class="o">-</span><span class="n">h</span><span class="p">)</span>              <span class="n">Display</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span>
 <span class="o">--</span><span class="n">quiet</span> <span class="p">(</span><span class="o">-</span><span class="n">q</span><span class="p">)</span>             <span class="n">Do</span> <span class="ow">not</span> <span class="n">output</span> <span class="nb">any</span> <span class="n">message</span>
 <span class="o">--</span><span class="n">verbose</span> <span class="p">(</span><span class="o">-</span><span class="n">v</span><span class="o">|</span><span class="n">vv</span><span class="o">|</span><span class="n">vvv</span><span class="p">)</span>    <span class="n">Increase</span> <span class="n">the</span> <span class="n">verbosity</span> <span class="n">of</span> <span class="n">messages</span><span class="p">:</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">normal</span>
  <span class="n">output</span><span class="p">,</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">more</span> <span class="n">verbose</span> <span class="n">output</span> <span class="ow">and</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">debug</span>
 <span class="o">--</span><span class="n">version</span> <span class="p">(</span><span class="o">-</span><span class="n">V</span><span class="p">)</span>           <span class="n">Display</span> <span class="n">this</span> <span class="n">application</span> <span class="n">version</span>
 <span class="o">--</span><span class="n">ansi</span>                   <span class="n">Force</span> <span class="n">ANSI</span> <span class="n">output</span>
 <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">ansi</span>                <span class="n">Disable</span> <span class="n">ANSI</span> <span class="n">output</span>
 <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">interaction</span> <span class="p">(</span><span class="o">-</span><span class="n">n</span><span class="p">)</span>    <span class="n">Do</span> <span class="ow">not</span> <span class="n">ask</span> <span class="nb">any</span> <span class="n">interactive</span> <span class="n">question</span>
</pre></div>
</div>
<p>This example completes the installation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">owncloud</span><span class="o">/</span>
<span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">maintenance</span><span class="p">:</span><span class="n">install</span> <span class="o">--</span><span class="n">database</span>
<span class="s2">&quot;mysql&quot;</span> <span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="n">name</span> <span class="s2">&quot;owncloud&quot;</span>  <span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="n">user</span> <span class="s2">&quot;root&quot;</span> <span class="o">--</span><span class="n">database</span><span class="o">-</span><span class="k">pass</span>
<span class="s2">&quot;password&quot;</span> <span class="o">--</span><span class="n">admin</span><span class="o">-</span><span class="n">user</span> <span class="s2">&quot;admin&quot;</span> <span class="o">--</span><span class="n">admin</span><span class="o">-</span><span class="k">pass</span> <span class="s2">&quot;password&quot;</span>
<span class="n">ownCloud</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">installed</span> <span class="o">-</span> <span class="n">only</span> <span class="n">a</span> <span class="n">limited</span> <span class="n">number</span> <span class="n">of</span> <span class="n">commands</span> <span class="n">are</span> <span class="n">available</span>
<span class="n">ownCloud</span> <span class="n">was</span> <span class="n">successfully</span> <span class="n">installed</span>
</pre></div>
</div>
<p>Supported databases are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">sqlite</span> <span class="p">(</span><span class="n">SQLite3</span> <span class="o">-</span> <span class="n">ownCloud</span> <span class="n">Community</span> <span class="n">edition</span> <span class="n">only</span><span class="p">)</span>
<span class="o">-</span> <span class="n">mysql</span> <span class="p">(</span><span class="n">MySQL</span><span class="o">/</span><span class="n">MariaDB</span><span class="p">)</span>
<span class="o">-</span> <span class="n">pgsql</span> <span class="p">(</span><span class="n">PostgreSQL</span><span class="p">)</span>
<span class="o">-</span> <span class="n">oci</span> <span class="p">(</span><span class="n">Oracle</span> <span class="o">-</span> <span class="n">ownCloud</span> <span class="n">Enterprise</span> <span class="n">edition</span> <span class="n">only</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="command-line-upgrade">
<span id="command-line-upgrade-label"></span><h2>Command Line Upgrade<a class="headerlink" href="#command-line-upgrade" title="Permalink to this headline">¶</a></h2>
<p>These commands are available only after you have downloaded upgraded packages or tar archives, and before you complete the upgrade.
List all options, like this example on CentOS Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">upgrade</span> <span class="o">-</span><span class="n">h</span>
<span class="n">Usage</span><span class="p">:</span>
 <span class="n">upgrade</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span>

<span class="n">Options</span><span class="p">:</span>
     <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">app</span><span class="o">-</span><span class="n">disable</span>  <span class="n">skips</span> <span class="n">the</span> <span class="n">disable</span> <span class="n">of</span> <span class="n">third</span> <span class="n">party</span> <span class="n">apps</span>
 <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">Display</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span>
 <span class="o">-</span><span class="n">q</span><span class="p">,</span> <span class="o">--</span><span class="n">quiet</span>           <span class="n">Do</span> <span class="ow">not</span> <span class="n">output</span> <span class="nb">any</span> <span class="n">message</span>
 <span class="o">-</span><span class="n">V</span><span class="p">,</span> <span class="o">--</span><span class="n">version</span>         <span class="n">Display</span> <span class="n">this</span> <span class="n">application</span> <span class="n">version</span>
     <span class="o">--</span><span class="n">ansi</span>            <span class="n">Force</span> <span class="n">ANSI</span> <span class="n">output</span>
     <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">ansi</span>         <span class="n">Disable</span> <span class="n">ANSI</span> <span class="n">output</span>
 <span class="o">-</span><span class="n">n</span><span class="p">,</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">interaction</span>  <span class="n">Do</span> <span class="ow">not</span> <span class="n">ask</span> <span class="nb">any</span> <span class="n">interactive</span> <span class="n">question</span>
     <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">warnings</span>     <span class="n">Skip</span> <span class="k">global</span> <span class="n">warnings</span><span class="p">,</span> <span class="n">show</span> <span class="n">command</span> <span class="n">output</span> <span class="n">only</span>
 <span class="o">-</span><span class="n">v</span><span class="o">|</span><span class="n">vv</span><span class="o">|</span><span class="n">vvv</span><span class="p">,</span> <span class="o">--</span><span class="n">verbose</span>  <span class="n">Increase</span> <span class="n">the</span> <span class="n">verbosity</span> <span class="n">of</span> <span class="n">messages</span><span class="p">:</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">normal</span> <span class="n">output</span><span class="p">,</span> <span class="mi">2</span> <span class="k">for</span> <span class="n">more</span> <span class="n">verbose</span> <span class="n">output</span> <span class="ow">and</span> <span class="mi">3</span> <span class="k">for</span> <span class="n">debug</span>

<span class="n">Help</span><span class="p">:</span>
 <span class="n">run</span> <span class="n">upgrade</span> <span class="n">routines</span> <span class="n">after</span> <span class="n">installation</span> <span class="n">of</span> <span class="n">a</span> <span class="n">new</span> <span class="n">release</span><span class="o">.</span> <span class="n">The</span> <span class="n">release</span> <span class="n">has</span> <span class="n">to</span> <span class="n">be</span> <span class="n">installed</span> <span class="n">before</span><span class="o">.</span>
</pre></div>
</div>
<p>When you are performing an update or upgrade on your ownCloud server (see the Maintenance section of this manual), it is better to use <code class="docutils literal notranslate"><span class="pre">occ</span></code> to perform the database upgrade step, rather than the Web GUI, in order to avoid timeouts.
PHP scripts invoked from the Web interface are limited to 3600 seconds.
In larger environments this may not be enough, leaving the system in an inconsistent
state.
After performing all the preliminary steps (see <a class="reference internal" href="../../maintenance/upgrade.html"><span class="doc">How to Upgrade Your ownCloud Server</span></a>) use this command to upgrade your databases, like this example on CentOS Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">upgrade</span>
<span class="n">ownCloud</span> <span class="ow">or</span> <span class="n">one</span> <span class="n">of</span> <span class="n">the</span> <span class="n">apps</span> <span class="n">require</span> <span class="n">upgrade</span> <span class="o">-</span> <span class="n">only</span> <span class="n">a</span> <span class="n">limited</span> <span class="n">number</span> <span class="n">of</span>
<span class="n">commands</span> <span class="n">are</span> <span class="n">available</span>
<span class="n">Turned</span> <span class="n">on</span> <span class="n">maintenance</span> <span class="n">mode</span>
<span class="n">Checked</span> <span class="n">database</span> <span class="n">schema</span> <span class="n">update</span>
<span class="n">Checked</span> <span class="n">database</span> <span class="n">schema</span> <span class="n">update</span> <span class="k">for</span> <span class="n">apps</span>
<span class="n">Updated</span> <span class="n">database</span>
<span class="n">Updating</span> <span class="o">&lt;</span><span class="n">gallery</span><span class="o">&gt;</span> <span class="o">...</span>
<span class="n">Updated</span> <span class="o">&lt;</span><span class="n">gallery</span><span class="o">&gt;</span> <span class="n">to</span> <span class="mf">0.6</span><span class="o">.</span><span class="mi">1</span>
<span class="n">Updating</span> <span class="o">&lt;</span><span class="n">activity</span><span class="o">&gt;</span> <span class="o">...</span>
<span class="n">Updated</span> <span class="o">&lt;</span><span class="n">activity</span><span class="o">&gt;</span> <span class="n">to</span> <span class="mf">2.1</span><span class="o">.</span><span class="mi">0</span>
<span class="n">Update</span> <span class="n">successful</span>
<span class="n">Turned</span> <span class="n">off</span> <span class="n">maintenance</span> <span class="n">mode</span>
</pre></div>
</div>
<p>Note how it details the steps.
Enabling verbosity displays timestamps:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">upgrade</span> <span class="o">-</span><span class="n">v</span>
<span class="n">ownCloud</span> <span class="ow">or</span> <span class="n">one</span> <span class="n">of</span> <span class="n">the</span> <span class="n">apps</span> <span class="n">require</span> <span class="n">upgrade</span> <span class="o">-</span> <span class="n">only</span> <span class="n">a</span> <span class="n">limited</span> <span class="n">number</span> <span class="n">of</span> <span class="n">commands</span> <span class="n">are</span> <span class="n">available</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">23</span><span class="n">T09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">15</span><span class="o">+</span><span class="mi">0000</span> <span class="n">Turned</span> <span class="n">on</span> <span class="n">maintenance</span> <span class="n">mode</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">23</span><span class="n">T09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">15</span><span class="o">+</span><span class="mi">0000</span> <span class="n">Checked</span> <span class="n">database</span> <span class="n">schema</span> <span class="n">update</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">23</span><span class="n">T09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">15</span><span class="o">+</span><span class="mi">0000</span> <span class="n">Checked</span> <span class="n">database</span> <span class="n">schema</span> <span class="n">update</span> <span class="k">for</span> <span class="n">apps</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">23</span><span class="n">T09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">15</span><span class="o">+</span><span class="mi">0000</span> <span class="n">Updated</span> <span class="n">database</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">23</span><span class="n">T09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">15</span><span class="o">+</span><span class="mi">0000</span> <span class="n">Updated</span> <span class="o">&lt;</span><span class="n">files_sharing</span><span class="o">&gt;</span> <span class="n">to</span> <span class="mf">0.6</span><span class="o">.</span><span class="mi">6</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">23</span><span class="n">T09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">15</span><span class="o">+</span><span class="mi">0000</span> <span class="n">Update</span> <span class="n">successful</span>
<span class="mi">2015</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mi">23</span><span class="n">T09</span><span class="p">:</span><span class="mi">06</span><span class="p">:</span><span class="mi">15</span><span class="o">+</span><span class="mi">0000</span> <span class="n">Turned</span> <span class="n">off</span> <span class="n">maintenance</span> <span class="n">mode</span>
</pre></div>
</div>
<p>If there is an error it throws an exception, and the error is detailed in your ownCloud logfile, so you can use the log output to figure out what went wrong, or to use in a bug report.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Turned</span> <span class="n">on</span> <span class="n">maintenance</span> <span class="n">mode</span>
<span class="n">Checked</span> <span class="n">database</span> <span class="n">schema</span> <span class="n">update</span>
<span class="n">Checked</span> <span class="n">database</span> <span class="n">schema</span> <span class="n">update</span> <span class="k">for</span> <span class="n">apps</span>
<span class="n">Updated</span> <span class="n">database</span>
<span class="n">Updating</span> <span class="o">&lt;</span><span class="n">files_sharing</span><span class="o">&gt;</span> <span class="o">...</span>
<span class="ne">Exception</span>
<span class="n">ServerNotAvailableException</span><span class="p">:</span> <span class="n">LDAP</span> <span class="n">server</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">available</span>
<span class="n">Update</span> <span class="n">failed</span>
<span class="n">Turned</span> <span class="n">off</span> <span class="n">maintenance</span> <span class="n">mode</span>
</pre></div>
</div>
</div>
<div class="section" id="two-factor-authentication">
<span id="two-factor-auth-label"></span><h2>Two-factor Authentication<a class="headerlink" href="#two-factor-authentication" title="Permalink to this headline">¶</a></h2>
<p>If a two-factor provider app is enabled, it is enabled for all users by default (though the provider can decide whether or not the user has to pass the challenge).
In the case of an user losing access to the second factor (e.g., a lost phone with two-factor SMS verification), the admin can temporarily disable the two-factor check for that user via the occ command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">twofactor</span><span class="p">:</span><span class="n">disable</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>To re-enable two-factor authentication again, use the following commmand:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">twofactor</span><span class="p">:</span><span class="n">enable</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="disable-users">
<span id="disable-user-label"></span><h2>Disable Users<a class="headerlink" href="#disable-users" title="Permalink to this headline">¶</a></h2>
<p>Admins can disable users via the occ command too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">disable</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Use the following command to enable the user again:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">www</span><span class="o">-</span><span class="n">data</span> <span class="n">php</span> <span class="n">occ</span> <span class="n">user</span><span class="p">:</span><span class="n">enable</span> <span class="o">&lt;</span><span class="n">username</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Once users are disabled, their connected browsers will be disconnected.</p>
</div>
<div class="section" id="finding-inactive-users">
<h3>Finding Inactive Users<a class="headerlink" href="#finding-inactive-users" title="Permalink to this headline">¶</a></h3>
<p>To view a list of users who’ve not logged in for a given number of days, use the <code class="docutils literal notranslate"><span class="pre">user:inactive</span></code> command
The example below searches for users inactive for five days, or more.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo -u www-data php occ user:inactive 5</span>
</pre></div>
</div>
<p>By default, this will generate output in the following format:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">- 0:</span>
<span class="go">  - uid: admin</span>
<span class="go">  - displayName: admin</span>
<span class="go">  - inactiveSinceDays: 5</span>
</pre></div>
</div>
<p>You can see the user’s user id, display name, and the number of days they’ve been inactive.
If you’re passing or piping this information to another application for further processing, you can also use the <code class="docutils literal notranslate"><span class="pre">--output</span></code> switch to change its format.
The switch supports three options, these are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>plain</td>
<td>This is the default format.</td>
</tr>
<tr class="row-odd"><td>json</td>
<td>This will render the output as a JSON-encoded, but not formatted, string.</td>
</tr>
</tbody>
</table>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span><span class="nt">&quot;displayName&quot;</span><span class="p">:</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span><span class="nt">&quot;inactiveSinceDays&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">}]</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>json_pretty:</strong> This will render the output as a JSON-encoded string, formatted for ease of readability.</li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">,</span>
        <span class="nt">&quot;inactiveSinceDays&quot;</span><span class="p">:</span> <span class="mi">5</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>


					</div>
				</div>
			</div>

  </div>
</div>
</div>
<footer class="footer">
  <div class="container">
  <div class="footer_navi">

  <div class="menu-footer-navigation-container">
  	<ul id="menu-footer-navigation" class="menu">
  		<li><a href="https://owncloud.com">Home</a></li>
  		<li><a href="https://owncloud.com/about">About ownCloud</a></li>
  		<li><a href="https://owncloud.com/resources">Resources</a></li>
  		<li><a href="https://owncloud.com/become-partner">Become a Partner</a></li>
  		<li><a href="https://owncloud.org">Community</a></li>
  		<li><a href="https://owncloud.com/blog">Blog</a></li>
  		<li><a href="https://owncloud.com/jobs">Jobs</a></li>
  		<li><a href="https://owncloud.com/contact">Contact</a></li>
  	</ul>
  </div>

  <div class="follow_f">
  	<ul>
  		<li><a class="twitter" href="https://twitter.com/ownloud" target="_blank">Twitter</a></li>
  		<li><a class="facebook" href="http://www.facebook.com/owncloud" target="_blank">Facebook</a></li>
  		<li><a class="google" href="https://plus.google.com/+OwncloudOfficial" target="_blank">Google</a></li>
  	</ul>
  </div>

  <p class="copyright">© ownCloud 2011-2015</p>

  </div>
  </div>
</footer>
  </body>
</html>