
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Email Configuration &#8212; ownCloud 10.0.7 Server Administration Manual 10.0.7 documentation</title>
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/responsive.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Excluding Directories and Blacklisting Files" href="excluded_blacklisted_files.html" />
    <link rel="prev" title="Config.php Parameters" href="config_sample_php_parameters.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript">
(function () {
  /**
   * Patch TOC list.
   *
   * Will mutate the underlying span to have a correct ul for nav.
   *
   * @param $span: Span containing nested UL's to mutate.
   * @param minLevel: Starting level for nested lists. (1: global, 2: local).
   */
  var patchToc = function ($ul, minLevel) {
    var findA;

    // Find all a "internal" tags, traversing recursively.
    findA = function ($elem, level) {
      var level = level || 0,
        $items = $elem.find("> li > a.internal, > ul, > li > ul");

      // Iterate everything in order.
      $items.each(function (index, item) {
        var $item = $(item),
          tag = item.tagName.toLowerCase(),
          pad = 15 + ((level - minLevel) * 10);

        if (tag === 'a' && level >= minLevel) {
          // Add to existing padding.
          $item.css('padding-left', pad + "px");
          console.log(level, $item, 'padding-left', pad + "px");
        } else if (tag === 'ul') {
          // Recurse.
          findA($item, level + 1);
        }
      });
    };

    console.log("HERE");
    findA($ul);
  };

  $(document).ready(function () {
    // Add styling, structure to TOC's.
    $(".dropdown-menu").each(function () {
      $(this).find("ul").each(function (index, item){
        var $item = $(item);
        $item.addClass('unstyled');
      });
      $(this).find("li").each(function () {
        $(this).parent().append(this);
      });
    });

    // Patch in level.
    patchToc($("ul.globaltoc"), 2);
    patchToc($("ul.localtoc"), 2);

    // Enable dropdown.
    $('.dropdown-toggle').dropdown();
  });
}());
</script>

<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://piwik.owncloud.com/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '4']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->

  </head><body>
  

<noscript><p><img src="https://piwik.owncloud.com/piwik.php?idsite=4&rec=1" style="border:0" alt=""></p></noscript>
<div class="header_con">
<div class="container">
<h1 id="site-title"><a href="http://doc.owncloud.com" title="ownCloud" rel="home">ownCloud</a></h1>

<form class="headersearch" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>

<div class="follow">
<p><a class="visible" href="https://owncloud.com" title="ownCloud">Back to owncloud.com</a>|<span class="visible">Follow us:</span></p>
<a class="twitter" href="https://twitter.com/owncloud" target="_blank">Twitter</a>
<a class="facebook" href="http://www.facebook.com/owncloud" target="_blank">Facebook</a>
<a class="google" href="https://plus.google.com/+OwncloudOfficial" target="_blank">Google</a>
</div>

</div>
</div>

<div id="main">
<div class="container">
  <div class="content">

    </div>
    
			<div class="row">
				<div class="span3">
					<div class="sidebar">
						<div class="box sidenavi">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>

<li><a href="../../contents.html">Table of Contents</a></li>
									</ul>
                  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whats_new_admin.html">What’s New in ownCloud 10.0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrading/index.html">Upgrading</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../database/index.html">Database Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/index.html">File Sharing and Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ldap/ldap_proxy_cache_server_setup.html">How To Install and Configure an LDAP Proxy-Cache Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mimetypes/index.html">Mimetypes Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Server Configuration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="security_setup_warnings.html">Warnings on Admin Page</a></li>
<li class="toctree-l3"><a class="reference internal" href="import_ssl_cert.html">Importing System-wide and Personal SSL Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="occ_command.html">Using the occ Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="activity_configuration.html">Configuring the Activity App</a></li>
<li class="toctree-l3"><a class="reference internal" href="antivirus_configuration.html">Virus Scanner Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="caching_configuration.html">Memory Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="background_jobs_configuration.html">Background Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="config_sample_php_parameters.html">Config.php Parameters</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Email Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="excluded_blacklisted_files.html">Excluding Directories and Blacklisting Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="external_sites.html">Linking External Sites</a></li>
<li class="toctree-l3"><a class="reference internal" href="custom_client_repos.html">Custom Client Download Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="knowledgebase_configuration.html">Knowledge Base Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="language_configuration.html">Language Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="logging_configuration.html">Logging Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="harden_server.html">Hardening and Security Guidance</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/password-policy.html">Password Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="reverse_proxy_configuration.html">Reverse Proxy Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="thirdparty_php_configuration.html">Using Third Party PHP Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="automatic_configuration.html">Automatic Configuration Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="oc_server_tuning.html">ownCloud Server Tuning</a></li>
<li class="toctree-l3"><a class="reference internal" href="index_php_less_urls.html">Enable index.php-less URLs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user/index.html">User Management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../maintenance/index.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../issues/index.html">Issues and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../enterprise/index.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appliance/index.html">The ownCloud X Appliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

								</ul>
							</div>
						</div>
					</div>
				</div>
        

				<div class="span9">
					<div class="page-content">
						
  <div class="section" id="email-configuration">
<h1>Email Configuration<a class="headerlink" href="#email-configuration" title="Permalink to this headline">¶</a></h1>
<p>ownCloud is capable of sending emails for a range of reasons.
These include:</p>
<ul class="simple">
<li>Password reset emails</li>
<li>Notifying users of new file shares</li>
<li>Changes in files</li>
<li>Activity notifications</li>
</ul>
<p>To make use of them, users need to configure which notifications they want to receive.
They can do this on their Personal pages.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To be able to send emails, a functioning mail server must be available, whether locally in your network, or remotely.</p>
</div>
<div class="section" id="configuring-an-smtp-server">
<h2>Configuring an SMTP Server<a class="headerlink" href="#configuring-an-smtp-server" title="Permalink to this headline">¶</a></h2>
<p>To configure ownCloud to interact with an SMTP server, you can either update <code class="docutils literal notranslate"><span class="pre">config/config.php</span></code> by hand, or use the graphical Email Configuration Wizard, which updates <code class="docutils literal notranslate"><span class="pre">config/config.php</span></code> for you.</p>
<div class="section" id="the-graphical-email-configuration-wizard">
<h3>The Graphical Email Configuration Wizard<a class="headerlink" href="#the-graphical-email-configuration-wizard" title="Permalink to this headline">¶</a></h3>
<p>The wizard supports three mail server types: <em>SMTP</em>, <em>PHP</em>, and <em>Sendmail</em>.
Use SMTP for a remote email server, and either PHP or Sendmail when your mail server is on the same machine as ownCloud.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Sendmail option refers to the Sendmail SMTP server, and any
drop-in Sendmail replacement such as Postfix, Exim, or Courier. All of
these include a <code class="docutils literal notranslate"><span class="pre">sendmail</span></code> binary, and are freely-interchangeable.</p>
</div>
<p>You need the following information from your mail server administrator to connect ownCloud to a remote SMTP server:</p>
<ul class="simple">
<li>Encryption type: <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">SSL/TLS</span></code> or <code class="docutils literal notranslate"><span class="pre">STARTTLS</span></code>.</li>
<li>The From address you want your outgoing ownCloud mails to use.</li>
<li>Whether authentication is required.</li>
<li>Authentication method: <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">Login</span></code>, <code class="docutils literal notranslate"><span class="pre">Plain</span></code>, or <code class="docutils literal notranslate"><span class="pre">NT</span> <span class="pre">LAN</span> <span class="pre">Manager</span></code>.</li>
<li>The server’s IP address or fully-qualified domain name (FQDN).</li>
<li>Login credentials, if required.</li>
</ul>
<div class="figure">
<img alt="../../_images/smtp-config-smtp.png" src="../../_images/smtp-config-smtp.png" />
</div>
<p>Your changes are saved immediately, and you can click the <em>Send Email</em> button to test your configuration.
This sends a test message to the email address you configured on your Personal page.
The test message says:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">If</span> <span class="n">you</span> <span class="n">received</span> <span class="n">this</span> <span class="n">email</span><span class="p">,</span> <span class="n">the</span> <span class="n">settings</span> <span class="n">seem</span> <span class="n">to</span> <span class="n">be</span> <span class="n">correct</span><span class="o">.</span>

<span class="o">--</span>
<span class="n">ownCloud</span>
<span class="n">web</span> <span class="n">services</span> <span class="n">under</span> <span class="n">your</span> <span class="n">control</span>
</pre></div>
</div>
<div class="section" id="configuring-php-and-sendmail">
<h4>Configuring PHP and Sendmail<a class="headerlink" href="#configuring-php-and-sendmail" title="Permalink to this headline">¶</a></h4>
<p>Configuring PHP or Sendmail requires only that you select one of them, and then enter your desired return address.</p>
<div class="figure">
<img alt="../../_images/smtp-config-php-sendmail.png" src="../../_images/smtp-config-php-sendmail.png" />
</div>
<p>How do you decide which one to use?
PHP mode uses your local <code class="docutils literal notranslate"><span class="pre">sendmail</span></code> binary.
Use this if you want to use <code class="docutils literal notranslate"><span class="pre">php.ini</span></code> to control some of your mail server functions, such as setting <em>paths</em>, <em>headers</em>, or passing extra command options to the <code class="docutils literal notranslate"><span class="pre">sendmail</span></code> binary.
These vary according to which server you are using, so consult your server’s documentation to see what your options are.</p>
<p>In most cases the <code class="docutils literal notranslate"><span class="pre">smtp</span></code> option is best, because it removes the extra step of passing through PHP, and you can control all of your mail server options in one place, in your mail server configuration.</p>
</div>
</div>
<div class="section" id="setting-mail-server-parameters-in-config-php">
<h3>Setting Mail Server Parameters in config.php<a class="headerlink" href="#setting-mail-server-parameters-in-config-php" title="Permalink to this headline">¶</a></h3>
<p>If you prefer, you may set your mail server parameters in <code class="docutils literal notranslate"><span class="pre">config/config.php</span></code>.
The following examples are for <cite>SMTP</cite>, <cite>PHP</cite>, <cite>Sendmail</cite>, and <cite>Qmail</cite>.</p>
<div class="section" id="smtp">
<h4>SMTP<a class="headerlink" href="#smtp" title="Permalink to this headline">¶</a></h4>
<p>If you want to send email using a local or remote SMTP server it is necessary to enter the name or IP address of the server, optionally followed by a colon separated port number, e.g. <strong>:425</strong>.
If this value is not given the default port <code class="docutils literal notranslate"><span class="pre">25/tcp</span></code> will be used unless you change that by modifying the <strong>mail_smtpport</strong> parameter.
Multiple servers can be entered, separated by semicolons:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtpmode&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;smtp&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtphost&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;smtp-1.server.dom;smtp-2.server.dom:425&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpport&quot;</span>     <span class="o">=&gt;</span> <span class="mi">25</span><span class="p">,</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtpmode&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;smtp&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtphost&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;smtp.server.dom&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpport&quot;</span>     <span class="o">=&gt;</span> <span class="mi">425</span><span class="p">,</span>
</pre></div>
</div>
<p>If a malware or SPAM scanner is running on the SMTP server it might be necessary that you increase the SMTP timeout to e.g., 30s:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtptimeout&quot;</span>  <span class="o">=&gt;</span> <span class="mi">30</span><span class="p">,</span>
</pre></div>
</div>
<p>If the SMTP server accepts insecure connections, the default setting can be used:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

 <span class="s2">&quot;mail_smtpsecure&quot;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>If the SMTP server only accepts secure connections you can choose between the following two variants:</p>
<div class="section" id="ssl-tls">
<h5>SSL/TLS<a class="headerlink" href="#ssl-tls" title="Permalink to this headline">¶</a></h5>
<p>A secure connection will be initiated using SSL/TLS via SMTPS on the default port <code class="docutils literal notranslate"><span class="pre">465/tcp</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtphost&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;smtp.server.dom:465&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpsecure&quot;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;ssl&#39;</span><span class="p">,</span>
</pre></div>
</div>
</div>
<div class="section" id="starttls">
<h5>STARTTLS<a class="headerlink" href="#starttls" title="Permalink to this headline">¶</a></h5>
<p>A secure connection will be initiated using STARTTLS via SMTP on the default port <code class="docutils literal notranslate"><span class="pre">25/tcp</span></code>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtphost&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;smtp.server.dom&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpsecure&quot;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;tls&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>An alternative is the port <code class="docutils literal notranslate"><span class="pre">587/tcp</span></code> (recommended):</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtphost&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;smtp.server.dom:587&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpsecure&quot;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;tls&#39;</span><span class="p">,</span>
</pre></div>
</div>
</div>
<div class="section" id="authentication">
<h5>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h5>
<p>And finally it is necessary to configure if the SMTP server requires authentication, if not, the default values can be taken as is.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtpauth&quot;</span>     <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpname&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtppassword&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</pre></div>
</div>
<p>If SMTP authentication is required you have to set the required username and password and can optionally choose between the authentication types <strong>LOGIN</strong> (default) or <strong>PLAIN</strong>.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtpauth&quot;</span>     <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpauthtype&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;LOGIN&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpname&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;username&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtppassword&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="php-mail">
<h4>PHP Mail<a class="headerlink" href="#php-mail" title="Permalink to this headline">¶</a></h4>
<p>If you want to use PHP mail it is necessary to have an installed and working email system on your server.
Which program in detail is used to send email is defined by the configuration settings in the <strong>php.ini</strong> file.
On *nix systems this will most likely be Sendmail.
ownCloud should be able to send email out of the box.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtpmode&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;php&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtphost&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpport&quot;</span>     <span class="o">=&gt;</span> <span class="mi">25</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtptimeout&quot;</span>  <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpsecure&quot;</span>   <span class="o">=&gt;</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpauth&quot;</span>     <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpauthtype&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;LOGIN&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtpname&quot;</span>     <span class="o">=&gt;</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mail_smtppassword&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
</pre></div>
</div>
</div>
<div class="section" id="sendmail">
<h4>Sendmail<a class="headerlink" href="#sendmail" title="Permalink to this headline">¶</a></h4>
<p>If you want to use the well known Sendmail program to send email, it is necessary to have an installed and working email system on your *nix server.
The Sendmail binary (<code class="docutils literal notranslate"><span class="pre">/usr/sbin/sendmail</span></code>) is usually part of that system.
ownCloud should be able to send email out of the box.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?php

  &quot;mail_smtpmode&quot;     =&gt; &quot;sendmail&quot;,
  &quot;mail_smtphost&quot;     =&gt; &quot;127.0.0.1&quot;,
  &quot;mail_smtpport&quot;     =&gt; 25,
  &quot;mail_smtptimeout&quot;  =&gt; 10,
  &quot;mail_smtpsecure&quot;   =&gt; &quot;&quot;,
  &quot;mail_smtpauth&quot;     =&gt; false,
  &quot;mail_smtpauthtype&quot; =&gt; &quot;LOGIN&quot;,
  &quot;mail_smtpname&quot;     =&gt; &quot;&quot;,
  &quot;mail_smtppassword&quot; =&gt; &quot;&quot;,
</pre></div>
</div>
</div>
<div class="section" id="qmail">
<h4>Qmail<a class="headerlink" href="#qmail" title="Permalink to this headline">¶</a></h4>
<p>If you want to use the qmail program to send email, it is necessary to have an installed and working qmail email system on your server.
The Sendmail binary (<strong>/var/qmail/bin/sendmail</strong>) will then be used to send email.
ownCloud should be able to send email out of the box.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?php

  &quot;mail_smtpmode&quot;     =&gt; &quot;qmail&quot;,
  &quot;mail_smtphost&quot;     =&gt; &quot;127.0.0.1&quot;,
  &quot;mail_smtpport&quot;     =&gt; 25,
  &quot;mail_smtptimeout&quot;  =&gt; 10,
  &quot;mail_smtpsecure&quot;   =&gt; &quot;&quot;,
  &quot;mail_smtpauth&quot;     =&gt; false,
  &quot;mail_smtpauthtype&quot; =&gt; &quot;LOGIN&quot;,
  &quot;mail_smtpname&quot;     =&gt; &quot;&quot;,
  &quot;mail_smtppassword&quot; =&gt; &quot;&quot;,
</pre></div>
</div>
</div>
</div>
<div class="section" id="send-a-test-email">
<h3>Send a Test Email<a class="headerlink" href="#send-a-test-email" title="Permalink to this headline">¶</a></h3>
<p>Regardless of how you have configured ownCloud to interact with an email server, to test your email configuration, save your email address in your personal settings and then use the <strong>Send email</strong> button in the <em>Email Server</em> section of the Admin settings page.</p>
</div>
<div class="section" id="using-self-signed-certificates">
<h3>Using Self-Signed Certificates<a class="headerlink" href="#using-self-signed-certificates" title="Permalink to this headline">¶</a></h3>
<p>When using self-signed certificates on the remote SMTP server the certificate must be imported into ownCloud.
Please refer to <a class="reference internal" href="import_ssl_cert.html"><span class="doc">Importing System-wide and Personal SSL Certificates</span></a> for more information.</p>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<p>If you are unable to send email, try turning on debugging.
Do this by enabling the <code class="docutils literal notranslate"><span class="pre">mail_smtpdebug</span> <span class="pre">parameter</span></code> in <code class="docutils literal notranslate"><span class="pre">config/config.php</span></code>.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtpdebug&quot;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Immediately after pressing the <strong>Send email</strong> button, as described
before, several <strong>SMTP -&gt; get_lines(): …</strong> messages appear on the screen.
This is expected behavior and can be ignored.</p>
</div>
<div class="section" id="why-is-my-web-domain-different-from-my-mail-domain">
<h4>Why is my web domain different from my mail domain?<a class="headerlink" href="#why-is-my-web-domain-different-from-my-mail-domain" title="Permalink to this headline">¶</a></h4>
<p>The default domain name used for the sender address is the hostname where your ownCloud installation is served.
If you have a different mail domain name you can override this behavior by setting the following configuration parameter:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_domain&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;example.com&quot;</span><span class="p">,</span>
</pre></div>
</div>
<p>This setting results in every email sent by ownCloud (for example, the password reset email) having the domain part of the sender address appear as follows</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">no</span><span class="o">-</span><span class="n">reply</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
</div>
<div class="section" id="how-can-i-find-out-if-an-smtp-server-is-reachable">
<h4>How can I find out if an SMTP server is reachable?<a class="headerlink" href="#how-can-i-find-out-if-an-smtp-server-is-reachable" title="Permalink to this headline">¶</a></h4>
<p>Use the ping command to check the server availability</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ping</span> <span class="n">smtp</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">dom</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PING</span> <span class="n">smtp</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">dom</span> <span class="p">(</span><span class="n">ip</span><span class="o">-</span><span class="n">address</span><span class="p">)</span> <span class="mi">56</span><span class="p">(</span><span class="mi">84</span><span class="p">)</span> <span class="nb">bytes</span> <span class="n">of</span> <span class="n">data</span><span class="o">.</span>
<span class="mi">64</span> <span class="nb">bytes</span> <span class="kn">from</span> <span class="nn">your</span><span class="o">-</span><span class="n">server</span><span class="o">.</span><span class="n">local</span><span class="o">.</span><span class="n">lan</span> <span class="p">(</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.10</span><span class="p">):</span> <span class="n">icmp_req</span><span class="o">=</span><span class="mi">1</span> <span class="n">ttl</span><span class="o">=</span><span class="mi">64</span>
<span class="n">time</span><span class="o">=</span><span class="mf">3.64</span><span class="n">ms</span>
</pre></div>
</div>
</div>
<div class="section" id="how-can-i-find-out-if-the-smtp-server-is-listening-on-a-specific-tcp-port">
<h4>How can I find out if the SMTP server is listening on a specific TCP port?<a class="headerlink" href="#how-can-i-find-out-if-the-smtp-server-is-listening-on-a-specific-tcp-port" title="Permalink to this headline">¶</a></h4>
<p>The best way to get mail server information is to ask your mail server admin.
If you are the mail server admin, or need information in a hurry, you can use the <code class="docutils literal notranslate"><span class="pre">netstat</span></code> command.
This example shows all active servers on your system, and the ports they are listening on.
The SMTP server is listening on localhost port 25.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># netstat -pant</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Active</span> <span class="n">Internet</span> <span class="n">connections</span> <span class="p">(</span><span class="n">servers</span> <span class="ow">and</span> <span class="n">established</span><span class="p">)</span>
<span class="n">Proto</span> <span class="n">Recv</span><span class="o">-</span><span class="n">Q</span> <span class="n">Send</span><span class="o">-</span><span class="n">Q</span> <span class="n">Local</span> <span class="n">Address</span>   <span class="n">Foreign</span> <span class="n">Address</span>  <span class="n">State</span>  <span class="n">ID</span><span class="o">/</span><span class="n">Program</span> <span class="n">name</span>
<span class="n">tcp</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">631</span>     <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="o">*</span>        <span class="n">LISTEN</span>   <span class="mi">4418</span><span class="o">/</span><span class="n">cupsd</span>
<span class="n">tcp</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">25</span>    <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="o">*</span>        <span class="n">LISTEN</span>   <span class="mi">2245</span><span class="o">/</span><span class="n">exim4</span>
<span class="n">tcp</span>    <span class="mi">0</span>      <span class="mi">0</span>    <span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">3306</span>  <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="o">*</span>        <span class="n">LISTEN</span>   <span class="mi">1524</span><span class="o">/</span><span class="n">mysqld</span>
</pre></div>
</div>
<ul class="simple">
<li>25/tcp is unencrypted smtp</li>
<li>110/tcp/udp is unencrypted pop3</li>
<li>143/tcp/udp is unencrypted imap4</li>
<li>465/tcp is encrypted smtps</li>
<li>993/tcp/udp is encrypted imaps</li>
<li>995/tcp/udp is encrypted pop3s</li>
</ul>
</div>
<div class="section" id="how-can-i-determine-if-the-smtp-server-supports-smtps">
<h4>How can I determine if the SMTP server supports SMTPS?<a class="headerlink" href="#how-can-i-determine-if-the-smtp-server-supports-smtps" title="Permalink to this headline">¶</a></h4>
<p>A good indication that the SMTP server supports SMTPS is that it is listening on port <strong>465</strong>.</p>
</div>
<div class="section" id="how-can-i-determine-what-authorization-and-encryption-protocols-the-mail-server-supports">
<h4>How can I determine what authorization and encryption protocols the mail server supports?<a class="headerlink" href="#how-can-i-determine-what-authorization-and-encryption-protocols-the-mail-server-supports" title="Permalink to this headline">¶</a></h4>
<p>SMTP servers usually announce the availability of STARTTLS immediately after a connection has been established.
You can easily check this using the <code class="docutils literal notranslate"><span class="pre">telnet</span></code> command.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must enter the marked lines to obtain the information displayed.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">telnet</span> <span class="n">smtp</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">dom</span> <span class="mi">25</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Trying</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">1.10</span><span class="o">...</span>
<span class="n">Connected</span> <span class="n">to</span> <span class="n">smtp</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">dom</span><span class="o">.</span>
<span class="n">Escape</span> <span class="n">character</span> <span class="ow">is</span> <span class="s1">&#39;^]&#39;</span><span class="o">.</span>
<span class="mi">220</span> <span class="n">smtp</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">dom</span> <span class="n">ESMTP</span> <span class="n">Exim</span> <span class="mf">4.80</span><span class="o">.</span><span class="mi">1</span> <span class="n">Tue</span><span class="p">,</span> <span class="mi">22</span> <span class="n">Jan</span> <span class="mi">2013</span> <span class="mi">22</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">55</span> <span class="o">+</span><span class="mi">0100</span>
<span class="n">EHLO</span> <span class="n">your</span><span class="o">-</span><span class="n">server</span><span class="o">.</span><span class="n">local</span><span class="o">.</span><span class="n">lan</span>                   <span class="c1"># &lt;&lt;&lt; enter this command</span>
<span class="mi">250</span><span class="o">-</span><span class="n">smtp</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">dom</span> <span class="n">Hello</span> <span class="n">your</span><span class="o">-</span><span class="n">server</span><span class="o">.</span><span class="n">local</span><span class="o">.</span><span class="n">lan</span> <span class="p">[</span><span class="n">ip</span><span class="o">-</span><span class="n">address</span><span class="p">]</span>
<span class="mi">250</span><span class="o">-</span><span class="n">SIZE</span> <span class="mi">52428800</span>
<span class="mi">250</span><span class="o">-</span><span class="mi">8</span><span class="n">BITMIME</span>
<span class="mi">250</span><span class="o">-</span><span class="n">PIPELINING</span>
<span class="mi">250</span><span class="o">-</span><span class="n">AUTH</span> <span class="n">PLAIN</span> <span class="n">LOGIN</span> <span class="n">CRAM</span><span class="o">-</span><span class="n">MD5</span>                 <span class="c1"># &lt;&lt;&lt; Supported auth protocols</span>
<span class="mi">250</span><span class="o">-</span><span class="n">STARTTLS</span>                                  <span class="c1"># &lt;&lt;&lt; Encryption is supported</span>
<span class="mi">250</span> <span class="n">HELP</span>
<span class="n">QUIT</span>                                          <span class="c1"># &lt;&lt;&lt; enter this command</span>
<span class="mi">221</span> <span class="n">smtp</span><span class="o">.</span><span class="n">domain</span><span class="o">.</span><span class="n">dom</span> <span class="n">closing</span> <span class="n">connection</span>
<span class="n">Connection</span> <span class="n">closed</span> <span class="n">by</span> <span class="n">foreign</span> <span class="n">host</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="enabling-debug-mode">
<h3>Enabling Debug Mode<a class="headerlink" href="#enabling-debug-mode" title="Permalink to this headline">¶</a></h3>
<p>If you are unable to send email, it might be useful to activate further debug messages by enabling the <code class="docutils literal notranslate"><span class="pre">mail_smtpdebug</span></code> parameter:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

  <span class="s2">&quot;mail_smtpdebug&quot;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Immediately after pressing the <strong>Send email</strong> button, as described
before, several <strong>SMTP -&gt; get_lines(): …</strong> messages appear on the screen.
This is expected behavior and can be ignored.</p>
</div>
</div>
</div>
<div class="section" id="using-email-templates">
<span id="using-email-templates-label"></span><h2>Using Email Templates<a class="headerlink" href="#using-email-templates" title="Permalink to this headline">¶</a></h2>
<p>Most emails sent from ownCloud are based on editable email templates, which are a mixture of PHP and HTML.
The currently available templates are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="12%" />
<col width="31%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Email</th>
<th class="head">Format</th>
<th class="head">Description</th>
<th class="head">File Location</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Activity notification mail</td>
<td>plain text</td>
<td>Notification of activities that users have
enabled in the Notifications section of
their Personal pages.</td>
<td><code class="docutils literal notranslate"><span class="pre">core/templates/mail.php</span></code></td>
</tr>
<tr class="row-odd"><td>Lost password mail</td>
<td>&#160;</td>
<td>Password reset email for users who lose
their passwords.</td>
<td><code class="docutils literal notranslate"><span class="pre">core/templates/lostpassword/email.php</span></code></td>
</tr>
<tr class="row-even"><td>New user email</td>
<td>HTML
plain text</td>
<td>&#160;</td>
<td><code class="docutils literal notranslate"><span class="pre">settings/templates/email.new_user.php</span></code>
<code class="docutils literal notranslate"><span class="pre">settings/templates/email.new_user_plain_text.php</span></code></td>
</tr>
<tr class="row-odd"><td>Public link share email</td>
<td>HTML
plain text</td>
<td>Notify users of new public link shares.</td>
<td><code class="docutils literal notranslate"><span class="pre">core/templates/mail.php</span></code>
<code class="docutils literal notranslate"><span class="pre">core/templates/altmail.php</span></code></td>
</tr>
<tr class="row-even"><td>New file share email</td>
<td>HTML
plain text</td>
<td>Notify users of new file shares.</td>
<td><code class="docutils literal notranslate"><span class="pre">core/templates/internalmail.php</span></code>
<code class="docutils literal notranslate"><span class="pre">core/templates/internalaltmail.php</span></code></td>
</tr>
</tbody>
</table>
<p>In addition to providing the email templates, this feature enables you to apply any pre-configured themes to the email.
To modify an email template to users:</p>
<ol class="arabic simple">
<li>Access the Admin page.</li>
<li>Scroll to the Mail templates section.</li>
<li>Select a template from the drop-down menu.</li>
<li>Make any desired modifications to the template.</li>
</ol>
<p>The templates are written in PHP and HTML, and are already loaded with the relevant variables such as <em>username</em>, <em>share links</em>, and <em>filenames</em>.
You can, if you are careful, edit these — even without knowing PHP or HTML.
Don’t touch any of the code, but it’s OK to edit the text portions of the messages.</p>
<p>For example, this the lost password mail template:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">echo</span> <span class="nb">str_replace</span><span class="p">(</span>
    <span class="s1">&#39;{link}&#39;</span><span class="p">,</span>
    <span class="nv">$_</span><span class="p">[</span><span class="s1">&#39;link&#39;</span><span class="p">],</span>
    <span class="nv">$l</span><span class="o">-&gt;</span><span class="na">t</span><span class="p">(</span><span class="s1">&#39;Use the following link to reset your password: {link}&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>You could change the text portion of the template, <code class="docutils literal notranslate"><span class="pre">Use</span> <span class="pre">the</span> <span class="pre">following</span> <span class="pre">link</span> <span class="pre">to</span> <span class="pre">reset</span> <span class="pre">your</span> <span class="pre">password:</span></code> to say something else, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Click</span> <span class="n">the</span> <span class="n">following</span> <span class="n">link</span> <span class="n">to</span> <span class="n">reset</span> <span class="n">your</span> <span class="n">password</span><span class="o">.</span>
<span class="n">If</span> <span class="n">you</span> <span class="n">did</span> <span class="ow">not</span> <span class="n">ask</span> <span class="k">for</span> <span class="n">a</span> <span class="n">password</span> <span class="n">reset</span><span class="p">,</span> <span class="n">ignore</span> <span class="n">this</span> <span class="n">message</span><span class="o">.</span>
</pre></div>
</div>
<p>Again, be very careful to change nothing but the message text, because the tiniest coding error will break the template.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can edit the templates directly in the template text box, or you
can copy and paste them to a text editor for modification and then copy and
paste them back to the template text box for use when you are done.</p>
</div>
</div>
</div>


					</div>
				</div>
			</div>

  </div>
</div>
</div>
<footer class="footer">
  <div class="container">
  <div class="footer_navi">

  <div class="menu-footer-navigation-container">
  	<ul id="menu-footer-navigation" class="menu">
  		<li><a href="https://owncloud.com">Home</a></li>
  		<li><a href="https://owncloud.com/about">About ownCloud</a></li>
  		<li><a href="https://owncloud.com/resources">Resources</a></li>
  		<li><a href="https://owncloud.com/become-partner">Become a Partner</a></li>
  		<li><a href="https://owncloud.org">Community</a></li>
  		<li><a href="https://owncloud.com/blog">Blog</a></li>
  		<li><a href="https://owncloud.com/jobs">Jobs</a></li>
  		<li><a href="https://owncloud.com/contact">Contact</a></li>
  	</ul>
  </div>

  <div class="follow_f">
  	<ul>
  		<li><a class="twitter" href="https://twitter.com/ownloud" target="_blank">Twitter</a></li>
  		<li><a class="facebook" href="http://www.facebook.com/owncloud" target="_blank">Facebook</a></li>
  		<li><a class="google" href="https://plus.google.com/+OwncloudOfficial" target="_blank">Google</a></li>
  	</ul>
  </div>

  <p class="copyright">© ownCloud 2011-2015</p>

  </div>
  </div>
</footer>
  </body>
</html>