
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Mimetypes Management &#8212; ownCloud 10.0.7 Server Administration Manual 10.0.7 documentation</title>
    <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/responsive.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Server Configuration" href="../server/index.html" />
    <link rel="prev" title="How To Install and Configure an LDAP Proxy-Cache Server" href="../ldap/ldap_proxy_cache_server_setup.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript">
(function () {
  /**
   * Patch TOC list.
   *
   * Will mutate the underlying span to have a correct ul for nav.
   *
   * @param $span: Span containing nested UL's to mutate.
   * @param minLevel: Starting level for nested lists. (1: global, 2: local).
   */
  var patchToc = function ($ul, minLevel) {
    var findA;

    // Find all a "internal" tags, traversing recursively.
    findA = function ($elem, level) {
      var level = level || 0,
        $items = $elem.find("> li > a.internal, > ul, > li > ul");

      // Iterate everything in order.
      $items.each(function (index, item) {
        var $item = $(item),
          tag = item.tagName.toLowerCase(),
          pad = 15 + ((level - minLevel) * 10);

        if (tag === 'a' && level >= minLevel) {
          // Add to existing padding.
          $item.css('padding-left', pad + "px");
          console.log(level, $item, 'padding-left', pad + "px");
        } else if (tag === 'ul') {
          // Recurse.
          findA($item, level + 1);
        }
      });
    };

    console.log("HERE");
    findA($ul);
  };

  $(document).ready(function () {
    // Add styling, structure to TOC's.
    $(".dropdown-menu").each(function () {
      $(this).find("ul").each(function (index, item){
        var $item = $(item);
        $item.addClass('unstyled');
      });
      $(this).find("li").each(function () {
        $(this).parent().append(this);
      });
    });

    // Patch in level.
    patchToc($("ul.globaltoc"), 2);
    patchToc($("ul.localtoc"), 2);

    // Enable dropdown.
    $('.dropdown-toggle').dropdown();
  });
}());
</script>

<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://piwik.owncloud.com/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '4']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->

  </head><body>
  

<noscript><p><img src="https://piwik.owncloud.com/piwik.php?idsite=4&rec=1" style="border:0" alt=""></p></noscript>
<div class="header_con">
<div class="container">
<h1 id="site-title"><a href="http://doc.owncloud.com" title="ownCloud" rel="home">ownCloud</a></h1>

<form class="headersearch" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>

<div class="follow">
<p><a class="visible" href="https://owncloud.com" title="ownCloud">Back to owncloud.com</a>|<span class="visible">Follow us:</span></p>
<a class="twitter" href="https://twitter.com/owncloud" target="_blank">Twitter</a>
<a class="facebook" href="http://www.facebook.com/owncloud" target="_blank">Facebook</a>
<a class="google" href="https://plus.google.com/+OwncloudOfficial" target="_blank">Google</a>
</div>

</div>
</div>

<div id="main">
<div class="container">
  <div class="content">

    </div>
    
			<div class="row">
				<div class="span3">
					<div class="sidebar">
						<div class="box sidenavi">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>

<li><a href="../../contents.html">Table of Contents</a></li>
									</ul>
                  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../whats_new_admin.html">What’s New in ownCloud 10.0.7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../upgrading/index.html">Upgrading</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../database/index.html">Database Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../files/index.html">File Sharing and Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ldap/ldap_proxy_cache_server_setup.html">How To Install and Configure an LDAP Proxy-Cache Server</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Mimetypes Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mimetype-aliases">Mimetype Aliases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mimetype-mapping">Mimetype Mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="#icon-retrieval">Icon retrieval</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../server/index.html">Server Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user/index.html">User Management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../maintenance/index.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../issues/index.html">Issues and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../enterprise/index.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appliance/index.html">The ownCloud X Appliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

								</ul>
							</div>
						</div>
					</div>
				</div>
        

				<div class="span9">
					<div class="page-content">
						
  <div class="section" id="mimetypes-management">
<h1>Mimetypes Management<a class="headerlink" href="#mimetypes-management" title="Permalink to this headline">¶</a></h1>
<p>ownCloud allows you to create aliases for mimetypes and map file extensions to a mimetype.
These allow administrators the ability to change the existing icons that ownCloud uses to represent certain file types and folders, as well as to use custom icons for mimetypes and file extensions which ownCloud doesn’t natively support.
This is handy in a variety of situations, such as when you might want a custom audio icon for audio mimetypes, instead of the default file icon.</p>
<div class="section" id="mimetype-aliases">
<h2>Mimetype Aliases<a class="headerlink" href="#mimetype-aliases" title="Permalink to this headline">¶</a></h2>
<p>ownCloud’s default mimetype configuration is defined in <code class="docutils literal notranslate"><span class="pre">owncloud/resources/config/mimetypealiases.dist.json</span></code>, which you can see a snippet of below.
The mimetype’s on the left, and the icon used to represent that mimetype is on the right.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="nt">&quot;application/coreldraw&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
 <span class="nt">&quot;application/font-sfnt&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
 <span class="nt">&quot;application/font-woff&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
 <span class="nt">&quot;application/illustrator&quot;</span><span class="p">:</span> <span class="s2">&quot;image&quot;</span><span class="p">,</span>
 <span class="nt">&quot;application/epub+zip&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
 <span class="nt">&quot;application/javascript&quot;</span><span class="p">:</span> <span class="s2">&quot;text/code&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Stepping through that file, you can see that:</p>
<ul class="simple">
<li>the image icon is used to represent Corel Draw, SFNT and WOFF font files, and Adobe Illustrator files.</li>
<li>ePub files are represented by the text file icon.</li>
<li>JavaScript files are represented by the text/code icon.</li>
</ul>
<div class="section" id="changing-existing-icons-and-using-custom-icons">
<h3>Changing Existing Icons and Using Custom Icons<a class="headerlink" href="#changing-existing-icons-and-using-custom-icons" title="Permalink to this headline">¶</a></h3>
<p>If you want to change one or more of the existing icons which ownCloud uses, or if you want to expand the available list, here’s how to do so.</p>
<p>First, create a copy of <code class="docutils literal notranslate"><span class="pre">resources/config/mimetypealiases.dist.json</span></code>, naming it <code class="docutils literal notranslate"><span class="pre">mimetypealiases.json</span></code> and storing it in <code class="docutils literal notranslate"><span class="pre">config/</span></code>.
This is required for two reasons:</p>
<ol class="arabic simple">
<li>It will take precedence over the default file.</li>
<li>The original file will get replaced on each ownCloud upgrade.</li>
</ol>
<p>Then, either override one or more existing definitions or add new, custom, aliases as required.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please refer to <a class="reference external" href="https://doc.owncloud.com/server/latest/developer_manual/core/theming.html">the ownCloud theming documentation</a> for where to put the new image files.</p>
</div>
<p>Some common mimetypes that may be useful in creating aliases are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Mimetype</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">image</span></code></td>
<td>Generic image</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">image/vector</span></code></td>
<td>Vector image</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">audio</span></code></td>
<td>Generic audio file</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">x-office/document</span></code></td>
<td>Word processed document</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">x-office/spreadsheet</span></code></td>
<td>Spreadsheet</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">x-office/presentation</span></code></td>
<td>Presentation</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">text</span></code></td>
<td>Generic text document</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">text/code</span></code></td>
<td>Source code</td>
</tr>
</tbody>
</table>
<p>Once you have made changes to <code class="docutils literal notranslate"><span class="pre">config/mimetypealiases.json</span></code>, use <a class="reference internal" href="../server/occ_command.html"><span class="doc">the occ command</span></a> to propagate the changes throughout your ownCloud installation.
Here is an example for Ubuntu Linux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo -u www-data php occ maintenance:mimetype:update-js
</pre></div>
</div>
</div>
<div class="section" id="example-changing-the-json-file-icon">
<h3>Example - Changing the JSON File Icon<a class="headerlink" href="#example-changing-the-json-file-icon" title="Permalink to this headline">¶</a></h3>
<div class="figure">
<img alt="The default icon for JSON files" src="../../_images/json-alias-before.png" />
</div>
<p>Let’s step through an example, from start to finish, of changing the icon that ownCloud uses to represent JSON files, which you can see above.</p>
<ol class="arabic simple">
<li>From the root directory of your ownCloud installation, copy <code class="docutils literal notranslate"><span class="pre">resources/config/mimetypealiases.dist.json</span></code> to <code class="docutils literal notranslate"><span class="pre">/config/mimetypealiases.json</span></code>.</li>
<li>Update the alias for <code class="docutils literal notranslate"><span class="pre">application/json</span></code>, which you should find on line 8, to match the following, and save the file:</li>
</ol>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>&quot;application/json&quot;: &quot;text/json&quot;,
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Copy a new SVG icon to represent JSON files to <code class="docutils literal notranslate"><span class="pre">core/img/filetypes</span></code>, calling it <code class="docutils literal notranslate"><span class="pre">text-json.svg</span></code>.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The name and location of the file are important.
The location is because the <code class="docutils literal notranslate"><span class="pre">core/img/filetypes</span></code> directory stores the mimetype file icons.
The name is important as it’s a rough mapping between the alias name and the icon’s file name, i.e., <code class="docutils literal notranslate"><span class="pre">text/json</span></code> becomes <code class="docutils literal notranslate"><span class="pre">text-json</span></code>.</p>
</div>
<ol class="arabic simple" start="4">
<li>Run the following command to update the mimetype alias database.</li>
</ol>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sudo -u www-data php occ maintenance:mimetype:update-js
</pre></div>
</div>
<p>After doing so, whenever you view a folder that contains JSON files or upload one, your new icon file will be used to represent the file, as in the image below.</p>
<div class="figure">
<img alt="A replaced icon for JSON files" src="../../_images/json-alias-after.png" />
</div>
</div>
</div>
<div class="section" id="mimetype-mapping">
<h2>Mimetype Mapping<a class="headerlink" href="#mimetype-mapping" title="Permalink to this headline">¶</a></h2>
<p>ownCloud allows administrators to map a file extension to a mimetype, e.g., such as mapping files ending in <code class="docutils literal notranslate"><span class="pre">mp3</span></code> to <code class="docutils literal notranslate"><span class="pre">audio/mpeg</span></code>.
Which then, in turn, allows ownCloud to show the audio icon.</p>
<p>The default file extension to mimetype mapping configuration is stored in <code class="docutils literal notranslate"><span class="pre">resources/config/mimetypemapping.dist.json</span></code>.
This is similar to <code class="docutils literal notranslate"><span class="pre">resources/config/mimetypealiases.dist.json</span></code>, and also returns a basic JSON array.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="nt">&quot;3gp&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;video/3gpp&quot;</span><span class="p">],</span>
 <span class="nt">&quot;7z&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;application/x-7z-compressed&quot;</span><span class="p">],</span>
 <span class="nt">&quot;accdb&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;application/msaccess&quot;</span><span class="p">],</span>
 <span class="nt">&quot;ai&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;application/illustrator&quot;</span><span class="p">],</span>
 <span class="nt">&quot;apk&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;application/vnd.android.package-archive&quot;</span><span class="p">],</span>
 <span class="nt">&quot;arw&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;image/x-dcraw&quot;</span><span class="p">],</span>
 <span class="nt">&quot;avi&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;video/x-msvideo&quot;</span><span class="p">],</span>
 <span class="nt">&quot;bash&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;text/x-shellscript&quot;</span><span class="p">],</span>
 <span class="nt">&quot;json&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;application/json&quot;</span><span class="p">,</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the example above, you can see nine mimetypes mapped to file extensions.
Each of them, except the last (<code class="docutils literal notranslate"><span class="pre">json</span></code>), maps a file extension to a mimetype.
Now take a look at the JSON example.</p>
<p>In this case, ownCloud will first check if a mimetype alias is defined for <code class="docutils literal notranslate"><span class="pre">application/json</span></code>, in <code class="docutils literal notranslate"><span class="pre">mimetypealiases.json</span></code>.
If it is, it will use that icon.
If not, then ownCloud will fall back to using the icon for <code class="docutils literal notranslate"><span class="pre">text/plain</span></code>.</p>
<p>If you want to update or extend the existing mapping, as with updating the mimetype aliases, create a copy of <code class="docutils literal notranslate"><span class="pre">resources/config/mimetypemapping.dist.json</span></code> and name it <code class="docutils literal notranslate"><span class="pre">mimetypemapping.json</span></code> and storing it in <code class="docutils literal notranslate"><span class="pre">config/</span></code>.
Then, in this new file, make any changes required.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please refer to <a class="reference external" href="https://doc.owncloud.com/server/latest/developer_manual/core/theming.html">the ownCloud theming documentation</a> for where to put the new image files.</p>
</div>
</div>
<div class="section" id="icon-retrieval">
<h2>Icon retrieval<a class="headerlink" href="#icon-retrieval" title="Permalink to this headline">¶</a></h2>
<p>When an icon is retrieved for a mimetype, if the full mimetype cannot be found, the search will fallback to looking for the part before the slash.
Given a file with the mimetype <code class="docutils literal notranslate"><span class="pre">image/my-custom-image</span></code>, if no icon exists for the full mimetype, the icon for <code class="docutils literal notranslate"><span class="pre">image</span></code> will be used instead.
This allows specialized mimetypes to fallback to generic icons when the relevant icons are unavailable.</p>
</div>
</div>


					</div>
				</div>
			</div>

  </div>
</div>
</div>
<footer class="footer">
  <div class="container">
  <div class="footer_navi">

  <div class="menu-footer-navigation-container">
  	<ul id="menu-footer-navigation" class="menu">
  		<li><a href="https://owncloud.com">Home</a></li>
  		<li><a href="https://owncloud.com/about">About ownCloud</a></li>
  		<li><a href="https://owncloud.com/resources">Resources</a></li>
  		<li><a href="https://owncloud.com/become-partner">Become a Partner</a></li>
  		<li><a href="https://owncloud.org">Community</a></li>
  		<li><a href="https://owncloud.com/blog">Blog</a></li>
  		<li><a href="https://owncloud.com/jobs">Jobs</a></li>
  		<li><a href="https://owncloud.com/contact">Contact</a></li>
  	</ul>
  </div>

  <div class="follow_f">
  	<ul>
  		<li><a class="twitter" href="https://twitter.com/ownloud" target="_blank">Twitter</a></li>
  		<li><a class="facebook" href="http://www.facebook.com/owncloud" target="_blank">Facebook</a></li>
  		<li><a class="google" href="https://plus.google.com/+OwncloudOfficial" target="_blank">Google</a></li>
  	</ul>
  </div>

  <p class="copyright">© ownCloud 2011-2015</p>

  </div>
  </div>
</footer>
  </body>
</html>