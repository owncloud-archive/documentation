
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>NGINX Configuration &#8212; ownCloud 10.0.7 Server Administration Manual 10.0.7 documentation</title>
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/responsive.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bootstrap.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using Let’s Encrypt SSL Certificates" href="letsencrypt/index.html" />
    <link rel="prev" title="SELinux Configuration" href="selinux_configuration.html" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript">
(function () {
  /**
   * Patch TOC list.
   *
   * Will mutate the underlying span to have a correct ul for nav.
   *
   * @param $span: Span containing nested UL's to mutate.
   * @param minLevel: Starting level for nested lists. (1: global, 2: local).
   */
  var patchToc = function ($ul, minLevel) {
    var findA;

    // Find all a "internal" tags, traversing recursively.
    findA = function ($elem, level) {
      var level = level || 0,
        $items = $elem.find("> li > a.internal, > ul, > li > ul");

      // Iterate everything in order.
      $items.each(function (index, item) {
        var $item = $(item),
          tag = item.tagName.toLowerCase(),
          pad = 15 + ((level - minLevel) * 10);

        if (tag === 'a' && level >= minLevel) {
          // Add to existing padding.
          $item.css('padding-left', pad + "px");
          console.log(level, $item, 'padding-left', pad + "px");
        } else if (tag === 'ul') {
          // Recurse.
          findA($item, level + 1);
        }
      });
    };

    console.log("HERE");
    findA($ul);
  };

  $(document).ready(function () {
    // Add styling, structure to TOC's.
    $(".dropdown-menu").each(function () {
      $(this).find("ul").each(function (index, item){
        var $item = $(item);
        $item.addClass('unstyled');
      });
      $(this).find("li").each(function () {
        $(this).parent().append(this);
      });
    });

    // Patch in level.
    patchToc($("ul.globaltoc"), 2);
    patchToc($("ul.localtoc"), 2);

    // Enable dropdown.
    $('.dropdown-toggle').dropdown();
  });
}());
</script>

<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://piwik.owncloud.com/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '4']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->

  </head><body>
  

<noscript><p><img src="https://piwik.owncloud.com/piwik.php?idsite=4&rec=1" style="border:0" alt=""></p></noscript>
<div class="header_con">
<div class="container">
<h1 id="site-title"><a href="http://doc.owncloud.com" title="ownCloud" rel="home">ownCloud</a></h1>

<form class="headersearch" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>

<div class="follow">
<p><a class="visible" href="https://owncloud.com" title="ownCloud">Back to owncloud.com</a>|<span class="visible">Follow us:</span></p>
<a class="twitter" href="https://twitter.com/owncloud" target="_blank">Twitter</a>
<a class="facebook" href="http://www.facebook.com/owncloud" target="_blank">Facebook</a>
<a class="google" href="https://plus.google.com/+OwncloudOfficial" target="_blank">Google</a>
</div>

</div>
</div>

<div id="main">
<div class="container">
  <div class="content">

    </div>
    
			<div class="row">
				<div class="span3">
					<div class="sidebar">
						<div class="box sidenavi">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>

<li><a href="../contents.html">Table of Contents</a></li>
									</ul>
                  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whats_new_admin.html">What’s New in ownCloud 10.0.7</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="system_requirements.html">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment_recommendations.html">Deployment Recommendations</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment_considerations.html">Deployment Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="source_installation.html">Manual Installation on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux_installation.html">Linux Package Manager Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation_wizard.html">The Installation Wizard</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker/index.html">Installing with Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="command_line_installation.html">Command Line Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration_notes_and_tips.html">Configuration Notes &amp; Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="changing_the_web_route.html">Changing Your ownCloud URL</a></li>
<li class="toctree-l2"><a class="reference internal" href="apps_management_installation.html">Installing and Managing Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="apps_supported.html">Supported Apps in ownCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="selinux_configuration.html">SELinux Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">NGINX Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-configurations">Example Configurations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="#log-optimisation">Log Optimisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-tuning">Performance Tuning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="letsencrypt/index.html">Using Let’s Encrypt SSL Certificates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../upgrading/index.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/index.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues/index.html">Issues and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enterprise/index.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appliance/index.html">The ownCloud X Appliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
</ul>

								</ul>
							</div>
						</div>
					</div>
				</div>
        

				<div class="span9">
					<div class="page-content">
						
  <div class="section" id="nginx-configuration">
<h1>NGINX Configuration<a class="headerlink" href="#nginx-configuration" title="Permalink to this headline">¶</a></h1>
<p>This page covers example NGINX configurations to use with running an ownCloud server.
Note that NGINX is <em>not officially supported</em>, and this page is <em>community-maintained</em>.
Thank you, contributors!</p>
<ul class="simple">
<li>Depending on your setup, you need to insert the code examples into
your NGINX configuration file.</li>
<li>Adjust <strong>server_name</strong>, <strong>root</strong>, <strong>ssl_certificate</strong>, <strong>ssl_certificate_key</strong> ect. to suit your needs.</li>
<li>Make sure your SSL certificates are readable by the server (see <a class="reference external" href="http://wiki.nginx.org/HttpSslModule">NGINX HTTP
SSL Module documentation</a>).</li>
<li><code class="docutils literal notranslate"><span class="pre">add_header</span></code> statements are only valid in the current <code class="docutils literal notranslate"><span class="pre">location</span></code> block and are not
derived or cascaded from or to a different <code class="docutils literal notranslate"><span class="pre">location</span></code> block. All necessary <code class="docutils literal notranslate"><span class="pre">add_header</span></code>
statements <strong>must</strong> be defined in each <code class="docutils literal notranslate"><span class="pre">location</span></code> block needed.</li>
<li>For better readability it is possible to move <em>common</em> <code class="docutils literal notranslate"><span class="pre">add_header</span></code> directives into a separate file
and include that file wherever necessary. However, each <code class="docutils literal notranslate"><span class="pre">add_header</span></code> directive must be written in
a single line to prevent connection problems with sync clients.</li>
<li>The same is true for <code class="docutils literal notranslate"><span class="pre">map</span></code> directives which also can be collected
into a singe file and then be included.</li>
</ul>
<div class="section" id="example-configurations">
<h2>Example Configurations<a class="headerlink" href="#example-configurations" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Be careful about line breaks if you copy the examples, as long lines may be broken for page formatting.</p>
</div>
<p>You can use ownCloud over plain HTTP.
However, <em>we strongly encourage you</em> to use SSL/TLS to encrypt all of your server traffic <strong>and</strong> to protect users’ logins, and their data while it is in transit.
To use plain HTTP:</p>
<ol class="arabic simple">
<li>Remove the server block containing the redirect</li>
<li>Change <strong>listen 443 ssl http2</strong> to <strong>listen 80;</strong></li>
<li>Remove all <strong>ssl_</strong> entries.</li>
<li>Remove <strong>fastcgi_params HTTPS on;</strong></li>
</ol>
<div class="section" id="note-1">
<span id="fastcgi-buffers-label"></span><h3>Note 1<a class="headerlink" href="#note-1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fastcgi_buffers</span> <span class="mi">8</span> <span class="mi">4</span><span class="n">K</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>Do not set the number of buffers to greater than 63. In our example, it is set to 8.</li>
<li>If you exceed this maximum, big file downloads may consume a lot of system memory over time. This is especially problematic on low-memory systems.</li>
</ul>
</div>
<div class="section" id="note-2">
<h3>Note 2<a class="headerlink" href="#note-2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fastcgi_ignore_headers</span>
<span class="n">X</span><span class="o">-</span><span class="n">Accel</span><span class="o">-</span><span class="n">Buffering</span>
</pre></div>
</div>
<ul class="simple">
<li>From ownCloud version 10.0.4 on, a header will be sent to NGINX not to use buffers to avoid problems with problematic <code class="docutils literal notranslate"><span class="pre">fastcgi_buffers</span></code> values. See note above.</li>
<li>If the values of <code class="docutils literal notranslate"><span class="pre">fastcgi_buffers</span></code> are properly set and no problems are expected, you can use this directive to reenable buffering <strong>overriding</strong> the sent header.</li>
<li>In case you use an earlier version of ownCloud or can´t change the buffers, or can´t remove a existing ignore header directive, you can explicitly enable following directive in the location block <code class="docutils literal notranslate"><span class="pre">fastcgi_buffering</span> <span class="pre">off;</span></code></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The directives <code class="docutils literal notranslate"><span class="pre">fastcgi_ignore_headers</span> <span class="pre">X-Accel-Buffering;</span></code> and <code class="docutils literal notranslate"><span class="pre">fastcgi_buffering</span> <span class="pre">off;</span></code> can be used separately but not together.</p>
</div>
</div>
<div class="section" id="owncloud-in-the-web-root-of-nginx">
<h3>ownCloud in the web root of NGINX<a class="headerlink" href="#owncloud-in-the-web-root-of-nginx" title="Permalink to this headline">¶</a></h3>
<p>The following config should be used when ownCloud is placed in the web root of your NGINX installation.</p>
<p>The configuration assumes that ownCloud is installed in</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">/var/www/owncloud</span></code> and is accessed via <code class="docutils literal notranslate"><span class="pre">http(s)://cloud.example.com</span></code>.</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  upstream php-handler {
      server 127.0.0.1:9000;
      # Depending on your used PHP version
      #server unix:/var/run/php5-fpm.sock;
      #server unix:/var/run/php7-fpm.sock;
  }

  server {
      listen 80;
      server_name cloud.example.com;

      # For Lets Encrypt, this needs to be served via HTTP
      location /.well-known/acme-challenge/ {
          root /var/www/owncloud; # Specify here where the challenge file is placed
      }

      # enforce https
      location / {
          return 301 https://$server_name$request_uri;
      }
  }
  
  server {
      listen 443 ssl http2;
      server_name cloud.example.com;
  
      ssl_certificate /etc/ssl/nginx/cloud.example.com.crt;
      ssl_certificate_key /etc/ssl/nginx/cloud.example.com.key;

      # Example SSL/TLS configuration. Please read into the manual of NGINX before applying these.
      ssl_session_timeout 5m;
      ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
      ssl_ciphers &quot;-ALL:EECDH+AES256:EDH+AES256:AES256-SHA:EECDH+AES:EDH+AES:!ADH:!NULL:!aNULL:!eNULL:!EXPORT:!LOW:!MD5:!3DES:!PSK:!SRP:!DSS:!AESGCM:!RC4&quot;;
      ssl_dhparam /etc/nginx/dh4096.pem;
      ssl_prefer_server_ciphers on;
      keepalive_timeout    70;
      ssl_stapling on;
      ssl_stapling_verify on;
  
      # Add headers to serve security related headers
      # Before enabling Strict-Transport-Security headers please read into this topic first.
      #add_header Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;;
      add_header X-Content-Type-Options nosniff;
      add_header X-Frame-Options &quot;SAMEORIGIN&quot;;
      add_header X-XSS-Protection &quot;1; mode=block&quot;;
      add_header X-Robots-Tag none;
      add_header X-Download-Options noopen;
      add_header X-Permitted-Cross-Domain-Policies none;
  
      # Path to the root of your installation
      root /var/www/owncloud/;
  
      location = /robots.txt {
          allow all;
          log_not_found off;
          access_log off;
      }
  
      # The following 2 rules are only needed for the user_webfinger app.
      # Uncomment it if you&#39;re planning to use this app.
      #rewrite ^/.well-known/host-meta /public.php?service=host-meta last;
      #rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;
  
      location = /.well-known/carddav {
          return 301 $scheme://$host/remote.php/dav;
      }
      location = /.well-known/caldav {
          return 301 $scheme://$host/remote.php/dav;
      }
  
      # set max upload size
      client_max_body_size 512M;
      fastcgi_buffers 8 4K;                     # Please see note 1
      fastcgi_ignore_headers X-Accel-Buffering; # Please see note 2
  
      # Disable gzip to avoid the removal of the ETag header
      # Enabling gzip would also make your server vulnerable to BREACH
      # if no additional measures are done. See https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=773332
      gzip off;
  
      # Uncomment if your server is build with the ngx_pagespeed module
      # This module is currently not supported.
      #pagespeed off;
  
      error_page 403 /core/templates/403.php;
      error_page 404 /core/templates/404.php;
  
      location / {
          rewrite ^ /index.php$uri;
      }
  
      location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)/ {
          return 404;
      }
      location ~ ^/(?:\.|autotest|occ|issue|indie|db_|console) {
          return 404;
      }
  
      location ~ ^/(?:index|remote|public|cron|core/ajax/update|status|ocs/v[12]|updater/.+|ocs-provider/.+|core/templates/40[34])\.php(?:$|/) {
          fastcgi_split_path_info ^(.+\.php)(/.*)$;
          include fastcgi_params;
          fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
          fastcgi_param SCRIPT_NAME $fastcgi_script_name; # necessary for owncloud to detect the contextroot https://github.com/owncloud/core/blob/v10.0.0/lib/private/AppFramework/Http/Request.php#L603
          fastcgi_param PATH_INFO $fastcgi_path_info;
          fastcgi_param HTTPS on;
          fastcgi_param modHeadersAvailable true; #Avoid sending the security headers twice
          fastcgi_param front_controller_active true;
          fastcgi_read_timeout 180; # increase default timeout e.g. for long running carddav/ caldav syncs with 1000+ entries
          fastcgi_pass php-handler;
          fastcgi_intercept_errors on;
          fastcgi_request_buffering off; #Available since NGINX 1.7.11
      }
  
      location ~ ^/(?:updater|ocs-provider)(?:$|/) {
          try_files $uri $uri/ =404;
          index index.php;
      }
  
      # Adding the cache control header for js and css files
      # Make sure it is BELOW the PHP block
      location ~ \.(?:css|js)$ {
          try_files $uri /index.php$uri$is_args$args;
          add_header Cache-Control &quot;max-age=15778463&quot;;
          # Add headers to serve security related headers (It is intended to have those duplicated to the ones above)
          # Before enabling Strict-Transport-Security headers please read into this topic first.
          #add_header Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;;
          add_header X-Content-Type-Options nosniff;
          add_header X-Frame-Options &quot;SAMEORIGIN&quot;;
          add_header X-XSS-Protection &quot;1; mode=block&quot;;
          add_header X-Robots-Tag none;
          add_header X-Download-Options noopen;
          add_header X-Permitted-Cross-Domain-Policies none;
          # Optional: Don&#39;t log access to assets
          access_log off;
      }
  
      location ~ \.(?:svg|gif|png|html|ttf|woff|ico|jpg|jpeg|map)$ {
          add_header Cache-Control &quot;public, max-age=7200&quot;;
          try_files $uri /index.php$uri$is_args$args;
          # Optional: Don&#39;t log access to other assets
          access_log off;
      }
  }

</pre></div>
</div>
</div>
<div class="section" id="owncloud-in-a-subdirectory-of-nginx">
<h3>ownCloud in a subdirectory of NGINX<a class="headerlink" href="#owncloud-in-a-subdirectory-of-nginx" title="Permalink to this headline">¶</a></h3>
<p>The following config should be used when ownCloud is placed under a different
context root of your NGINX installation such as /owncloud or /cloud.</p>
<p>The configuration assumes that ownCloud is installed in</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">/var/www/owncloud</span></code> is accessed via <code class="docutils literal notranslate"><span class="pre">http(s)://example.com/owncloud</span></code></p>
<p>and that you have <code class="docutils literal notranslate"><span class="pre">'overwriteweb</span> <span class="pre">root'</span> <span class="pre">=&gt;</span> <span class="pre">'/owncloud',</span></code> set in your <code class="docutils literal notranslate"><span class="pre">config/config.php</span></code>.</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  upstream php-handler {
      server 127.0.0.1:9000;
      # Depending on your used PHP version
      #server unix:/var/run/php5-fpm.sock;
      #server unix:/var/run/php7-fpm.sock;
  }
  
  server {
      listen 80;
      server_name cloud.example.com;

      # For Lets Encrypt, this needs to be served via HTTP
      location /.well-known/acme-challenge/ {
          root /var/www/owncloud; # Specify here where the challenge file is placed
      }

      # enforce https
      location / {
          return 301 https://$server_name$request_uri;
      }
  }
  
  server {
      listen 443 ssl http2;
      server_name cloud.example.com;
  
      ssl_certificate /etc/ssl/nginx/cloud.example.com.crt;
      ssl_certificate_key /etc/ssl/nginx/cloud.example.com.key;

      # Example SSL/TLS configuration. Please read into the manual of NGINX before applying these.
      ssl_session_timeout 5m;
      ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
      ssl_ciphers &quot;-ALL:EECDH+AES256:EDH+AES256:AES256-SHA:EECDH+AES:EDH+AES:!ADH:!NULL:!aNULL:!eNULL:!EXPORT:!LOW:!MD5:!3DES:!PSK:!SRP:!DSS:!AESGCM:!RC4&quot;;
      ssl_dhparam /etc/nginx/dh4096.pem;
      ssl_prefer_server_ciphers on;
      keepalive_timeout    70;
      ssl_stapling on;
      ssl_stapling_verify on;

      # Add headers to serve security related headers
      # Before enabling Strict-Transport-Security headers please read into this topic first.
      #add_header Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;;
      add_header X-Content-Type-Options nosniff;
      add_header X-Frame-Options &quot;SAMEORIGIN&quot;;
      add_header X-XSS-Protection &quot;1; mode=block&quot;;
      add_header X-Robots-Tag none;
      add_header X-Download-Options noopen;
      add_header X-Permitted-Cross-Domain-Policies none;
  
      # Path to the root of your installation
      root /var/www/;
  
      location = /robots.txt {
          allow all;
          log_not_found off;
          access_log off;
      }
  
      # The following 2 rules are only needed for the user_webfinger app.
      # Uncomment it if you&#39;re planning to use this app.
      #rewrite ^/.well-known/host-meta /owncloud/public.php?service=host-meta last;
      #rewrite ^/.well-known/host-meta.json /owncloud/public.php?service=host-meta-json last;
  
      location = /.well-known/carddav {
          return 301 $scheme://$host/owncloud/remote.php/dav;
      }
      location = /.well-known/caldav {
          return 301 $scheme://$host/owncloud/remote.php/dav;
      }
  
      location ^~ /owncloud {

          # set max upload size
          client_max_body_size 512M;
          fastcgi_buffers 8 4K;                     # Please see note 1
          fastcgi_ignore_headers X-Accel-Buffering; # Please see note 2
  
  
          # Disable gzip to avoid the removal of the ETag header
          # Enabling gzip would also make your server vulnerable to BREACH
          # if no additional measures are done. See https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=773332
          gzip off;
  
          # Uncomment if your server is build with the ngx_pagespeed module
          # This module is currently not supported.
          #pagespeed off;
  
          error_page 403 /owncloud/core/templates/403.php;
          error_page 404 /owncloud/core/templates/404.php;
  
          location /owncloud {
              rewrite ^ /owncloud/index.php$uri;
          }
  
          location ~ ^/owncloud/(?:build|tests|config|lib|3rdparty|templates|data)/ {
              return 404;
          }
          location ~ ^/owncloud/(?:\.|autotest|occ|issue|indie|db_|console) {
              return 404;
          }
  
          location ~ ^/owncloud/(?:index|remote|public|cron|core/ajax/update|status|ocs/v[12]|updater/.+|ocs-provider/.+|core/templates/40[34])\.php(?:$|/) {
              fastcgi_split_path_info ^(.+\.php)(/.*)$;
              include fastcgi_params;
              fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
              fastcgi_param SCRIPT_NAME $fastcgi_script_name; # necessary for owncloud to detect the context root https://github.com/owncloud/core/blob/v10.0.0/lib/private/AppFramework/Http/Request.php#L603
              fastcgi_param PATH_INFO $fastcgi_path_info;
              fastcgi_param HTTPS on;
              fastcgi_param modHeadersAvailable true; #Avoid sending the security headers twice
              # EXPERIMENTAL: active the following if you need to get rid of the &#39;index.php&#39; in the URLs
              #fastcgi_param front_controller_active true;
              fastcgi_read_timeout 180; # increase default timeout e.g. for long running carddav/ caldav syncs with 1000+ entries
              fastcgi_pass php-handler;
              fastcgi_intercept_errors on;
              fastcgi_request_buffering off; #Available since NGINX 1.7.11
          }
  
          location ~ ^/owncloud/(?:updater|ocs-provider)(?:$|/) {
              try_files $uri $uri/ =404;
              index index.php;
          }
  
          # Adding the cache control header for js and css files
          # Make sure it is BELOW the PHP block
          location ~ /owncloud/.*\.(?:css|js) {
              try_files $uri /owncloud/index.php$uri$is_args$args;
              add_header Cache-Control &quot;max-age=15778463&quot;;
              # Add headers to serve security related headers  (It is intended to have those duplicated to the ones above)
              # Before enabling Strict-Transport-Security headers please read into this topic first.
              #add_header Strict-Transport-Security &quot;max-age=15552000; includeSubDomains&quot;;
              add_header X-Content-Type-Options nosniff;
              add_header X-Frame-Options &quot;SAMEORIGIN&quot;;
              add_header X-XSS-Protection &quot;1; mode=block&quot;;
              add_header X-Robots-Tag none;
              add_header X-Download-Options noopen;
              add_header X-Permitted-Cross-Domain-Policies none;
              # Optional: Don&#39;t log access to assets
              access_log off;
          }
  
          location ~ /owncloud/.*\.(?:svg|gif|png|html|ttf|woff|ico|jpg|jpeg|map) {
              try_files $uri /owncloud/index.php$uri$is_args$args;
              add_header Cache-Control &quot;public, max-age=7200&quot;;
              # Optional: Don&#39;t log access to other assets
              access_log off;
          }
      }
  }

</pre></div>
</div>
</div>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="javascript-js-or-css-css-files-not-served-properly">
<h3>JavaScript (.js) or CSS (.css) files not served properly<a class="headerlink" href="#javascript-js-or-css-css-files-not-served-properly" title="Permalink to this headline">¶</a></h3>
<p>A standard issue with custom NGINX configurations is, that JavaScript (.js) or CSS (.css) files are not served properly, leading to a 404 (File Not Found) error on those files and a broken web interface.</p>
<ul>
<li><p class="first">This could be caused by an inproper sequence of <code class="docutils literal notranslate"><span class="pre">location</span></code> blocks.</p>
<p>The following sequence is correct:</p>
</li>
</ul>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span>location ~ \.php(?:$|/) {
 ...
}

location ~ \.(?:css|js)$ {
 ...
}
</pre></div>
</div>
<p>Other custom configurations like caching JavaScript (.js)
or CSS (.css) files via gzip could also cause such issues.</p>
</div>
<div class="section" id="not-all-of-my-contacts-are-synchronized">
<h3>Not all of my contacts are synchronized<a class="headerlink" href="#not-all-of-my-contacts-are-synchronized" title="Permalink to this headline">¶</a></h3>
<p>Check for server timeouts!
It turns out that CardDAV sync often fails silently if the request runs into timeouts.
With PHP-FPM you might see a “CoreDAVHTTPStatusErrorDomain error 504” which is an “HTTP 504 Gateway timeout” error.
To solve this, first check the <code class="docutils literal notranslate"><span class="pre">default_socket_timeout</span></code> setting in <code class="docutils literal notranslate"><span class="pre">/etc/php/7.0/fpm/php.ini</span></code> and increase the above <code class="docutils literal notranslate"><span class="pre">fastcgi_read_timeout</span></code> accordingly.
Depending on your server’s performance a timeout of 180s should be sufficient to sync an address book of ~1000 contacts.</p>
</div>
<div class="section" id="windows-error-0x80070043-the-network-name-cannot-be-found-while-adding-a-network-drive">
<h3>Windows: Error 0x80070043 “The network name cannot be found.” while adding a network drive<a class="headerlink" href="#windows-error-0x80070043-the-network-name-cannot-be-found-while-adding-a-network-drive" title="Permalink to this headline">¶</a></h3>
<p>The windows native WebDAV client might fail with the following error message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Error</span> <span class="mh">0x80070043</span> <span class="s2">&quot;The network name cannot be found.&quot;</span> <span class="k">while</span> <span class="n">adding</span> <span class="n">a</span> <span class="n">network</span> <span class="n">drive</span>
</pre></div>
</div>
<p>A known workaround for this issue is to update your web server configuration.</p>
<div class="line-block">
<div class="line">Because NGINX does not allow nested <a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_rewrite_module.html">if</a> directives, you need to use the <a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_map_module.html">map</a> directive.</div>
<div class="line">The position of the <a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_core_module.html#location">location</a> directive is important for success.</div>
</div>
<p><strong>1 Create a map directive outside your server block</strong></p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="c1"># Fixes Windows WebDav client error 0x80070043 &quot;The network name cannot be found.&quot;</span>
<span class="k">map</span> <span class="s">&quot;</span><span class="nv">$http_user_agent:$request_method&quot;</span> <span class="nv">$WinWebDav</span> <span class="p">{</span>
    <span class="kn">default</span>                 <span class="mi">0</span><span class="p">;</span>
    <span class="kn">&quot;DavClnt:OPTIONS&quot;</span>       <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>2 Inside your server block on top of your location directives</strong></p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">location</span> <span class="p">=</span> <span class="s">/</span> <span class="p">{</span>
    <span class="kn">if</span> <span class="s">(</span><span class="nv">$WinWebDav</span><span class="s">)</span> <span class="p">{</span> <span class="kn">return</span> <span class="mi">401</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="log-optimisation">
<h2>Log Optimisation<a class="headerlink" href="#log-optimisation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="suppressing-htaccesstest-txt-and-ocdata-log-messages">
<h3>Suppressing <code class="docutils literal notranslate"><span class="pre">htaccesstest.txt</span></code> and <code class="docutils literal notranslate"><span class="pre">.ocdata</span></code> Log Messages<a class="headerlink" href="#suppressing-htaccesstest-txt-and-ocdata-log-messages" title="Permalink to this headline">¶</a></h3>
<p>If you are seeing meaningless messages in your logfile, for example <a class="reference external" href="https://central.owncloud.org/t/htaccesstest-txt-errors-in-logfiles/831">client
denied by server configuration: /var/www/data/htaccesstest.txt</a>,
or access to <code class="docutils literal notranslate"><span class="pre">.ocdata</span></code>, add this section to your NGINX configuration to suppress them:</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">location</span> <span class="p">=</span> <span class="s">/data/htaccesstest.txt</span> <span class="p">{</span>
    <span class="kn">allow</span> <span class="s">all</span><span class="p">;</span>
    <span class="kn">log_not_found</span> <span class="no">off</span><span class="p">;</span>
    <span class="kn">access_log</span> <span class="no">off</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">location</span> <span class="p">=</span> <span class="s">/data/\.ocdata</span> <span class="p">{</span>
    <span class="kn">access_log</span> <span class="no">off</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="prevent-access-log-entries-when-accessing-thumbnails">
<h3>Prevent access log entries when accessing thumbnails<a class="headerlink" href="#prevent-access-log-entries-when-accessing-thumbnails" title="Permalink to this headline">¶</a></h3>
<p>When using eg. the Gallery App, any access to a thumbnail of a picture will be logged.
This can cause a massive log quanity making log reading challenging. With this approach,
you can prevent access logging for those thumbnails.</p>
<p><strong>1 Create a map directive outside your server block like</strong></p>
<blockquote>
<div>(Adopt the path queried according your needs.)</div></blockquote>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="c1"># do not access log to gallery thumbnails, flooding access logs only, error will be logged anyway</span>
<span class="k">map</span> <span class="nv">$request_uri</span> <span class="nv">$loggable</span> <span class="p">{</span>
    <span class="kn">default</span>                              <span class="mi">1</span><span class="p">;</span>
    <span class="kn">~*\/apps\/gallery\/thumbnails</span>        <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>2 Inside your server block where you define your logs</strong></p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">access_log</span> <span class="s">/path-to-your-log-file</span> <span class="s">combined</span> <span class="s">if=</span><span class="nv">$loggable</span><span class="p">;</span>
</pre></div>
</div>
<p>If you want or need to log thumbnails access, you can easily add another logfile which only logs this access.
You can easily enable / disable this kind of logging if you uncomment / comment the line starting with <code class="docutils literal notranslate"><span class="pre">0</span></code> in the following <code class="docutils literal notranslate"><span class="pre">map</span></code> directive.</p>
<p><strong>Below the above map statement</strong></p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="c1"># invert the $loggable variable</span>
<span class="k">map</span> <span class="nv">$loggable</span> <span class="nv">$invertloggable</span> <span class="p">{</span>
    <span class="kn">default</span>                         <span class="mi">0</span><span class="p">;</span>
    <span class="kn">0</span>                               <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Below the above access_log statement</strong></p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">access_log</span> <span class="s">/var/log/nginx/&lt;your-log-file-inverted&gt;</span> <span class="s">combined</span> <span class="s">if=</span><span class="nv">$invertloggable</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="performance-tuning">
<h2>Performance Tuning<a class="headerlink" href="#performance-tuning" title="Permalink to this headline">¶</a></h2>
<p><strong>1 HTTP/2</strong></p>
<p>To increase the performance of your NGINX installation, we recommend using either the SPDY or HTTP_V2 modules, depending on your installed NGINX version.</p>
<ul class="simple">
<li>nginx (&lt;1.9.5) <a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_spdy_module.html">ngx_http_spdy_module</a></li>
<li>nginx (+1.9.5) <a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_v2_module.html">ngx_http_v2_module</a></li>
</ul>
<p>To use HTTP_V2 for NGINX you have to check two things:</p>
<ol class="arabic simple">
<li>Be aware that this module may not built in by default, due to a dependency to the OpenSSL version used on your system. It will be enabled with the <code class="docutils literal notranslate"><span class="pre">--with-http_v2_module</span></code> configuration parameter during compilation. The dependencies should be checked automatically. You can check the presence of <code class="docutils literal notranslate"><span class="pre">ngx_http_v2_module</span></code> by using the command: <code class="docutils literal notranslate"><span class="pre">nginx</span> <span class="pre">-V</span> <span class="pre">2&gt;&amp;1</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">http_v2</span> <span class="pre">-o</span></code>. A description of how to compile NGINX to include modules can be found in <a class="reference external" href="https://www.nginx.com/resources/wiki/extending/compiling">Compiling Modules</a>.</li>
<li>When changing from <a class="reference external" href="https://www.maxcdn.com/one/visual-glossary/spdy/">SPDY</a> to <a class="reference external" href="https://tools.ietf.org/html/rfc7540">HTTP v2</a>, the NGINX config has to be changed from <code class="docutils literal notranslate"><span class="pre">listen</span> <span class="pre">443</span> <span class="pre">ssl</span> <span class="pre">spdy;</span></code> to <code class="docutils literal notranslate"><span class="pre">listen</span> <span class="pre">443</span> <span class="pre">ssl</span> <span class="pre">http2;</span></code></li>
</ol>
<p><strong>2 Caching Metadata</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">open_file_cache</span></code> directive can help you to cache file metadata information. This can increase performance on high loads respectively when using eg NFS as backend.
That cache can store:</p>
<ul class="simple">
<li>Open file descriptors, their sizes and modification times;</li>
<li>Information on existence of directories;</li>
<li>File lookup errors, such as “file not found”, “no read permission”, and so on.</li>
</ul>
<p>To configure metadata caching, add following directives either in your http, server or location block:</p>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">open_file_cache</span>                 <span class="s">max=10000</span> <span class="s">inactive=5m</span><span class="p">;</span>
<span class="k">open_file_cache_valid</span>           <span class="mi">1m</span><span class="p">;</span>
<span class="k">open_file_cache_min_uses</span>        <span class="mi">1</span><span class="p">;</span>
<span class="k">open_file_cache_errors</span>          <span class="no">on</span><span class="p">;</span>
</pre></div>
</div>
<div class="section" id="configure-nginx-to-use-caching-for-owncloud-internal-images-and-thumbnails">
<h3>Configure NGINX to use caching for ownCloud internal images and thumbnails<a class="headerlink" href="#configure-nginx-to-use-caching-for-owncloud-internal-images-and-thumbnails" title="Permalink to this headline">¶</a></h3>
<p>This mechanism speeds up presentation as it shifts requests to NGINX and minimizes PHP invocations, which otherwise would take place for every thumbnail or internal image presented every time.</p>
<p><strong>1 Preparation</strong></p>
<ul class="simple">
<li>Create a directory where NGINX will save the cached thumbnails or internal images. Use any path that fits to your environment. Replace <code class="docutils literal notranslate"><span class="pre">/opt/cachezone</span></code> in this example with your path created:</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo mkdir -p /opt/cachezone
sudo chown www-data:www-data /opt/cachezone
</pre></div>
</div>
<p><strong>2 Configuration</strong></p>
<ol class="loweralpha simple">
<li><strong>Define when to skip the cache:</strong></li>
</ol>
<ul>
<li><p class="first"><strong>Option 1:</strong> <code class="docutils literal notranslate"><span class="pre">map</span></code></p>
<p>This is the preferred method.
In the <code class="docutils literal notranslate"><span class="pre">http{}</span></code> block, but <em>outside</em> the <code class="docutils literal notranslate"><span class="pre">server{}</span></code> block:</p>
</li>
</ul>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="c1"># skip_cache, default skip</span>
<span class="k">map</span> <span class="nv">$request_uri</span> <span class="nv">$skip_cache</span> <span class="p">{</span>
     <span class="kn">default</span>              <span class="mi">1</span><span class="p">;</span>
     <span class="kn">~*\/thumbnail.php</span>    <span class="mi">0</span><span class="p">;</span>
     <span class="kn">~*\/apps\/gallery\/</span>  <span class="mi">0</span><span class="p">;</span>
     <span class="kn">~*\/core\/img\/</span>      <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul>
<li><p class="first"><strong>Option 2:</strong> <code class="docutils literal notranslate"><span class="pre">if</span></code></p>
<p>In the <code class="docutils literal notranslate"><span class="pre">server{}</span></code> block, above the location block mentioned below:</p>
</li>
</ul>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">set</span> <span class="nv">$skip_cache</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">if</span> <span class="s">(</span><span class="nv">$request_uri</span> <span class="p">~</span><span class="sr">*</span> <span class="s">&quot;thumbnail.php&quot;)</span>      <span class="p">{</span> <span class="kn">set</span> <span class="nv">$skip_cache</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
<span class="k">if</span> <span class="s">(</span><span class="nv">$request_uri</span> <span class="p">~</span><span class="sr">*</span> <span class="s">&quot;/apps/gallery/&quot;)</span>     <span class="p">{</span> <span class="kn">set</span> <span class="nv">$skip_cache</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
<span class="k">if</span> <span class="s">(</span><span class="nv">$request_uri</span> <span class="p">~</span><span class="sr">*</span> <span class="s">&quot;/core/img/&quot;)</span>         <span class="p">{</span> <span class="kn">set</span> <span class="nv">$skip_cache</span> <span class="mi">0</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="2">
<li><strong>General Config:</strong></li>
</ol>
<blockquote>
<div>In case you want to have multiple cache paths with different cache keys, follow the NGINX documentation where to place the directives.
For the sake of simplicity, we both add them to the <code class="docutils literal notranslate"><span class="pre">http{}</span></code> block.</div></blockquote>
<ul class="simple">
<li>Add <em>inside</em> the <code class="docutils literal notranslate"><span class="pre">http{}</span></code> block:</li>
</ul>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">fastcgi_cache_path</span> <span class="s">/opt/cache</span> <span class="s">levels=1:2</span> <span class="s">keys_zone=cachezone:100m</span>
                   <span class="s">max_size=500m</span> <span class="s">inactive=60m</span> <span class="s">use_temp_path=off</span><span class="p">;</span>
<span class="k">fastcgi_cache_key</span> <span class="nv">$http_cookie$request_method$host$request_uri</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>Add <em>inside</em> the <code class="docutils literal notranslate"><span class="pre">server{}</span></code> block the following FastCGI caching directives, as an example of a configuration:</li>
</ul>
<div class="highlight-nginx notranslate"><div class="highlight"><pre><span></span><span class="k">location</span> <span class="p">~</span> <span class="sr">\.php(?:$/)</span> <span class="p">{</span>
    <span class="kn">fastcgi_split_path_info</span> <span class="s">^(.+\.php)(/.+)</span>$<span class="p">;</span>

    <span class="kn">include</span> <span class="s">fastcgi_params</span><span class="p">;</span>
    <span class="c1"># ...</span>

    <span class="c1">## Begin - FastCGI caching</span>
    <span class="kn">fastcgi_ignore_headers</span>  <span class="s">&quot;Cache-Control&quot;</span>
                            <span class="s">&quot;Expires&quot;</span>
                            <span class="s">&quot;Set-Cookie&quot;</span><span class="p">;</span>
    <span class="kn">fastcgi_cache_use_stale</span> <span class="s">error</span>
                            <span class="s">timeout</span>
                            <span class="s">updating</span>
                            <span class="s">http_429</span>
                            <span class="s">http_500</span>
                            <span class="s">http_503</span><span class="p">;</span>
    <span class="kn">fastcgi_cache_background_update</span> <span class="no">on</span><span class="p">;</span>
    <span class="kn">fastcgi_no_cache</span> <span class="nv">$skip_cache</span><span class="p">;</span>
    <span class="kn">fastcgi_cache_bypass</span> <span class="nv">$skip_cache</span><span class="p">;</span>
    <span class="kn">fastcgi_cache</span> <span class="s">cachezone</span><span class="p">;</span>
    <span class="kn">fastcgi_cache_valid</span>  <span class="mi">60m</span><span class="p">;</span>
    <span class="kn">fastcgi_cache_methods</span> <span class="s">GET</span> <span class="s">HEAD</span><span class="p">;</span>
    <span class="c1">## End - FastCGI caching</span>

<span class="p">}</span>
</pre></div>
</div>
<p><strong>3 Test the configuration</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">nginx</span> <span class="o">-</span><span class="n">t</span>
<span class="n">sudo</span> <span class="n">service</span> <span class="n">nginx</span> <span class="n">reload</span>
</pre></div>
</div>
<ul class="simple">
<li>Open your browser and clear your cache.</li>
<li>Logon to your ownCloud instance, open the gallery app, move thru your
folders and watch while the thumbnails are generated for the first time.</li>
<li>You may also watch with eg. <code class="docutils literal notranslate"><span class="pre">htop</span></code> your system load while the
thumbnails are processed.</li>
<li>Go to another app or logout and relogon.</li>
<li>Open the gallery app again and browse to the folders you accessed before.
Your thumbnails should appear more or less immediately.</li>
<li><code class="docutils literal notranslate"><span class="pre">htop</span></code> will not show up additional load while processing, compared to
the high load before.</li>
</ul>
</div>
</div>
</div>


					</div>
				</div>
			</div>

  </div>
</div>
</div>
<footer class="footer">
  <div class="container">
  <div class="footer_navi">

  <div class="menu-footer-navigation-container">
  	<ul id="menu-footer-navigation" class="menu">
  		<li><a href="https://owncloud.com">Home</a></li>
  		<li><a href="https://owncloud.com/about">About ownCloud</a></li>
  		<li><a href="https://owncloud.com/resources">Resources</a></li>
  		<li><a href="https://owncloud.com/become-partner">Become a Partner</a></li>
  		<li><a href="https://owncloud.org">Community</a></li>
  		<li><a href="https://owncloud.com/blog">Blog</a></li>
  		<li><a href="https://owncloud.com/jobs">Jobs</a></li>
  		<li><a href="https://owncloud.com/contact">Contact</a></li>
  	</ul>
  </div>

  <div class="follow_f">
  	<ul>
  		<li><a class="twitter" href="https://twitter.com/ownloud" target="_blank">Twitter</a></li>
  		<li><a class="facebook" href="http://www.facebook.com/owncloud" target="_blank">Facebook</a></li>
  		<li><a class="google" href="https://plus.google.com/+OwncloudOfficial" target="_blank">Google</a></li>
  	</ul>
  </div>

  <p class="copyright">© ownCloud 2011-2015</p>

  </div>
  </div>
</footer>
  </body>
</html>